

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: wwTableSelectionManager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        <img src="img/toast-ui.png" width="100%" height="100%">
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Source: wwTableSelectionManager.js</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="CodeBlockManager.html">CodeBlockManager</a><div class="hidden" id="CodeBlockManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="CodeBlockManager.html#.getSharedInstance">getSharedInstance</a></li><li><a href="CodeBlockManager.html#createCodeBlockHtml">createCodeBlockHtml</a></li><li><a href="CodeBlockManager.html#replaceElements">replaceElements</a></li><li><a href="CodeBlockManager.html#setElementReplacer">setElementReplacer</a></li><li><a href="CodeBlockManager.html#updateCodeTextById">updateCodeTextById</a></li></ul></div></li><li><a href="Command.html">Command</a><div class="hidden" id="Command_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Command.html#.TYPE">TYPE</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Command.html#.factory">factory</a></li><li><a href="Command.html#getName">getName</a></li><li><a href="Command.html#getType">getType</a></li><li><a href="Command.html#isGlobalType">isGlobalType</a></li><li><a href="Command.html#isMDType">isMDType</a></li><li><a href="Command.html#isWWType">isWWType</a></li><li><a href="Command.html#setKeyMap">setKeyMap</a></li></ul></div></li><li><a href="CommandManager.html">CommandManager</a><div class="hidden" id="CommandManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="CommandManager.html#addCommand">addCommand</a></li><li><a href="CommandManager.html#exec">exec</a></li></ul></div></li><li><a href="ComponentManager.html">ComponentManager</a><div class="hidden" id="ComponentManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ComponentManager.html#.CommandManager.command">CommandManager.command</a></li><li><a href="ComponentManager.html#addManager">addManager</a></li><li><a href="ComponentManager.html#getManager">getManager</a></li><li><a href="ComponentManager.html#removeManager">removeManager</a></li></ul></div></li><li><a href="Convertor.html">Convertor</a><div class="hidden" id="Convertor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Convertor.html#.factory">factory</a></li><li><a href="Convertor.html#.getMarkdownHighlightRenderer">getMarkdownHighlightRenderer</a></li><li><a href="Convertor.html#toHTML">toHTML</a></li><li><a href="Convertor.html#toHTMLWithCodeHightlight">toHTMLWithCodeHightlight</a></li><li><a href="Convertor.html#toMarkdown">toMarkdown</a></li></ul></div></li><li><a href="EventManager.html">EventManager</a><div class="hidden" id="EventManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="EventManager.html#addEventType">addEventType</a></li><li><a href="EventManager.html#emit">emit</a></li><li><a href="EventManager.html#emitReduce">emitReduce</a></li><li><a href="EventManager.html#listen">listen</a></li><li><a href="EventManager.html#removeEventHandler">removeEventHandler</a></li></ul></div></li><li><a href="ExtManager.html">ExtManager</a><div class="hidden" id="ExtManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ExtManager.html#applyExtension">applyExtension</a></li><li><a href="ExtManager.html#defineExtension">defineExtension</a></li></ul></div></li><li><a href="I18n.html">I18n</a><div class="hidden" id="I18n_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="I18n.html#get">get</a></li><li><a href="I18n.html#setCode">setCode</a></li><li><a href="I18n.html#setLang">setLang</a></li></ul></div></li><li><a href="ImportManager.html">ImportManager</a><div class="hidden" id="ImportManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ImportManager.html#_decodeURL">_decodeURL</a></li></ul></div></li><li><a href="KeyMapper.html">KeyMapper</a><div class="hidden" id="KeyMapper_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="KeyMapper.html#.getSharedInstance">getSharedInstance</a></li><li><a href="KeyMapper.html#convert">convert</a></li></ul></div></li><li><a href="Layout.html">Layout</a><div class="hidden" id="Layout_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Layout.html#changePreviewStyle">changePreviewStyle</a></li><li><a href="Layout.html#getEditorEl">getEditorEl</a></li><li><a href="Layout.html#getMdEditorContainerEl">getMdEditorContainerEl</a></li><li><a href="Layout.html#getPreviewEl">getPreviewEl</a></li><li><a href="Layout.html#getWwEditorContainerEl">getWwEditorContainerEl</a></li><li><a href="Layout.html#hide">hide</a></li><li><a href="Layout.html#init">init</a></li><li><a href="Layout.html#remove">remove</a></li><li><a href="Layout.html#show">show</a></li><li><a href="Layout.html#switchToMarkdown">switchToMarkdown</a></li><li><a href="Layout.html#switchToWYSIWYG">switchToWYSIWYG</a></li></ul></div></li><li><a href="MarkdownEditor.html">MarkdownEditor</a><div class="hidden" id="MarkdownEditor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MarkdownEditor.html#.factory">factory</a></li><li><a href="MarkdownEditor.html#addWidget">addWidget</a></li><li><a href="MarkdownEditor.html#blur">blur</a></li><li><a href="MarkdownEditor.html#focus">focus</a></li><li><a href="MarkdownEditor.html#getCaretPosition">getCaretPosition</a></li><li><a href="MarkdownEditor.html#getCurrentRange">getCurrentRange</a></li><li><a href="MarkdownEditor.html#getEditor">getEditor</a></li><li><a href="MarkdownEditor.html#getRange">getRange</a></li><li><a href="MarkdownEditor.html#getTextObject">getTextObject</a></li><li><a href="MarkdownEditor.html#getValue">getValue</a></li><li><a href="MarkdownEditor.html#moveCursorToEnd">moveCursorToEnd</a></li><li><a href="MarkdownEditor.html#moveCursorToStart">moveCursorToStart</a></li><li><a href="MarkdownEditor.html#remove">remove</a></li><li><a href="MarkdownEditor.html#replaceRelativeOffset">replaceRelativeOffset</a></li><li><a href="MarkdownEditor.html#replaceSelection">replaceSelection</a></li><li><a href="MarkdownEditor.html#reset">reset</a></li><li><a href="MarkdownEditor.html#scrollTop">scrollTop</a></li><li><a href="MarkdownEditor.html#setHeight">setHeight</a></li><li><a href="MarkdownEditor.html#setValue">setValue</a></li></ul></div></li><li><a href="MarkerManager.html">MarkerManager</a><div class="hidden" id="MarkerManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MarkerManager.html#_calculateEndDiff">_calculateEndDiff</a></li><li><a href="MarkerManager.html#_calculateStartDiff">_calculateStartDiff</a></li><li><a href="MarkerManager.html#_forEachChanges">_forEachChanges</a></li><li><a href="MarkerManager.html#_getUpdateMarkersWithDiffs">_getUpdateMarkersWithDiffs</a></li><li><a href="MarkerManager.html#_makeMarkerDiffs">_makeMarkerDiffs</a></li><li><a href="MarkerManager.html#resetContent">resetContent</a></li><li><a href="MarkerManager.html#updateMarkersByContent">updateMarkersByContent</a></li></ul></div></li><li><a href="MdListManager.html">MdListManager</a><div class="hidden" id="MdListManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="MdListManager.html#.this.name">this.name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="MdListManager.html#appendBlankLineIfNeed">appendBlankLineIfNeed</a></li><li><a href="MdListManager.html#createSortedLineRange">createSortedLineRange</a></li><li><a href="MdListManager.html#expandLineRangeIfNeed">expandLineRangeIfNeed</a></li><li><a href="MdListManager.html#isListOrParagraph">isListOrParagraph</a></li><li><a href="MdListManager.html#replaceLineText">replaceLineText</a></li></ul></div></li><li><a href="Preview.html">Preview</a><div class="hidden" id="Preview_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Preview.html#isVisible">isVisible</a></li><li><a href="Preview.html#refresh">refresh</a></li><li><a href="Preview.html#render">render</a></li><li><a href="Preview.html#setHeight">setHeight</a></li></ul></div></li><li><a href="SectionManager.html">SectionManager</a><div class="hidden" id="SectionManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="SectionManager.html#_addNewSection">_addNewSection</a></li><li><a href="SectionManager.html#_doFollowedLinesHaveCodeBlockEnd">_doFollowedLinesHaveCodeBlockEnd</a></li><li><a href="SectionManager.html#_eachLineState">_eachLineState</a></li><li><a href="SectionManager.html#_getPreviewSections">_getPreviewSections</a></li><li><a href="SectionManager.html#_isAtxHeader">_isAtxHeader</a></li><li><a href="SectionManager.html#_isCodeBlockEnd">_isCodeBlockEnd</a></li><li><a href="SectionManager.html#_isCodeBlockStart">_isCodeBlockStart</a></li><li><a href="SectionManager.html#_isSeTextHeader">_isSeTextHeader</a></li><li><a href="SectionManager.html#_isTable">_isTable</a></li><li><a href="SectionManager.html#_isTableAligner">_isTableAligner</a></li><li><a href="SectionManager.html#_isTableCode">_isTableCode</a></li><li><a href="SectionManager.html#_makeSectionData">_makeSectionData</a></li><li><a href="SectionManager.html#_matchPreviewSectionsWithSectionlist">_matchPreviewSectionsWithSectionlist</a></li><li><a href="SectionManager.html#_updateCurrentSectionEnd">_updateCurrentSectionEnd</a></li><li><a href="SectionManager.html#getSectionList">getSectionList</a></li><li><a href="SectionManager.html#makeSectionList">makeSectionList</a></li><li><a href="SectionManager.html#sectionByLine">sectionByLine</a></li><li><a href="SectionManager.html#sectionMatch">sectionMatch</a></li></ul></div></li><li><a href="ToastUIEditor.html">ToastUIEditor</a><div class="hidden" id="ToastUIEditor_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="ToastUIEditor.html#.i18n">i18n</a></li><li><a href="ToastUIEditor.html#.markdownItRenderer">markdownItRenderer</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="ToastUIEditor.html#.defineExtension">defineExtension</a></li><li><a href="ToastUIEditor.html#.factory">factory</a></li><li><a href="ToastUIEditor.html#.getInstances">getInstances</a></li><li><a href="ToastUIEditor.html#addHook">addHook</a></li><li><a href="ToastUIEditor.html#addWidget">addWidget</a></li><li><a href="ToastUIEditor.html#afterAddedCommand">afterAddedCommand</a></li><li><a href="ToastUIEditor.html#blur">blur</a></li><li><a href="ToastUIEditor.html#changeMode">changeMode</a></li><li><a href="ToastUIEditor.html#changePreviewStyle">changePreviewStyle</a></li><li><a href="ToastUIEditor.html#contentHeight">contentHeight</a></li><li><a href="ToastUIEditor.html#exec">exec</a></li><li><a href="ToastUIEditor.html#focus">focus</a></li><li><a href="ToastUIEditor.html#getCodeMirror">getCodeMirror</a></li><li><a href="ToastUIEditor.html#getCurrentModeEditor">getCurrentModeEditor</a></li><li><a href="ToastUIEditor.html#getCurrentPreviewStyle">getCurrentPreviewStyle</a></li><li><a href="ToastUIEditor.html#getHtml">getHtml</a></li><li><a href="ToastUIEditor.html#getMarkdown">getMarkdown</a></li><li><a href="ToastUIEditor.html#getRange">getRange</a></li><li><a href="ToastUIEditor.html#getSquire">getSquire</a></li><li><a href="ToastUIEditor.html#getTextObject">getTextObject</a></li><li><a href="ToastUIEditor.html#getUI">getUI</a></li><li><a href="ToastUIEditor.html#getValue">getValue</a></li><li><a href="ToastUIEditor.html#hide">hide</a></li><li><a href="ToastUIEditor.html#isMarkdownMode">isMarkdownMode</a></li><li><a href="ToastUIEditor.html#isViewOnly">isViewOnly</a></li><li><a href="ToastUIEditor.html#isWysiwygMode">isWysiwygMode</a></li><li><a href="ToastUIEditor.html#moveCursorToEnd">moveCursorToEnd</a></li><li><a href="ToastUIEditor.html#moveCursorToStart">moveCursorToStart</a></li><li><a href="ToastUIEditor.html#off">off</a></li><li><a href="ToastUIEditor.html#on">on</a></li><li><a href="ToastUIEditor.html#remove">remove</a></li><li><a href="ToastUIEditor.html#removeHook">removeHook</a></li><li><a href="ToastUIEditor.html#reset">reset</a></li><li><a href="ToastUIEditor.html#scrollTop">scrollTop</a></li><li><a href="ToastUIEditor.html#setHtml">setHtml</a></li><li><a href="ToastUIEditor.html#setMarkdown">setMarkdown</a></li><li><a href="ToastUIEditor.html#setUI">setUI</a></li><li><a href="ToastUIEditor.html#setValue">setValue</a></li><li><a href="ToastUIEditor.html#show">show</a></li></ul></div></li><li><a href="ToastUIEditorViewOnly.html">ToastUIEditorViewOnly</a><div class="hidden" id="ToastUIEditorViewOnly_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ToastUIEditorViewOnly.html#addHook">addHook</a></li><li><a href="ToastUIEditorViewOnly.html#isMarkdownMode">isMarkdownMode</a></li><li><a href="ToastUIEditorViewOnly.html#isViewOnly">isViewOnly</a></li><li><a href="ToastUIEditorViewOnly.html#isWysiwygMode">isWysiwygMode</a></li><li><a href="ToastUIEditorViewOnly.html#off">off</a></li><li><a href="ToastUIEditorViewOnly.html#on">on</a></li><li><a href="ToastUIEditorViewOnly.html#remove">remove</a></li><li><a href="ToastUIEditorViewOnly.html#setMarkdown">setMarkdown</a></li><li><a href="ToastUIEditorViewOnly.html#setValue">setValue</a></li></ul></div></li><li><a href="WwClipboardManager.html">WwClipboardManager</a><div class="hidden" id="WwClipboardManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WwClipboardManager.html#init">init</a></li></ul></div></li><li><a href="WwCodeBlockManager.html">WwCodeBlockManager</a><div class="hidden" id="WwCodeBlockManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwCodeBlockManager.html#.this.name">this.name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WwCodeBlockManager.html#convertToCodeblock">convertToCodeblock</a></li><li><a href="WwCodeBlockManager.html#isInCodeBlock">isInCodeBlock</a></li><li><a href="WwCodeBlockManager.html#prepareToPasteOnCodeblock">prepareToPasteOnCodeblock</a></li></ul></div></li><li><a href="WwHeadingManager.html">WwHeadingManager</a><div class="hidden" id="WwHeadingManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwHeadingManager.html#.this.name">this.name</a></li></ul></div></li><li><a href="WwHrManager.html">WwHrManager</a><div class="hidden" id="WwHrManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwHrManager.html#.this.name">this.name</a></li></ul></div></li><li><a href="WwListManager.html">WwListManager</a><div class="hidden" id="WwListManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwListManager.html#.this.name">this.name</a></li></ul></div></li><li><a href="WwMergedTableManager.html">WwMergedTableManager</a><div class="hidden" id="WwMergedTableManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WwMergedTableManager.html#prepareToTableCellStuffing">prepareToTableCellStuffing</a></li><li><a href="WwMergedTableManager.html#tableCellAppendAidForTableElement">tableCellAppendAidForTableElement</a></li></ul></div></li><li><a href="WwMergedTableSelectionManager.html">WwMergedTableSelectionManager</a><div class="hidden" id="WwMergedTableSelectionManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WwMergedTableSelectionManager.html#hasSelectedBothThAndTd">hasSelectedBothThAndTd</a></li><li><a href="WwMergedTableSelectionManager.html#highlightTableCellsBy">highlightTableCellsBy</a></li><li><a href="WwMergedTableSelectionManager.html#setTableSelectionTimerIfNeed">setTableSelectionTimerIfNeed</a></li><li><a href="WwMergedTableSelectionManager.html#styleToSelectedCells">styleToSelectedCells</a></li></ul></div></li><li><a href="WwPasteContentHelper.html">WwPasteContentHelper</a><div class="hidden" id="WwPasteContentHelper_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WwPasteContentHelper.html#preparePaste">preparePaste</a></li></ul></div></li><li><a href="WwPManager.html">WwPManager</a><div class="hidden" id="WwPManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwPManager.html#.this.name">this.name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WwPManager.html#_splitPtagContentLines">_splitPtagContentLines</a></li></ul></div></li><li><a href="WwTableManager.html">WwTableManager</a><div class="hidden" id="WwTableManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwTableManager.html#.this.name">this.name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WwTableManager.html#_changeSelectionToTargetCell">_changeSelectionToTargetCell</a></li><li><a href="WwTableManager.html#_onPaste">_onPaste</a></li><li><a href="WwTableManager.html#destroy">destroy</a></li><li><a href="WwTableManager.html#getTableIDClassName">getTableIDClassName</a></li><li><a href="WwTableManager.html#isInTable">isInTable</a></li><li><a href="WwTableManager.html#isNonTextDeleting">isNonTextDeleting</a></li><li><a href="WwTableManager.html#prepareToPasteOnTable">prepareToPasteOnTable</a></li><li><a href="WwTableManager.html#prepareToTableCellStuffing">prepareToTableCellStuffing</a></li><li><a href="WwTableManager.html#resetLastCellNode">resetLastCellNode</a></li><li><a href="WwTableManager.html#setLastCellNode">setLastCellNode</a></li><li><a href="WwTableManager.html#tableCellAppendAidForTableElement">tableCellAppendAidForTableElement</a></li><li><a href="WwTableManager.html#wrapDanglingTableCellsIntoTrIfNeed">wrapDanglingTableCellsIntoTrIfNeed</a></li><li><a href="WwTableManager.html#wrapTheadAndTbodyIntoTableIfNeed">wrapTheadAndTbodyIntoTableIfNeed</a></li><li><a href="WwTableManager.html#wrapTrsIntoTbodyIfNeed">wrapTrsIntoTbodyIfNeed</a></li></ul></div></li><li><a href="WwTableSelectionManager.html">WwTableSelectionManager</a><div class="hidden" id="WwTableSelectionManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwTableSelectionManager.html#.this.name">this.name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WwTableSelectionManager.html#destroy">destroy</a></li><li><a href="WwTableSelectionManager.html#getSelectionRangeFromTable">getSelectionRangeFromTable</a></li><li><a href="WwTableSelectionManager.html#highlightTableCellsBy">highlightTableCellsBy</a></li><li><a href="WwTableSelectionManager.html#removeClassAttrbuteFromAllCellsIfNeed">removeClassAttrbuteFromAllCellsIfNeed</a></li><li><a href="WwTableSelectionManager.html#setTableSelectionTimerIfNeed">setTableSelectionTimerIfNeed</a></li><li><a href="WwTableSelectionManager.html#styleToSelectedCells">styleToSelectedCells</a></li></ul></div></li><li><a href="WwTaskManager.html">WwTaskManager</a><div class="hidden" id="WwTaskManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WwTaskManager.html#.this.name">this.name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WwTaskManager.html#formatTask">formatTask</a></li><li><a href="WwTaskManager.html#isInTaskList">isInTaskList</a></li><li><a href="WwTaskManager.html#unformatTask">unformatTask</a></li></ul></div></li><li><a href="WwTextObject.html">WwTextObject</a><div class="hidden" id="WwTextObject_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WwTextObject.html#deleteContent">deleteContent</a></li><li><a href="WwTextObject.html#expandEndOffset">expandEndOffset</a></li><li><a href="WwTextObject.html#expandStartOffset">expandStartOffset</a></li><li><a href="WwTextObject.html#getTextContent">getTextContent</a></li><li><a href="WwTextObject.html#peekStartBeforeOffset">peekStartBeforeOffset</a></li><li><a href="WwTextObject.html#replaceContent">replaceContent</a></li><li><a href="WwTextObject.html#setEndBeforeRange">setEndBeforeRange</a></li><li><a href="WwTextObject.html#setRange">setRange</a></li></ul></div></li><li><a href="WysiwygEditor.html">WysiwygEditor</a><div class="hidden" id="WysiwygEditor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WysiwygEditor.html#.factory">factory</a></li><li><a href="WysiwygEditor.html#.MarkdownEditor#init">MarkdownEditor#init</a></li><li><a href="WysiwygEditor.html#addKeyEventHandler">addKeyEventHandler</a></li><li><a href="WysiwygEditor.html#addWidget">addWidget</a></li><li><a href="WysiwygEditor.html#blur">blur</a></li><li><a href="WysiwygEditor.html#breakToNewDefaultBlock">breakToNewDefaultBlock</a></li><li><a href="WysiwygEditor.html#changeBlockFormatTo">changeBlockFormatTo</a></li><li><a href="WysiwygEditor.html#findTextNodeFilter">findTextNodeFilter</a></li><li><a href="WysiwygEditor.html#focus">focus</a></li><li><a href="WysiwygEditor.html#get$Body">get$Body</a></li><li><a href="WysiwygEditor.html#getEditor">getEditor</a></li><li><a href="WysiwygEditor.html#getRange">getRange</a></li><li><a href="WysiwygEditor.html#getTextObject">getTextObject</a></li><li><a href="WysiwygEditor.html#getValue">getValue</a></li><li><a href="WysiwygEditor.html#hasFormatWithRx">hasFormatWithRx</a></li><li><a href="WysiwygEditor.html#init">init</a></li><li><a href="WysiwygEditor.html#makeEmptyBlockCurrentSelection">makeEmptyBlockCurrentSelection</a></li><li><a href="WysiwygEditor.html#moveCursorToEnd">moveCursorToEnd</a></li><li><a href="WysiwygEditor.html#moveCursorToStart">moveCursorToStart</a></li><li><a href="WysiwygEditor.html#readySilentChange">readySilentChange</a></li><li><a href="WysiwygEditor.html#remove">remove</a></li><li><a href="WysiwygEditor.html#removeKeyEventHandler">removeKeyEventHandler</a></li><li><a href="WysiwygEditor.html#replaceContentText">replaceContentText</a></li><li><a href="WysiwygEditor.html#replaceRelativeOffset">replaceRelativeOffset</a></li><li><a href="WysiwygEditor.html#replaceSelection">replaceSelection</a></li><li><a href="WysiwygEditor.html#reset">reset</a></li><li><a href="WysiwygEditor.html#restoreSavedSelection">restoreSavedSelection</a></li><li><a href="WysiwygEditor.html#saveSelection">saveSelection</a></li><li><a href="WysiwygEditor.html#scrollTop">scrollTop</a></li><li><a href="WysiwygEditor.html#setHeight">setHeight</a></li><li><a href="WysiwygEditor.html#setValue">setValue</a></li><li><a href="WysiwygEditor.html#unwrapBlockTag">unwrapBlockTag</a></li></ul></div></li><li><a href="WysiwygMarkerHelper.html">WysiwygMarkerHelper</a><div class="hidden" id="WysiwygMarkerHelper_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="WysiwygMarkerHelper.html#_extendRangeToTextNodeIfHasNone">_extendRangeToTextNodeIfHasNone</a></li><li><a href="WysiwygMarkerHelper.html#_findOffsetNode">_findOffsetNode</a></li><li><a href="WysiwygMarkerHelper.html#_getExtraInfoOfRange">_getExtraInfoOfRange</a></li><li><a href="WysiwygMarkerHelper.html#clearSelect">clearSelect</a></li><li><a href="WysiwygMarkerHelper.html#getMarkerInfoOfCurrentSelection">getMarkerInfoOfCurrentSelection</a></li><li><a href="WysiwygMarkerHelper.html#getTextContent">getTextContent</a></li><li><a href="WysiwygMarkerHelper.html#selectOffsetRange">selectOffsetRange</a></li><li><a href="WysiwygMarkerHelper.html#updateMarkerWithExtraInfo">updateMarkerWithExtraInfo</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Implements wysiwyg table selection manager
 * @author Sungho Kim(sungho-kim@nhnent.com) FE Development Lab/NHN Ent.
 * @author Junghwan Park(junghwan.park@nhnent.com) FE Development Lab/NHN Ent.
 */


import domUtils from './domUtils';
const TABLE_CELL_SELECTED_CLASS_NAME = 'te-cell-selected';

/**
 * WwTableSelectionManager
 * @exports WwTableSelectionManager
 * @constructor
 * @class WwTableSelectionManager
 * @param {WysiwygEditor} wwe WysiwygEditor instance
 */
class WwTableSelectionManager {
    constructor(wwe) {
        this.wwe = wwe;
        this.eventManager = wwe.eventManager;

        /**
         * Name property
         * @api
         * @memberOf WwTableSelectionManager
         * @type {string}
         */
        this.name = 'tableSelection';

        this._init();
    }

    /**
     * _init
     * Initialize
     * @memberOf WwTableSelectionManager
     * @private
     */
    _init() {
        this._initEvent();

        // For disable firefox's table tool UI and table resize handler
        if (tui.util.browser.firefox) {
            document.execCommand('enableObjectResizing', false, 'false');
            document.execCommand('enableInlineTableEditing', false, 'false');
        }
    }

    /**
     * _initEvent
     * Initialize event
     * @memberOf WwTableSelectionManager
     * @private
     */
    _initEvent() {
        let selectionStart, selectionEnd, validSelectionEnd;

        /**
         * Start table selection timer
         * @type {object}
         * @private
         */
        this._tableSelectionTimer = null;
        /**
         * Remove selection timer for Firefox table selection
         * @type {object}
         * @private
         */
        this._removeSelectionTimer = null;
        /**
         * Boolean value for whether selection started
         * @type {boolean}
         * @private
         */
        this._isSelectionStarted = false;

        this.eventManager.listen('mousedown.table', ev => {
            const MOUSE_RIGHT_BUTTON = 2;
            selectionStart = $(ev.data.target).closest('td,th')[0];
            const isSelectedCell = $(selectionStart).hasClass(TABLE_CELL_SELECTED_CLASS_NAME);
            selectionEnd = null;

            if (!isSelectedCell
                || (isSelectedCell &amp;&amp; ev.data.button !== MOUSE_RIGHT_BUTTON)
            ) {
                this.removeClassAttrbuteFromAllCellsIfNeed();
                this.setTableSelectionTimerIfNeed(selectionStart);
            }
        });

        this.eventManager.listen('mouseover.table', ev => {
            selectionEnd = $(ev.data.target).closest('td,th')[0];

            const range = this.wwe.getEditor().getSelection();
            const isEndsInTable = $(selectionEnd).parents('table')[0];
            const isSameCell = selectionStart === selectionEnd;
            const isTextSelect = this._isTextSelect(range, isSameCell) &amp;&amp;
                  !$(selectionStart).hasClass(TABLE_CELL_SELECTED_CLASS_NAME);

            if (this._isSelectionStarted &amp;&amp; isEndsInTable &amp;&amp; !isTextSelect) {
                window.getSelection().removeAllRanges();
                // For disable firefox's native table cell selection
                if (tui.util.browser.firefox &amp;&amp; !this._removeSelectionTimer) {
                    this._removeSelectionTimer = setInterval(() => {
                        window.getSelection().removeAllRanges();
                    }, 10);
                }
                this.highlightTableCellsBy(selectionStart, selectionEnd);
                validSelectionEnd = selectionEnd;
            }
        });

        this.eventManager.listen('mouseup.table', ev => {
            selectionEnd = $(ev.data.target).closest('td,th')[0];

            let range = this.wwe.getEditor().getSelection();
            const isSameCell = selectionStart === selectionEnd;
            const isTextSelect = this._isTextSelect(range, isSameCell) &amp;&amp;
                  !$(selectionStart).hasClass(TABLE_CELL_SELECTED_CLASS_NAME);

            this._clearTableSelectionTimerIfNeed();

            if (this._isSelectionStarted) {
                if (isTextSelect) {
                    this.removeClassAttrbuteFromAllCellsIfNeed();
                } else {
                    this.wwe.componentManager.getManager('table').resetLastCellNode();

                    selectionEnd = selectionEnd || validSelectionEnd;
                    range = this.wwe.getEditor().getSelection();
                    range.setStart(selectionEnd, 0);
                    range.setEnd(selectionEnd, 1);
                    range.collapse(true);
                    this.wwe.getEditor().setSelection(range);
                }
            }

            this._isSelectionStarted = false;
        });
    }

    /**
     * Return whether single cell text selection or not
     * @param {Range} range Range object
     * @param {boolean} isSameCell Boolean value for same cell selection
     * @returns {boolean}
     * @private
     */
    _isTextSelect(range, isSameCell) {
        return /TD|TH|TEXT/i.test(range.commonAncestorContainer.nodeName) &amp;&amp; isSameCell;
    }

    /**
     * Set setTimeout and setInterval timer execution if table selecting situation
     * @param {HTMLElement} selectionStart Start element
     */
    setTableSelectionTimerIfNeed(selectionStart) {
        const isTableSelecting = $(selectionStart).parents('table').length;

        if (isTableSelecting) {
            this._tableSelectionTimer = setTimeout(() => {
                this._isSelectionStarted = true;
            }, 100);
        }
    }

    /**
     * Clear setTimeout and setInterval timer execution
     * @private
     */
    _clearTableSelectionTimerIfNeed() {
        clearTimeout(this._tableSelectionTimer);
        // For disable firefox's native table selection
        if (tui.util.browser.firefox &amp;&amp; this._removeSelectionTimer) {
            clearTimeout(this._removeSelectionTimer);
            this._removeSelectionTimer = null;
        }
    }

    /**
     * Re arrange selection when table does not include both start and end selection element
     * @param {HTMLElement} selectionStart Start element of selection
     * @param {HTMLElement} selectionEnd End element of selection
     * @returns {{startContainer: HTMLElement, endContainer: HTMLElement}}
     * @private
     */
    _reArrangeSelectionIfneed(selectionStart, selectionEnd) {
        const isRangeStartInTable = $(selectionStart).parents('table').length;
        const isRangeEndInTable = $(selectionEnd).parents('table').length;
        const isStartRangeOut = isRangeEndInTable &amp;&amp; !isRangeStartInTable;
        const isEndRangeOut = !isRangeEndInTable &amp;&amp; isRangeStartInTable;

        if (isStartRangeOut) {
            selectionStart = $(selectionEnd).parents('table').find('th').first()[0];
        } else if (isEndRangeOut) {
            selectionEnd = $(selectionStart).parents('table').find('td').last()[0];
        }

        return {
            startContainer: selectionStart,
            endContainer: selectionEnd
        };
    }

    /**
     * Apply select direction to editor
     * @param {{startContainer: HTMLElement, endContainer: HTMLElement}} selectionInformation
     *     Selection start and end element
     * @param {Range} range Range object
     * @returns {Range}
     * @private
     */
    _applySelectionDirection(selectionInformation, range) {
        const nodeOffsetOfParent = domUtils.getNodeOffsetOfParent;
        const selectionStart = selectionInformation.startContainer;
        const selectionEnd = selectionInformation.endContainer;
        const rowDirection = nodeOffsetOfParent($(selectionStart).closest('tr')[0])
            - nodeOffsetOfParent($(selectionEnd).closest('tr')[0]);
        const cellDirection = nodeOffsetOfParent(selectionStart) - nodeOffsetOfParent(selectionEnd);
        const isSameRow = (rowDirection === 0);
        const isRowIncreases = (rowDirection &lt; 0);
        const isColumnIncreases = (cellDirection > 0);

        if (isSameRow) {
            if (isColumnIncreases) {
                range.setStart(selectionEnd, 0);
                range.setEnd(selectionStart, 1);
            } else {
                range.setStart(selectionStart, 0);
                range.setEnd(selectionEnd, 1);
            }
        } else if (isRowIncreases) {
            range.setStart(selectionStart, 0);
            range.setEnd(selectionEnd, 1);
        } else {
            range.setStart(selectionEnd, 0);
            range.setEnd(selectionStart, 1);
        }

        return range;
    }

    /**
     * Get table cell element
     * @param {Node | HTMLElement} node textNode or table cell element
     * @returns {HTMLElement}
     * @private
     */
    _getTableCell(node) {
        return node.nodeType === 3 ? $(node).parent('td,th')[0] : node;
    }

    /**
     * Get selection coordinate by current selection
     * @param {HTMLElement} selectionStart start element
     * @param {HTMLElement} selectionEnd end element
     * @returns {{from: {row: number, cell: number}, to: {row: number, cell: number}}}
     * @memberOf WwTableSelectionManager
     * @api
     */
    getSelectionRangeFromTable(selectionStart, selectionEnd) {
        const nodeOffsetOfParent = domUtils.getNodeOffsetOfParent;
        const startRowOffset = nodeOffsetOfParent(selectionStart.parentNode);
        const endRowOffset = nodeOffsetOfParent(selectionEnd.parentNode);
        const startCellOffset = nodeOffsetOfParent(selectionStart);
        const endCellOffset = nodeOffsetOfParent(selectionEnd);
        const startCellContainer = domUtils.getParentUntil(selectionStart, 'TABLE');
        const endCellContainer = domUtils.getParentUntil(selectionEnd, 'TABLE');
        const isReversedTheadAndTbodySelect = (domUtils.getNodeName(startCellContainer) === 'TBODY'
        &amp;&amp; domUtils.getNodeName(endCellContainer) === 'THEAD');
        const isTheadAndTbodySelect = startCellContainer !== endCellContainer;
        const isBothInTbody = !!$(selectionStart).parents('tbody').length &amp;&amp; !!$(selectionEnd).parents('tbody').length;
        const start = {
            row: startRowOffset,
            cell: startCellOffset
        };
        const end = {
            row: endRowOffset,
            cell: endCellOffset
        };
        let from, to;

        if (isReversedTheadAndTbodySelect) {
            start.row += 1;
        } else if (isTheadAndTbodySelect) {
            end.row += 1;
        } else if (isBothInTbody) {
            start.row += 1;
            end.row += 1;
        }

        if (startRowOffset > endRowOffset
            || (startRowOffset === endRowOffset &amp;&amp; startCellOffset > endCellOffset)
        ) {
            from = end;
            to = start;
        } else {
            from = start;
            to = end;
        }

        return {
            from,
            to
        };
    }

    /**
     * Highlight selected table cells
     * @param {HTMLElement} selectionStart start element
     * @param {HTMLElement} selectionEnd end element
     */
    highlightTableCellsBy(selectionStart, selectionEnd) {
        const trs = $(selectionStart).parents('table').find('tr');
        const selection = this.getSelectionRangeFromTable(selectionStart, selectionEnd);
        const rowFrom = selection.from.row;
        const cellFrom = selection.from.cell;
        const rowTo = selection.to.row;
        const cellTo = selection.to.cell;

        trs.each((rowIndex, row) => {
            $(row).find('td,th').each((cellIndex, cell) => {
                const $cell = $(cell);
                const isFromRow = (rowIndex === rowFrom);
                const isToRow = (rowIndex === rowTo);

                if ((isFromRow &amp;&amp; cellIndex &lt; cellFrom)
                    || (isToRow &amp;&amp; cellIndex > cellTo)
                    || rowIndex &lt; rowFrom
                    || rowIndex > rowTo
                ) {
                    $cell.removeClass(TABLE_CELL_SELECTED_CLASS_NAME);
                } else {
                    $cell.addClass(TABLE_CELL_SELECTED_CLASS_NAME);
                }
            });
        });
    }

    /**
     * Remove '.te-cell-selected' class from all of table Cell
     * @memberOf WwTableSelectionManager
     * @api
     */
    removeClassAttrbuteFromAllCellsIfNeed() {
        this.wwe.get$Body().find(`td.${TABLE_CELL_SELECTED_CLASS_NAME},th.${TABLE_CELL_SELECTED_CLASS_NAME}`)
            .each((i, node) => {
                const $node = $(node);

                $node.removeClass(TABLE_CELL_SELECTED_CLASS_NAME);

                if (!$node.attr('class').length) {
                    $node.removeAttr('class');
                }
            });
    }

    getSelectedCells() {
        return this.wwe.get$Body().find(`.${TABLE_CELL_SELECTED_CLASS_NAME}`);
    }

    /**
     * Create selection by selected cells and collapse that selection to end
     * @private
     */
    createRangeBySelectedCells() {
        const sq = this.wwe.getEditor();
        const range = sq.getSelection().cloneRange();
        const selectedCells = this.getSelectedCells();
        const tableManager = this.wwe.componentManager.getManager('table');

        if (selectedCells.length &amp;&amp; tableManager.isInTable(range)) {
            range.setStart(selectedCells.first()[0], 0);
            range.setEnd(selectedCells.last()[0], 1);
            sq.setSelection(range);
        }
    }

    /**
     * Style to selected cells.
     * @param {function} onStyle - function for styling
     */
    styleToSelectedCells(onStyle) {
        this.createRangeBySelectedCells();
        onStyle(this.wwe.getEditor());
    }

    /**
     * Destroy.
     */
    destroy() {
        this.eventManager.removeEventHandler('mousedown.table');
        this.eventManager.removeEventHandler('mouseover.table');
        this.eventManager.removeEventHandler('mouseup.table');
    }
}
module.exports = WwTableSelectionManager;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var element = document.getElementById(id); // do not use jquery selector

        $(element).removeClass('hidden');
        showLnbApi();
    </script>

</body>
</html>
