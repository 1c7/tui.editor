/*!
 * tui-editor
 * @version 0.12.10
 * @author Sungho Kim <shirenbeat@gmail.com>
 * @license MIT
 */
!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=n(60),o=i(r);n(59),n(58),n(57),n(56),n(55),n(40),n(61),n(18),n(19),n(34),window.tui=window.tui||{},window.tui.Editor=o.default,n(65),n(67),n(69),n(66),n(68),n(133),n(50),$.fn.tuiEditor=function(){var e=void 0,t=void 0,n=this[0];if(n){for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];if(e=r[0]||{},t=$.data(n,"tuiEditor")){if("string"==typeof e){var s;return(s=t)[e].apply(s,a(r.slice(1)))}}else e.el=n,t=o.default.factory(e),$.data(n,"tuiEditor",t)}return this}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(17),l=i(o),s=tui.util,c=/Mac/.test(navigator.platform),u=c?1:0,d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this._command=new s.Map,this._mdCommand=new s.Map,this._wwCommand=new s.Map,this._options=$.extend({useCommandShortcut:!0},n),this.base=t,this.keyMapCommand={},this._initEvent()}return r(e,[{key:"_addCommandBefore",value:function(e){var t={command:e};return this.base.eventManager.emit("addCommandBefore",t),t.command||e}},{key:"addCommand",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];i.length&&(t=e.command.apply(e,[t].concat(i))),t=this._addCommandBefore(t);var r=t.getName(),o=void 0;return t.isMDType()?o=this._mdCommand:t.isWWType()?o=this._wwCommand:t.isGlobalType()&&(o=this._command),o.set(r,t),t.keyMap&&(this.keyMapCommand[t.keyMap[u]]=r),t}},{key:"_initEvent",value:function(){var e=this;this.base.eventManager.listen("command",function(){e.exec.apply(e,arguments)}),this.base.eventManager.listen("keyMap",function(t){if(e._options.useCommandShortcut){var n=e.keyMapCommand[t.keyMap];n&&(t.data.preventDefault(),e.exec(n))}})}},{key:"exec",value:function(e){var t=void 0,n=void 0,i=this.base;if(t=this._command.get(e),t||(this.base.isMarkdownMode()?(t=this._mdCommand.get(e),i=this.base.mdEditor):(t=this._wwCommand.get(e),i=this.base.wwEditor)),t){for(var a,r=arguments.length,o=Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];o.unshift(i),n=(a=t).exec.apply(a,o)}return n}}]),e}();d.command=function(e,t){var n=l.default.factory(e,t.name,t.keyMap);return s.extend(n,t),n},e.exports=d},function(e,t){"use strict";var n=/\u200B/g,i=tui.util,a=function(e){return e&&e.nodeType===Node.TEXT_NODE},r=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},o=function(e){return r(e)?e.tagName:"TEXT"},l=function(e){var t=void 0;return r(e)?t=e.textContent.replace(n,"").length:a(e)&&(t=e.nodeValue.replace(n,"").length),t},s=function(e){var t=void 0;return r(e)?t=e.childNodes.length:a(e)&&(t=e.nodeValue.replace(n,"").length),t},c=function(e){var t=e.parentNode.childNodes,n=void 0,i=void 0,a=void 0;for(n=0,i=t.length;n<i;n+=1)if(t[n]===e){a=n;break}return a},u=function(e,t){var n=void 0;return a(e)?n=e:e.childNodes.length&&t>=0&&(n=e.childNodes[t]),n},d=function(e,t,n){for(var i=e+"Sibling",a=void 0,r=void 0;t&&!t[i]&&(a=o(t.parentNode),a!==n&&"BODY"!==a);)t=t.parentNode;return t[i]&&(r=t[i]),r},f=function(e,t,n){var i=void 0;return i=t>0?u(e,t-1):d("previous",e,n)},h=function(e,t){for(var n=void 0;e.parentNode&&!t(e.parentNode);)e=e.parentNode;return t(e.parentNode)&&(n=e),n},g=function(e,t){var n=void 0;return n=i.isString(t)?h(e,function(e){return t===o(e)}):h(e,function(e){return t===e})},v=function(e,t,n){var i=e+"Sibling",a=void 0;return t=g(t,n),t&&t[i]&&(a=t[i]),a},p=function(e,t){return v("previous",e,t)},m=function(e,t){return v("next",e,t)},y=function(e){return g(e,"BODY")},b=function(e){for(e=e.previousSibling||e.parentNode;!a(e)&&"BODY"!==o(e);)if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode;return"BODY"===o(e)&&(e=null),e},w=function(e,t,n){var a=[],r="",o=0,l=void 0;if(!t.length)return a;for(var s=t.shift(),c=document.createTreeWalker(e,4,null,!1);c.nextNode();){for(r=c.currentNode.nodeValue||"",n&&(r=n(r)),l=o+r.length;l>=s;){if(a.push({container:c.currentNode,offsetInContainer:s-o,offset:s}),!t.length)return a;s=t.shift()}o=l}do a.push({container:c.currentNode,offsetInContainer:r.length,offset:s}),s=t.shift();while(!i.isUndefined(s));return a},k=function(e){var t={};t.tagName=e.nodeName,e.id&&(t.id=e.id);var n=e.className.trim();return n&&(t.className=n),t},_=function(e,t){for(var n=[];e&&e!==t;)r(e)&&n.unshift(k(e)),e=e.parentNode;return n},C=function(e,t){var n=!0,i=null;return tui.util.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(n=!1),i=n?e.nextElementSibling:e.previousElementSibling)},E=function(e,t,n){var i=!0,a=null,r=void 0,l=void 0,s=void 0,u=void 0,d=void 0,f=void 0;return tui.util.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(i=!1),e?(r=$(e),i?(s=r.parent().next(),u=r.parents("thead"),d=u[0]&&u.next(),f=d&&"TBODY"===o(d[0]),l=0):(s=r.parent().prev(),u=r.parents("tbody"),d=u[0]&&u.prev(),f=d&&"THEAD"===o(d[0]),l=e.parentNode.childNodes.length-1),!tui.util.isUndefined(n)&&n||(l=c(e)),s[0]?a=s.children("td,th")[l]:u[0]&&f&&(a=d.find("td,th")[l]),a):null)};e.exports={getNodeName:o,isTextNode:a,isElemNode:r,getTextLength:l,getOffsetLength:s,getPrevOffsetNodeUntil:f,getNodeOffsetOfParent:c,getChildNodeByOffset:u,getTopPrevNodeUnder:p,getTopNextNodeUnder:m,getParentUntil:g,getTopBlockNode:y,getPrevTextNode:b,findOffsetNode:w,getPath:_,getNodeInfo:k,getTableCellByDirection:C,getSiblingRowCellByDirection:E}},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){var i=$(e),a=i.attr("colspan"),r=i.attr("rowspan"),o=e.nodeName;if("TH"!==o&&"TD"!==o)return null;var l={nodeName:e.nodeName,colspan:a?parseInt(a,10):1,rowspan:r?parseInt(r,10):1,content:i.html(),elementIndex:{rowIndex:t,colIndex:n}};return"TH"===e.nodeName&&e.align&&(l.align=e.align),l}function a(e,t,n,i){var a=t.colspan,r=t.rowspan,o=a>1,l=r>1,s=t.nodeName;if(o||l){var c=n+r,u=i+a;y.range(n,c).forEach(function(t){e[t]=e[t]||[],y.range(i,u).forEach(function(a){var r={nodeName:s};t===n&&a===i||(o&&(r.colMergeWith=i),l&&(r.rowMergeWith=n),e[t][a]=r)})})}}function r(e){var t=[];return e.find("tr").each(function(e,n){var r=0;t[e]=t[e]||[],$(n).children().each(function(n,o){var l=i(o,e,n);if(l){for(var s=n+r;t[e][s];)s+=1,r+=1;t[e][s]=l,a(t,l,e,s)}})}),e[0].className&&(t.className=e[0].className),t}function o(e){var t=[];return e.forEach(function(e,n){var i=[];e.forEach(function(e,t){y.isUndefined(e.colMergeWith)&&y.isUndefined(e.rowMergeWith)&&i.push({rowIndex:n,colIndex:t})}),t.push(i)}),t}function l(e){var t=e[0];return t.map(function(e){var n=void 0;return n=y.isExisty(e.colMergeWith)?t[e.colMergeWith].align:e.align})}function s(e,t){var n=l(e),i=t.map(function(t){return t.map(function(t){var i=t.rowIndex,a=t.colIndex;return y.extend({align:n[a]},e[i][a])})});return e.className&&(i.className=e.className),i}function c(e,t,n){return{nodeName:n||"TD",colspan:1,rowspan:1,content:b,elementIndex:{rowIndex:e,colIndex:t}}}function u(e){var t=e.closest("tr"),n=t.prevAll().length;return"TBODY"===t.parent()[0].nodeName&&(n+=1),n}function d(e){return e.closest("td, th").prevAll().length}function f(e,t){var n=u(t),i=d(t);return e[n][i]}function h(e,t,n){var i=e[t][n],a=t;return i.rowspan>1&&(a+=i.rowspan-1),a}function g(e,t,n){var i=e[t][n],a=n;return i.colspan>1&&(a+=i.colspan-1),a}function v(e,t,n){var i=e[t][n];return t=y.isExisty(i.rowMergeWith)?i.rowMergeWith:t,n=y.isExisty(i.colMergeWith)?i.colMergeWith:n,e[t][n].elementIndex}function p(e,t){e.forEach(function(e,n){var i=e.length,a=e[0].nodeName;y.range(i,t).forEach(function(t){e.push(c(n,t,a))})})}function m(e){var t=e[0],i=t.length,a=!0;if(!i&&e[1])y.range(0,e[1].length).forEach(function(e){t.push(c(0,e,"TH"))});else if("TH"!==e[0][0].nodeName){var r,o=y.range(0,i).map(function(e){return c(0,e,"TH")});(r=[]).concat.apply(r,n(e)).forEach(function(e){e.elementIndex&&(e.elementIndex.rowIndex+=1)}),e.unshift(o)}else if(1===e.length){var l=y.range(0,i).map(function(e){return c(1,e,"TD")});e.push(l)}else a=!1;return a}Object.defineProperty(t,"__esModule",{value:!0}),t.createTableData=r,t.createCellIndexData=o;var y=tui.util,b=tui.util.browser.msie?"":"<br>";t.default={createTableData:r,createCellIndexData:o,createRenderData:s,findElementRowIndex:u,findElementColIndex:d,findCellIndex:f,createBasicCell:c,findRowMergedLastIndex:h,findColMergedLastIndex:g,findElementIndex:v,stuffCellsIntoIncompleteRow:p,addTbodyOrTheadIfNeed:m}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var i=d.default.createCellIndexData(e),a=d.default.findCellIndex(i,t),r=d.default.findCellIndex(i,n),o=void 0,l=void 0,s=void 0,c=void 0;return a.rowIndex>r.rowIndex?(o=r.rowIndex,l=a.rowIndex):(o=a.rowIndex,l=r.rowIndex),a.colIndex>r.colIndex?(s=r.colIndex,c=a.colIndex):(s=a.colIndex,c=r.colIndex),{start:{rowIndex:o,colIndex:s},end:{rowIndex:l,colIndex:c}}}function r(e,t,n){var i=t[n].rowIndex,a=e[i];f.range(t.start.colIndex,t.end.colIndex+1).forEach(function(n){var r=a[n],o=r.rowMergeWith,l=-1;f.isExisty(o)?(o<t.start.rowIndex&&(t.start.rowIndex=o),l=o+e[o][n].rowspan-1):r.rowspan>1&&(l=i+r.rowspan-1),l>t.end.rowIndex&&(t.end.rowIndex=l)})}function o(e,t,n,i){var a=e[n],r=a[i],o=r.colMergeWith,l=-1;f.isExisty(o)?(o<t.start.colIndex&&(t.start.colIndex=o),l=o+a[o].colspan-1):r.colspan>1&&(l=i+r.colspan-1),l>t.end.colIndex&&(t.end.colIndex=l)}function l(e,t){for(var n="";n!==JSON.stringify(t);)n=JSON.stringify(t),r(e,t,"start"),r(e,t,"end"),f.range(t.start.rowIndex,t.end.rowIndex+1).forEach(function(n){o(e,t,n,t.start.colIndex),o(e,t,n,t.end.colIndex)});return t}function s(e,t,n){var i=a(e,t,n);return l(e,i)}function c(e,t,n){var i=d.default.createCellIndexData(e),a={};if(t.length){var r=d.default.findCellIndex(i,t.first()),o=f.extend({},r);t.each(function(t,n){var a=d.default.findCellIndex(i,$(n)),r=e[a.rowIndex][a.colIndex],l=a.rowIndex+r.rowspan-1,s=a.colIndex+r.colspan-1;o.rowIndex=Math.max(o.rowIndex,l),o.colIndex=Math.max(o.colIndex,s)}),a.start=r,a.end=o}else{var l=d.default.findCellIndex(i,n);a.start=l,a.end=f.extend({},l)}return a}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),d=i(u),f=tui.util;t.default={findSelectionRange:s,getTableSelectionRange:c}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.colspan>1?' colspan="'+e.colspan+'"':"";return t+=e.rowspan>1?' rowspan="'+e.rowspan+'"':"",t+=e.align?' align="'+e.align+'"':"","<"+e.nodeName+t+">"+e.content+"</"+e.nodeName+">"}function r(e,t){var n="";return e.length&&(n=e.map(function(e){var t=e.map(a).join("");return"<tr>"+t+"</tr>"}).join(""),n="<"+t+">"+n+"</"+t+">"),n}function o(e){var t=[e[0]],n=e.slice(1),i=r(t,"THEAD"),a=r(n,"TBODY"),o=e.className?' class="'+e.className+'"':"";return"<table"+o+">"+(i+a)+"</renderData>"}function l(e,t){var n=u.default.createCellIndexData(t),i=u.default.createRenderData(t,n),a=$(o(i));return e.replaceWith(a),a}function s(e,t,n){t.selectNodeContents(n),t.collapse(!0),e.setSelection(t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(3),u=i(c);t.default={createTableHtml:o,replaceTable:l,focusToCell:s}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=void 0,o="en_US",l=function(){function e(){n(this,e),this._code=o,this._langs=new a.Map}return i(e,[{key:"setCode",value:function(e){this._code=e}},{key:"setLang",value:function(e,t){var n=this;e=[].concat(e),e.forEach(function(e){if(n._langs.has(e)){var i=n._langs.get(e);n._langs.set(e,a.extend(i,t))}else n._langs.set(e,t)})}},{key:"get",value:function(e,t){t||(t=this._code);var n=this._langs.get(t);n||(n=this._langs.get(o));var i=n[e];if(!i)throw new Error('There is no text key "'+e+'" in '+t);return i}}],[{key:"getSharedInstance",value:function(){return r||(r=new e),r}}]),e}();t.I18n=l,t.default=l.getSharedInstance()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=function(){function e(){n(this,e),this.exts=new a.Map}return i(e,[{key:"defineExtension",value:function(e,t){this.exts.set(e,t)}},{key:"applyExtension",value:function(e,t){var n=this;t&&t.forEach(function(t){n.exts.has(t)&&n.exts.get(t)(e)})}}]),e}();e.exports=new r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=tui.util,o=window.hljs,l="tui-editor-custom-code-block",s=void 0,c=function(){function e(){n(this,e),this._elementReplacer=new r.Map}return a(e,[{key:"setElementReplacer",value:function(e,t){this._elementReplacer.set(e,t)}},{key:"createCodeBlockHtml",value:function(e,t){var n=this._elementReplacer.get(e),a=l,r=void 0;return n?(t=encodeURIComponent(t).replace(/(%0A)+$/,""),r='<pre class="'+a+'" data-language="'+e+'" data-code-text="'+t+'">'+e+"</pre>"):r=o.getLanguage(e)?o.highlight(e,t).value:i(t,!1),r}},{key:"_getViewMode",value:function(e,t){var n=void 0;return n=e?"viewOnly":t?"wysiwyg":"preview"}},{key:"_replaceElement",value:function(e,t,n,i){var a=$(t),r=a.data("language"),o=t.parentNode,s=a.data("code-text"),c=$(n({id:i,containerElement:e,codeBlockElement:t,type:r,codeText:decodeURIComponent(s)}));c.length?(t!==c[0]&&o===t.parentNode&&a.replaceWith(c),c[0].id=i,c.data("language",r),c.addClass(l),tui.util.isEmpty(c.data("code-text"))&&c.data("code-text",s)):t.id=i}},{key:"replaceElements",value:function(e,t,n){var i=this,a=e.find("."+l),r=e[0],o=this._getViewMode(t,n),s=$.proxy(this._replaceElement,this),c=(new Date).getTime();a.each(function(e,t){var n=l+"-"+c+"-"+e,a=i._elementReplacer.get($(t).data("language")),u=a?a[o]:null;u?s(r,t,u,n):t.id=n})}},{key:"_restoreElement",value:function(e){var t=$(e),n=t.data("language"),a=decodeURIComponent(t.data("code-text")),r=$('<pre data-language="'+n+'" class="lang-'+n+'"></pre>');a&&r.html("<div>"+i(a,!1).replace(/\n/g,"<br>")+"</div>"),t.replaceWith(r)}},{key:"restoreElements",value:function(e){var t=e.find("."+l),n=$.proxy(this._restoreElement,this);t.each(function(e,t){n(t)})}},{key:"updateCodeTextById",value:function(e,t,n){var i=$(e).find("#"+t);i.data("code-text",encodeURIComponent(n))}}],[{key:"getSharedInstance",value:function(){return s||(s=new e),s}}]),e}();t.CodeBlockManager=c,t.default=c.getSharedInstance()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e=l.extend({},e),o.default.call(this,{tagName:"div",className:s+"wrapper",rootElement:e.$el}),e=l.extend({},e),this._setId(),this._initTarget(e),this._initExternalPopupHtmlIfNeed(e),this._initCloserOpener(e),this._initContent(e),this._initTitle(e),this._initClassName(e),this._initCssStyles(e)}var r=n(10),o=i(r),l=tui.util,s="tui-popup-",c=0,u=['<div class="'+s+'header">','<span class="'+s+'title"></span>','<button type="button" class="'+s+'close-button">x</button>',"</div>",'<div class="'+s+'body"></div>'].join("");a.prototype=l.extend({},o.default.prototype),a.prototype._initTarget=function(e){this.$target=e.$target||$("body")},a.prototype._initExternalPopupHtmlIfNeed=function(e){e.$el&&(this.$el=e.$el,this._isExternalHtmlUse=!0)},a.prototype._initCloserOpener=function(e){this.openerCssQuery=e.openerCssQuery,this.closerCssQuery=e.closerCssQuery},a.prototype._initContent=function(e){e.content?this.$content=$(e.content):e.textContent&&(this.$content=e.textContent)},a.prototype._initTitle=function(e){this.title=e.title},a.prototype._initClassName=function(e){e.className&&(this.className=e.className)},a.prototype.render=function(){this._renderLayout(),this._renderTitle(),this._renderContent(),this._attachPopupEvent()},a.prototype._renderLayout=function(){this._isExternalHtmlUse?(this.hide(),this.$target&&this.$target.append(this.$el)):(this.$el.html(u),this.$el.addClass(this.className),this.hide(),this.$target.append(this.$el),this.$body=this.$el.find(this._getFullClassName("body")),this.title===!1&&this.$el.find(this._getFullClassName("header")).remove())},a.prototype._renderContent=function(){this._isExternalHtmlUse||this.setContent(this.$content)},a.prototype._renderTitle=function(){this._isExternalHtmlUse||this.title===!1||this.setTitle(this.title)},a.prototype._getFullClassName=function(e){return"."+s+e},a.prototype._attachOpenerCloserEvent=function(){var e=this;this.openerCssQuery&&$(this.openerCssQuery).on("click."+this._getId(),function(){e.show()}),this.closerCssQuery&&$(this.closerCssQuery).on("click."+this._getId(),function(){e.hide()})},a.prototype._detachOpenerCloserEvent=function(){this.openerCssQuery&&$(this.openerCssQuery).off("."+this._getId()),this.closerCssQuery&&$(this.closerCssQuery).off("."+this._getId())},a.prototype._attachPopupControlEvent=function(){var e=this;this.on("click "+this._getFullClassName("close-button"),function(){e.hide()})},a.prototype._detachPopupEvent=function(){this.off(),this._detachOpenerCloserEvent()},a.prototype._attachPopupEvent=function(){this._attachPopupControlEvent(),this._attachOpenerCloserEvent()},a.prototype._setId=function(){this._id=c,c+=1},a.prototype._getId=function(){return this._id},a.prototype.setContent=function(e){this.$body.empty(),this.$body.append(e)},a.prototype.setTitle=function(e){var t=this.$el.find(this._getFullClassName("title"));t.empty(),t.append(e)},a.prototype.hide=function(){this.$el.css("display","none"),this._isShow=!1,this.trigger("hidden",this)},a.prototype.show=function(){this.$el.css("display","block"),this._isShow=!0,this.trigger("shown",this)},a.prototype.isShow=function(){return this._isShow},a.prototype.remove=function(){this.trigger("remove",this),this._detachPopupEvent(),this.$el.empty(),this.$el.remove()},a.prototype.css=function(){var e;(e=this.$el).css.apply(e,arguments)},a.prototype._initCssStyles=function(e){e.css&&this.css(e.css)},a.factory=function(e){var t=new a(e);return t.render(),t},a.CLASS_PREFIX=s,e.exports=a},function(e,t){"use strict";function n(e){e=i.extend({tagName:"div"},e||{}),this.tagName=e.tagName,this.className=e.className,this.$el=null,this._initID(),this.setRootElement(e.rootElement)}var i=tui.util,a=0;n.prototype.on=function(e,t){var n=this;i.isObject(e)?i.forEach(e,function(e,t){n._addEvent(t,e)}):this._addEvent(e,t)},n.prototype._addEvent=function(e,t){var n=this._parseEventType(e),i=n[0],a=n[1];a?this.$el.on(i,a,t):this.$el.on(i,t)},n.prototype.off=function(e,t){if(e){var n=this._parseEventType(e),i=n[0],a=n[1];a?this.$el.off(i,a,t):this.$el.off(i,t)}else this.$el.off()},n.prototype._parseEventType=function(e){var t=e.split(" "),n=t.shift(),i=t.join(" ");return[n,i]},n.prototype.attachEvents=function(e){var t=this,n=e||this.events,a=void 0;n&&i.forEach(n,function(e,n){if(!t[e])throw new Error("UIController#attachEvents: "+e+"란 메서드가 없습니다.");n=t.getEventNameWithNamespace(n),a=i.bind(t[e],t),t.on(n,a)})},n.prototype.detachEvents=function(){this.$el.off(".uicEvent"+this.id)},n.prototype.setRootElement=function(e){var t=this.className,n=this.tagName;e||(t=t||"uic"+this.id,e=$("<"+n+' class="'+t+'"/>')),this.$el=e},n.prototype.trigger=function(){var e;(e=this.$el).trigger.apply(e,arguments)},n.prototype._initID=function(){this.id=a,a+=1},n.prototype.getEventNameWithNamespace=function(e){var t=e.split(" ");return t[0]+=".uicEvent"+this.id,t.join(" ")},n.prototype.addUIC=function(e,t){t?this.$el.find(t).append(e.$el):this.$el.append(e.$el)},n.prototype.remove=function(){this.detachEvents(),this.$el.remove()},n.prototype.destroy=function(){var e=this;this.remove(),this.detachEvents(),i.forEachOwnProperties(this,function(t,n){e[n]=null})},n.extend=function(e){var t=i.defineClass(this,e);return t.extend=n.extend,t},e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(13),l=i(o),s=n(47),c=i(s),u=n(43),d=i(u),f=n(44),h=i(f),g=n(42),v=i(g),p=n(46),m=i(p),y=n(45),b=i(y),w=n(8),k=i(w),_=window.markdownit,C=window.toMark,E=_({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-",highlight:function(e,t){return k.default.createCodeBlockHtml(t,e)}}),T=_({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-"});E.block.ruler.at("table",m.default,["paragraph","reference"]),E.block.ruler.at("code",h.default),E.block.ruler.at("blockquote",v.default,["paragraph","reference","list"]),E.block.ruler.at("html_block",b.default,["paragraph","reference","blockquote"]),E.use(c.default),E.use(d.default),T.block.ruler.at("table",m.default,["paragraph","reference"]),T.block.ruler.at("code",h.default),T.block.ruler.at("blockquote",v.default,["paragraph","reference","list"]),T.block.ruler.at("html_block",b.default,["paragraph","reference","blockquote"]),T.use(c.default),T.use(d.default);var M=function(){function e(t){a(this,e),this.eventManager=t}return r(e,[{key:"_markdownToHtmlWithCodeHighlight",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=E.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_markdownToHtml",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=T.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_removeBrToMarkPassAttributeInCode",value:function(e){var t=$("<div />");return t.html(e),t.find("code, pre").each(function(e,t){var n=$(t);n.html(n.html().replace(/&lt;br data-tomark-pass&gt;/,"&lt;br&gt;"))}),e=t.html()}},{key:"toHTMLWithCodeHightlight",value:function(e){var t=this._markdownToHtmlWithCodeHighlight(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"toHTML",value:function(e){var t=this._markdownToHtml(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"initHtmlSanitizer",value:function(){this.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return(0,l.default)(e,!0)})}},{key:"toMarkdown",value:function(e,t){var n=[];e=this.eventManager.emitReduce("convertorBeforeHtmlToMarkdownConverted",e);var i=C(this._appendAttributeForBrIfNeed(e),t);return i=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",i),tui.util.forEach(i.split("\n"),function(e,t){var i=/^\|[^|]*\|/gi,a=/`[^`]*<br>[^`]*`/gi;a.test(e)||i.test(e)||(e=e.replace(/<br>/gi,"<br>\n")),n[t]=e}),n.join("\n")}},{key:"_appendAttributeForBrIfNeed",value:function(e){var t=/<br>/gi,n=/<br \/><br \/>/gi,i=/<br data-tomark-pass \/><br \/>(.)/gi,a=/([^>]|<\/b>|<\/i>|<\/s>|<img [^>]*>)/,r=/<br data-tomark-pass \/><br data-tomark-pass \/>/,o=new RegExp(a.source+r.source,"g");e=e.replace(t,"<br />"),e=e.replace(n,"<br data-tomark-pass /><br data-tomark-pass />");var l=document.createElement("div"),s=$(l);return s.html(e),s.find("pre br,code br").each(function(e,t){t.hasAttribute("data-tomark-pass")&&t.removeAttribute("data-tomark-pass")}),e=s.html().replace(/<br data-tomark-pass="">/gi,"<br data-tomark-pass />"),e=e.replace(t,"<br />"),e=e.replace(i,"<br data-tomark-pass /><br data-tomark-pass />$1"),e=e.replace(o,"$1<br /><br />")}}],[{key:"factory",value:function(t){return new e(t)}},{key:"getMarkdownHighlightRenderer",value:function(){return E}}]),e}();e.exports=M},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=["previewBeforeHook","previewRenderAfter","previewNeedsRefresh","addImageBlobHook","setMarkdownAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeModeBefore","changeMode","changePreviewStyle","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","closeAllPopup","command","addCommandBefore","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorBeforeHtmlToMarkdownConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","replaceCodeBlockElementsBefore","pasteBefore","scroll","click","mousedown","mouseover","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","copy","copyBefore","copyAfter","cut","cutAfter","drop","show","hide"],o=function(){function e(){n(this,e),this.events=new a.Map,this.TYPE=new a.Enum(r)}return i(e,[{key:"listen",value:function(e,t){var n=this._getTypeInfo(e),i=this.events.get(n.type)||[];if(!this._hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),i.push(t),this.events.set(n.type,i)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=this._getTypeInfo(i),o=this.events.get(r.type),l=void 0;return o&&a.forEach(o,function(e){var n=e.apply(void 0,t);a.isUndefined(n)||(l=l||[],l.push(n))}),l}},{key:"emitReduce",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=this.events.get(i);return r&&a.forEach(r,function(e){var n=e.apply(void 0,t);a.isFalsy(n)||(t[0]=n)}),t[0]}},{key:"_getTypeInfo",value:function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}}},{key:"_hasEventType",value:function(e){return!a.isUndefined(this.TYPE[this._getTypeInfo(e).type])}},{key:"addEventType",value:function(e){if(this._hasEventType(e))throw new Error("There is already have event type "+e);this.TYPE.set(e)}},{key:"removeEventHandler",value:function(e){var t=this,n=this._getTypeInfo(e),i=n.type,a=n.namespace;i&&!a?this.events.delete(i):!i&&a?this.events.forEach(function(e,n){t._removeEventHandlerWithTypeInfo(n,a)}):i&&a&&this._removeEventHandlerWithTypeInfo(i,a)}},{key:"_removeEventHandlerWithTypeInfo",value:function(e,t){var n=[],i=this.events.get(e);i&&(i.map(function(e){e.namespace!==t&&n.push(e)}),this.events.set(e,n))}}]),e}();e.exports=o},function(e,t){"use strict";function n(e,t){var n=$("<div />");return e=e.replace(/<!--[\s\S]*?-->/g,""),n.append(e),i(n),a(n),r(n,t)}function i(e){e.find("script, iframe, textarea, form, button, select, meta, style, link, title").remove()}function a(e){e.find("*").each(function(e,t){var n=o.toArray(t.attributes).filter(function(e){var t=e.name.match(l),n=e.name.match(s);return!t&&!n});o.forEachArray(n,function(e){t.attributes.removeNamedItem(e.name)})})}function r(e,t){var n=void 0;if(t)n=e[0].innerHTML;else{for(var i=document.createDocumentFragment(),a=tui.util.toArray(e[0].childNodes),r=a.length,o=0;o<r;o+=1)i.appendChild(a[o]);n=i}return n}var o=tui.util,l=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),s=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g");e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(41),l=i(o),s=n(8),c=i(s),u=function(){function e(t,n,i,r){a(this,e),this.eventManager=n,this.convertor=i,this.$el=t,this.isViewOnly=!!r,this._initContentSection(),this.lazyRunner=new l.default,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,800,this),this._initEvent()}return r(e,[{key:"_initEvent",value:function(){var e=this,t="";this.eventManager.listen("contentChangedFromMarkdown",function(n){t=n.getValue(),e.isVisible()&&e.lazyRunner.run("refresh",n.getValue().replace(/<br>\n/g,"<br>"))}),this.eventManager.listen("previewNeedsRefresh",function(n){e.refresh(n||t)}),this.$el.on("scroll",function(t){e.eventManager.emit("scroll",{source:"preview",data:t})})}},{key:"_initContentSection",value:function(){this.$previewContent=$('<div class="tui-editor-contents" />'),this.$el.append(this.$previewContent)}},{key:"refresh",
value:function(e){this.render(this.convertor.toHTMLWithCodeHightlight(e))}},{key:"render",value:function(e){var t=e,n=this.eventManager.emit("previewBeforeHook",e);n&&(t=n[0]),this.$previewContent.empty(),this.$previewContent.html(t),this.eventManager.emit("replaceCodeBlockElementsBefore"),c.default.replaceElements(this.$previewContent,this.isViewOnly),this.eventManager.emit("previewRenderAfter",this)}},{key:"setHeight",value:function(e){this.$el.height(e)}},{key:"isVisible",value:function(){return"none"!==this.$el.css("display")}}]),e}();e.exports=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n="<br />",i="<"+t+">"+n+"</"+t+">",a="",r=0;r<e;r+=1)a+=i;return a}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),s=i(l),c=tui.util,u=c.browser.msie&&10===c.browser.version,d="te-content-table-",f=c.browser.msie&&(10===c.browser.version||11===c.browser.version),h=c.browser.msie?"":"<br>",g="te-cell-selected",v=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="table",this._lastCellNode=null,this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.tableID=0}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter.table",function(){var t=e.wwe.getEditor().getSelection(),n=e.isInTable(t);if(e._unwrapBlockInTable(),e._completeTableIfNeed(),!n){var i=e.wwe.componentManager.getManager("tableSelection");i.removeClassAttrbuteFromAllCellsIfNeed()}e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygSetValueAfter.table",function(){e._unwrapBlockInTable(),e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygProcessHTMLText.table",function(e){return e.replace(/<br \/>(<\/td>|<\/th>)/g,"$1")}),this.eventManager.listen("cut.table",function(){var t=e.wwe.componentManager.getManager("tableSelection"),n=t.getSelectedCells();n.length&&n.get().forEach(function(e){return $(e).html(h)}),t.removeClassAttrbuteFromAllCellsIfNeed()}),this.eventManager.listen("copyBefore.table",function(t){var n=t.$clipboardContainer;return e.updateTableHtmlOfClipboardIfNeed(n)}),this.onBindedPaste=this._onPaste.bind(this),this.wwe.getEditor().addEventListener("paste",this.onBindedPaste)}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this,n=this.wwe.componentManager.getManager("tableSelection"),i=n.getSelectedCells();if(i.length){n.createRangeBySelectedCells();var a=this.wwe.getEditor().getSelection().cloneContents();$(a).children().each(function(e,n){var i=$(n);t.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===i.find("thead").length&&0===i.find("tbody").length?i.remove():n.previousSibling&&"TABLE"===n.previousSibling.nodeName?n.previousSibling.appendChild(n):(t._completeIncompleteTable(n),"TABLE"!==n.nodeName&&"THEAD"!==n.nodeName&&$(n).closest("table").find("thead").remove()))}),e.append(a),e.find("."+g).removeClass(g)}}},{key:"pasteClipboardData",value:function(e){this.wwe.componentManager.getManager("tableSelection").getSelectedCells().length||(this._expandTableIfNeed(e),this._pasteDataIntoTable(e))}},{key:"_onPaste",value:function(e){var t=this.wwe.getEditor().getSelection(),n=!s.default.isTextNode(t.commonAncestorContainer);this.isInTable(t)&&!t.collapsed&&n&&e.preventDefault()}},{key:"_initKeyHandler",value:function(){var e=this;this.keyEventHandlers={DEFAULT:function(t,n,i){var a=e.isInTable(n);a&&!e._isSingleModifierKey(i)?(e._recordUndoStateIfNeed(n),e._removeBRIfNeed(n),e._removeContentsAndChangeSelectionIfNeed(n,i,t)):!a&&e._lastCellNode&&e._recordUndoStateAndResetCellNode(n),a&&!e._isModifierKeyPushed(t)&&e.wwe.getEditor().modifyDocument(function(){var t=e.wwe.componentManager.getManager("tableSelection");t.removeClassAttrbuteFromAllCellsIfNeed()})},ENTER:function(t,n){var i=void 0;return e._isAfterTable(n)?(t.preventDefault(),n.setStart(n.startContainer,n.startOffset-1),e.wwe.breakToNewDefaultBlock(n),i=!1):e._isBeforeTable(n)?(t.preventDefault(),e.wwe.breakToNewDefaultBlock(n,"before"),i=!1):e.isInTable(n)&&(e._appendBrIfTdOrThNotHaveAsLastChild(n),i=!1),i},BACK_SPACE:function(t,n,i){return e._handleBackspaceAndDeleteKeyEvent(t,n,i)},DELETE:function(t,n,i){return e._handleBackspaceAndDeleteKeyEvent(t,n,i)},TAB:function(){return e._moveCursorTo("next","cell")},"SHIFT+TAB":function(t){return e._moveCursorTo("previous","cell",t)},UP:function(t){return e._moveCursorTo("previous","row",t)},DOWN:function(t){return e._moveCursorTo("next","row",t)}},c.forEach(this.keyEventHandlers,function(t,n){return e.wwe.addKeyEventHandler(n,t)})}},{key:"isInTable",value:function(e){var t=void 0,n=void 0;return e.collapsed?(t=e.startContainer,n=!!$(t).closest("table").length):(t=e.commonAncestorContainer,n=!!$(t).closest("table").length||!!$(e.cloneContents()).find("table").length),n}},{key:"_isBeforeTable",value:function(e){return"TABLE"===s.default.getNodeName(s.default.getChildNodeByOffset(e.startContainer,e.startOffset))}},{key:"_isAfterTable",value:function(e){var t=s.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset);return"TABLE"===s.default.getNodeName(t)&&e.commonAncestorContainer===this.wwe.get$Body()[0]}},{key:"_handleBackspaceAndDeleteKeyEvent",value:function(e,t,n){var i="BACK_SPACE"===n,a=3!==t.commonAncestorContainer.nodeType&&t.commonAncestorContainer!==this.wwe.get$Body()[0],r=void 0;if(t.collapsed){if(this.isInTable(t))i?this._tableHandlerOnBackspace(t,e):this._tableHandlerOnDelete(t,e),this._insertBRIfNeed(t),this._removeContentsAndChangeSelectionIfNeed(t,n,e),r=!1;else if(!i&&this._isBeforeTable(t)||i&&this._isAfterTable(t)){e.preventDefault();var o=i?t.startOffset-1:t.startOffset;this._removeTable(t,s.default.getChildNodeByOffset(t.startContainer,o)),r=!1}}else this.isInTable(t)&&a&&(e.preventDefault(),this._removeContentsAndChangeSelectionIfNeed(t,n,e),r=!1);return r}},{key:"_tableHandlerOnBackspace",value:function(e,t){var n=s.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset,"TR"),i=s.default.getNodeName(n);n&&"TD"!==i&&"TH"!==i?"BR"===i&&1!==n.parentNode.childNodes.length&&(t.preventDefault(),$(n).remove()):t.preventDefault()}},{key:"isNonTextDeleting",value:function(e){var t=e.startContainer,n=t.nextSibling,i=s.default.getNodeName(n),a=s.default.getNodeName(t),r=a===i&&"TEXT"!==a,o=(!n||"BR"===i&&n.parentNode.lastChild===n)&&s.default.isTextNode(t)&&e.startOffset===t.nodeValue.length,l=!o&&$(t).parents("tr").children().last()[0]===t&&("TD"===a||"TH"===a);return r||o||l}},{key:"_tableHandlerOnDelete",value:function(e,t){var n=this.isNonTextDeleting(e);n&&(t.preventDefault(),e.startContainer.normalize())}},{key:"_appendBrIfTdOrThNotHaveAsLastChild",value:function(e){var t=s.default.getNodeName(e.startContainer),n=void 0;if("TD"===t||"TH"===t)n=e.startContainer;else{var i=$(e.startContainer).parentsUntil("tr");n=i[i.length-1]}"BR"===s.default.getNodeName(n.lastChild)||"DIV"===s.default.getNodeName(n.lastChild)||f||$(n).append($("<br />")[0])}},{key:"_unwrapBlockInTable",value:function(){this.wwe.get$Body().find("td div,th div,tr>br,td>br,th>br").each(function(e,t){if("BR"===s.default.getNodeName(t)){var n=s.default.getNodeName(t.parentNode),i=/TD|TH/.test(n),a=0===t.parentNode.textContent.length,r=t.parentNode.lastChild===t;("TR"===n||i&&!a&&r)&&$(t).remove()}else $(t).children().unwrap()})}},{key:"_insertDefaultBlockBetweenTable",value:function(){this.wwe.get$Body().find("table").each(function(e,t){t.nextElementSibling&&"TABLE"===t.nextElementSibling.nodeName&&$("<div><br /></div>").insertAfter(t)})}},{key:"_removeTable",value:function(e,t){"TABLE"===t.tagName&&(this.wwe.getEditor().saveUndoState(e),this.wwe.saveSelection(e),$(t).remove(),this.wwe.restoreSavedSelection())}},{key:"_recordUndoStateIfNeed",value:function(e){var t=s.default.getParentUntil(e.startContainer,"TR");e.collapsed&&t&&this._lastCellNode!==t&&(this.wwe.getEditor().saveUndoState(e),this._lastCellNode=t)}},{key:"_recordUndoStateAndResetCellNode",value:function(e){this.wwe.getEditor().saveUndoState(e),this.resetLastCellNode()}},{key:"_pasteDataIntoTable",value:function(e){var t=this.wwe.getEditor().getSelection(),n=this._getTableDataFromTable(e),i=t.startContainer,a=i.parentNode,r="TD"===a.tagName||"TH"===a.tagName,o="TD"===i.tagName||"TH"===i.tagName,l=3===i.nodeType,c=u?"":"<br />",d=void 0,f=void 0,h=void 0,g=void 0;for(d=l&&r?a:o?i:$(i).find("th,td")[0],f=d;n.length;){for(h=n.shift();f&&h.length;)g=h.shift(),g.length?f.textContent=g:f.innerHTML=c,f=s.default.getTableCellByDirection(f,"next");f=s.default.getSiblingRowCellByDirection(d,"next",!1),d=f}}},{key:"_getTableDataFromTable",value:function(e){var t=$(e),n=[],i=t.find("tr");return i.each(function(e,t){var i=[],a=$(t).children();a.each(function(e,t){i.push(t.textContent)}),i.length&&n.push(i)}),n}},{key:"_removeTableContents",value:function(e){this.wwe.getEditor().saveUndoState(),e.each(function(e,t){var n=u?"":"<br />";$(t).html(n)})}},{key:"wrapDanglingTableCellsIntoTrIfNeed",value:function(e){var t=e.children("td,th"),n=void 0;if(t.length){var i=$("<tr></tr>");t.each(function(e,t){i.append(t)}),n=i[0]}return n}},{key:"wrapTrsIntoTbodyIfNeed",value:function(e){var t=e.children("tr"),n=t.find("th"),i=void 0;if(n.length&&n.each(function(e,t){var n=$(t),i=$("<td></td>");i.html(n.html()),i.insertBefore(t),n.detach()}),t.length){var a=$("<tbody></tbody>");t.each(function(e,t){a.append(t)}),i=a[0]}return i}},{key:"wrapTheadAndTbodyIntoTableIfNeed",value:function(e){var t=e.children("thead"),n=e.children("tbody"),i=$("<table></table>"),a=void 0;return!n.length&&t.length?(i.append(t[0]),i.append("<tbody><tr></tr></tbody>"),a=i[0]):n.length&&!t.length?(i.append("<thead><tr></tr></thead>"),i.append(n[0]),a=i[0]):n.length&&t.length&&(i.append(t[0]),i.append(n[0]),a=i[0]),a}},{key:"isTableOrSubTableElement",value:function(e){return"TABLE"===e||"TBODY"===e||"THEAD"===e||"TR"===e||"TD"===e}},{key:"_stuffTableCellsIntoIncompleteRow",value:function(e,t){e.each(function(e,n){for(var i=$(n),a=i.find("th,td"),o=s.default.getNodeName(i.parent()[0]),l="THEAD"===o?"th":"td",c=a.length;c<t;c+=1)i.append($(r(1,l))[0])})}},{key:"prepareToTableCellStuffing",value:function(e){var t=e.eq(0).find("th,td").length,n=!1;return e.each(function(e,i){var a=$(i).find("th,td").length;t!==a&&(n=!0,t<a&&(t=a))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"_addTbodyOrTheadIfNeed",value:function(e){var t=!e.find("thead").length,n=!e.find("tbody").length,i=void 0;t?(i=$("<thead><tr></tr></thead>")[0],e.prepend(i)):n&&(i=$("<tbody><tr></tr></tbody>")[0],e.append(i))}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=$(e);this._addTbodyOrTheadIfNeed(t),this._addTrIntoContainerIfNeed(t);var n=t.find("tr"),i=this.prepareToTableCellStuffing(n),a=i.maximumCellLength,r=i.needTableCellStuffingAid;r&&this._stuffTableCellsIntoIncompleteRow(n,a)}},{key:"_generateTheadAndTbodyFromTbody",value:function(e){var t=$("<tr></tr>"),n=$("<thead></thead>");return t.append(r($(e).find("tr").eq(0).find("td").length,"th")),n.append(t),{thead:n[0],tbody:e}}},{key:"_generateTheadAndTbodyFromThead",value:function(e){var t=$("<tr></tr>"),n=$("<tbody></tbody>");return t.append(r($(e).find("th").length,"td")),n.append(t),{thead:e,tbody:n[0]}}},{key:"_generateTheadAndTbodyFromTr",value:function(e){var t=$(e),n=$("<thead></thead>"),i=$("<tbody></tbody>"),a=void 0,o=void 0;return"TH"===t.children()[0].tagName?(a=e,o=$("<tr>"+r(t.find("th").length,"td")+"</tr>")[0]):(a=$("<tr>"+r(t.find("td").length,"th")+"</tr>")[0],o=e),n.append(a),i.append(o),{thead:n[0],tbody:i[0]}}},{key:"_completeIncompleteTable",value:function(e,t){var n=e.tagName,i=void 0,a=void 0;t=!!c.isUndefined(t)||t,"TABLE"===n?i=e:(i=$("<table></table>"),i.insertAfter(e),"TBODY"===n?a=this._generateTheadAndTbodyFromTbody(e):"THEAD"===n?a=this._generateTheadAndTbodyFromThead(e):"TR"===n&&(a=this._generateTheadAndTbodyFromTr(e)),t&&i.append(a.thead),i.append(a.tbody)),this.tableCellAppendAidForTableElement(i)}},{key:"_completeTableIfNeed",value:function(){var e=this,t=this.wwe.getEditor().get$Body();t.children().each(function(t,n){var i=$(n);e.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===i.find("thead").length&&0===i.find("tbody").length&&i.remove(),e._completeIncompleteTable(n))})}},{key:"resetLastCellNode",value:function(){this._lastCellNode=null}},{key:"setLastCellNode",value:function(e){this._lastCellNode=e}},{key:"_isSingleModifierKey",value:function(e){return"META"===e||"SHIFT"===e||"ALT"===e||"CONTROL"===e}},{key:"_isModifierKeyPushed",value:function(e){return e.metaKey||e.ctrlKey||e.altKey||e.shiftKey}},{key:"_addTrIntoContainerIfNeed",value:function(e){var t=e.children();t.each(function(e,t){var n=0===$(t).find("tr").length;n&&$(t).append($("<tr></tr>")[0])})}},{key:"_expandTableIfNeed",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=$(t.startContainer).parents("table"),i=this._getColumnAndRowDifference(e,t);i.column<0&&this._appendCellForAllRow(n,i.column),i.row<0&&this._appendRow(n,i.row)}},{key:"_getColumnAndRowDifference",value:function(e,t){var n=this._getTableDataFromTable(e),i=n.length,a=n[0].length,r=$(t.startContainer).closest("th,td"),o=r.parent(),l=s.default.getNodeOffsetOfParent(r[0]),c=s.default.getNodeOffsetOfParent(r[0].parentNode),u=o.parents("table"),d=u.find("tr").eq(0).children().length,f=u.find("tr").length,h=o.parents("tbody").length;return h&&(c+=1),{row:f-(c+i),column:d-(l+a)}}},{key:"_appendCellForAllRow",value:function(e,t){var n=u?"":"<br />";e.find("tr").each(function(e,i){for(var a=void 0,r=t;r<0;r+=1)a=0===e?"th":"td",$(i).append($("<"+a+">"+n+"</"+a+">")[0])})}},{key:"_appendRow",value:function(e,t){var n=e.find("tr").last().clone(),i=u?"":"<br />";for(n.find("td").html(i);t<0;t+=1)e.find("tbody").append(n.clone()[0])}},{key:"_getSiblingTextNodeByDirection",value:function(e,t){var n=e.previousSibling&&"BR"===e.previousSibling.nodeName&&e.previousSibling.previousSibling&&3===e.previousSibling.previousSibling.nodeType,i=e.nextSibling&&"BR"===e.nextSibling.nodeName&&e.nextSibling.nextSibling&&3===e.nextSibling.nextSibling.nodeType,a=void 0;return t&&i?a=e.nextSibling.nextSibling:!t&&n&&(a=e.previousSibling.previousSibling),a}},{key:"_changeSelectionToTargetCell",value:function(e,t,n,i){var a=t.startContainer,r="next"===n,o="row"===i,l=void 0,c=void 0;if(o){if(s.default.isTextNode(a)&&(l=this._getSiblingTextNodeByDirection(a,r)))return c=l.length<t.startOffset?l.length:t.startOffset,t.setStart(l,c),void t.collapse(!0);l=s.default.getSiblingRowCellByDirection(e,n,!1)}else l=s.default.getTableCellByDirection(e,n),l||(l=s.default.getSiblingRowCellByDirection(e,n,!0));l?(t.setStart(l,0),t.collapse(!0)):(l=$(e).parents("table")[0],r?t.setStart(l.nextElementSibling,0):l.previousElementSibling&&"TABLE"!==l.previousElementSibling.nodeName?t.setStart(l.previousElementSibling,1):t.setStartBefore(l),t.collapse(!0))}},{key:"_moveCursorTo",value:function(e,t,n){var i=this.wwe.getEditor(),a=i.getSelection().cloneRange(),r=$(a.startContainer).closest("td,th")[0],o=void 0;return a.collapsed&&this.isInTable(a)&&r&&("previous"!==e&&"row"!==t||c.isUndefined(n)||n.preventDefault(),this._changeSelectionToTargetCell(r,a,e,t),i.setSelection(a),o=!1),o}},{key:"_removeContentsAndChangeSelectionIfNeed",value:function(e,t,n){var i=t.length<=1,a="BACK_SPACE"===t||"DELETE"===t,r=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),o=r.first()[0];(i||a)&&!this._isModifierKeyPushed(n)&&r.length&&(a&&this._recordUndoStateIfNeed(e),this._removeTableContents(r),this._lastCellNode=o,e.setStart(o,0),e.collapse(!0),this.wwe.getEditor().setSelection(e))}},{key:"getTableIDClassName",value:function(){var e=d+this.tableID;return this.tableID+=1,e}},{key:"_removeBRIfNeed",value:function(e){var t=s.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer,i=s.default.getNodeName(n);/td|th/i.test(i)&&e.collapsed&&1===n.textContent.length&&$(n).find("br").remove()}},{key:"_insertBRIfNeed",value:function(e){var t=s.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer,i=s.default.getNodeName(n),a=$(n);!/td|th/i.test(i)||!e.collapsed||n.textContent.length||a.children().length||f||(n.normalize(),a.append("<br>"))}},{key:"destroy",value:function(){var e=this;this.eventManager.removeEventHandler("wysiwygRangeChangeAfter.table"),this.eventManager.removeEventHandler("wysiwygSetValueAfter.table"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.table"),this.eventManager.removeEventHandler("cut.table"),this.eventManager.removeEventHandler("copyBefore.table"),this.wwe.getEditor().removeEventListener("paste",this.onBindedPaste),c.forEach(this.keyEventHandlers,function(t,n){return e.wwe.removeKeyEventHandler(n,t)})}}]),e}();e.exports=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s="te-cell-selected",c=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="tableSelection",this._init()}return r(e,[{key:"_init",value:function(){this._initEvent(),tui.util.browser.firefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))}},{key:"_initEvent",value:function(){var e=this,t=void 0,n=void 0,i=void 0;this._tableSelectionTimer=null,this._removeSelectionTimer=null,this._isSelectionStarted=!1;var a=function(a){n=$(a.data.target).closest("td,th")[0];var r=e.wwe.getEditor().getSelection(),o=$(n).parents("table")[0],l=t===n,c=e._isTextSelect(r,l)&&!$(t).hasClass(s);e._isSelectionStarted&&o&&!c&&(window.getSelection().removeAllRanges(),tui.util.browser.firefox&&!e._removeSelectionTimer&&(e._removeSelectionTimer=setInterval(function(){window.getSelection().removeAllRanges()},10)),e.highlightTableCellsBy(t,n),i=n)},r=function(){e._isSelectionStarted&&(e._isSelectionStarted=!1,e.eventManager.removeEventHandler("mouseover.tableSelection"),e.eventManager.removeEventHandler("mouseup.tableSelection"))},o=function(a){n=$(a.data.target).closest("td,th")[0];var o=e.wwe.getEditor().getSelection(),l=t===n,c=e._isTextSelect(o,l)&&!$(t).hasClass(s);e._clearTableSelectionTimerIfNeed(),e._isSelectionStarted&&(c?e.removeClassAttrbuteFromAllCellsIfNeed():(e.wwe.componentManager.getManager("table").resetLastCellNode(),n=n||i,o=e.wwe.getEditor().getSelection(),o.setStart(n,0),tui.util.browser.msie?o.setEnd(n,1):(o.setEnd(n,0),o.collapse(!1)),e.wwe.getEditor().setSelection(o)),e.onDragEnd&&e.onDragEnd()),r()},l=function(i){var l=2;t=$(i.data.target).closest("td,th")[0];var c=$(t).hasClass(s);n=null,!c||c&&i.data.button!==l?(e.removeClassAttrbuteFromAllCellsIfNeed(),e.setTableSelectionTimerIfNeed(t),e.eventManager.listen("mouseover.tableSelection",a),e.eventManager.listen("mouseup.tableSelection",o),e.onDragStart&&t&&e.onDragStart(t)):i.data.button===l&&r()};this.eventManager.listen("mousedown.tableSelection",l),this.eventManager.listen("copyBefore.tableSelection",r),this.eventManager.listen("pasteBefore.tableSelection",r)}},{key:"_isTextSelect",value:function(e,t){return/TD|TH|TEXT/i.test(e.commonAncestorContainer.nodeName)&&t}},{key:"setTableSelectionTimerIfNeed",value:function(e){var t=$(e).parents("table").length;t&&(this._isSelectionStarted=!0)}},{key:"_clearTableSelectionTimerIfNeed",value:function(){clearTimeout(this._tableSelectionTimer),tui.util.browser.firefox&&this._removeSelectionTimer&&(clearTimeout(this._removeSelectionTimer),this._removeSelectionTimer=null)}},{key:"_reArrangeSelectionIfneed",value:function(e,t){var n=$(e).parents("table").length,i=$(t).parents("table").length,a=i&&!n,r=!i&&n;return a?e=$(t).parents("table").find("th").first()[0]:r&&(t=$(e).parents("table").find("td").last()[0]),{startContainer:e,endContainer:t}}},{key:"_applySelectionDirection",value:function(e,t){var n=l.default.getNodeOffsetOfParent,i=e.startContainer,a=e.endContainer,r=n($(i).closest("tr")[0])-n($(a).closest("tr")[0]),o=n(i)-n(a),s=0===r,c=r<0,u=o>0;return s?u?(t.setStart(a,0),t.setEnd(i,1)):(t.setStart(i,0),t.setEnd(a,1)):c?(t.setStart(i,0),t.setEnd(a,1)):(t.setStart(a,0),t.setEnd(i,1)),t}},{key:"_getTableCell",value:function(e){return 3===e.nodeType?$(e).parent("td,th")[0]:e}},{key:"getSelectionRangeFromTable",value:function(e,t){var n=l.default.getNodeOffsetOfParent,i=n(e.parentNode),a=n(t.parentNode),r=n(e),o=n(t),s=l.default.getParentUntil(e,"TABLE"),c=l.default.getParentUntil(t,"TABLE"),u="TBODY"===l.default.getNodeName(s)&&"THEAD"===l.default.getNodeName(c),d=s!==c,f=!!$(e).parents("tbody").length&&!!$(t).parents("tbody").length,h={row:i,cell:r},g={row:a,cell:o},v=void 0,p=void 0;return u?h.row+=1:d?g.row+=1:f&&(h.row+=1,g.row+=1),i>a||i===a&&r>o?(v=g,p=h):(v=h,p=g),{from:v,to:p}}},{key:"highlightTableCellsBy",value:function(e,t){var n=$(e).parents("table").find("tr"),i=this.getSelectionRangeFromTable(e,t),a=i.from.row,r=i.from.cell,o=i.to.row,l=i.to.cell;n.each(function(e,t){$(t).find("td,th").each(function(t,n){var i=$(n),c=e===a,u=e===o;c&&t<r||u&&t>l||e<a||e>o?i.removeClass(s):i.addClass(s)})})}},{key:"removeClassAttrbuteFromAllCellsIfNeed",value:function(){this.wwe.get$Body().find("td."+s+",th."+s).each(function(e,t){var n=$(t);n.removeClass(s),n.attr("class").length||n.removeAttr("class")})}},{key:"getSelectedCells",value:function(){return this.wwe.get$Body().find("."+s)}},{key:"createRangeBySelectedCells",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=this.getSelectedCells(),i=this.wwe.componentManager.getManager("table"),a=n.first()[0],r=n.last()[0];n.length&&i.isInTable(t)&&(t.setStart(a,0),t.setEnd(r,r.childNodes.length),e.setSelection(t))}},{key:"styleToSelectedCells",value:function(e){this.createRangeBySelectedCells(),e(this.wwe.getEditor())}},{key:"destroy",value:function(){this.eventManager.removeEventHandler("mousedown.tableSelection"),this.eventManager.removeEventHandler("mouseover.tableSelection"),this.eventManager.removeEventHandler("mouseup.tableSelection"),this.eventManager.removeEventHandler("copyBefore.tableSelection"),this.eventManager.removeEventHandler("pasteBefore.tableSelection")}}]),e}();e.exports=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=function(){function e(t,i,a){n(this,e),this.name=t,this.type=i,a&&this.setKeyMap(a)}return i(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"isMDType",value:function(){return this.type===e.TYPE.MD}},{key:"isWWType",value:function(){return this.type===e.TYPE.WW}},{key:"isGlobalType",value:function(){return this.type===e.TYPE.GB}},{key:"setKeyMap",value:function(e,t){this.keyMap=[e,t]}}]),e}();r.factory=function(e,t){var n=void 0;"markdown"===e?n=r.TYPE.MD:"wysiwyg"===e?n=r.TYPE.WW:"global"===e&&(n=r.TYPE.GB);var i=new r(t.name,n);return a.extend(i,t),i},r.TYPE={MD:0,WW:1,GB:2},e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n="tui-color";e.eventManager.addEventType("colorButtonClicked"),e.getUI().toolbar.addButton({className:n,event:"colorButtonClicked",tooltip:f.default.get("Text color")},2);var i=e.getUI().toolbar.$el.find("button."+n),a=$("<div />"),r=$('<button type="button" class="te-apply-button">입력</button>'),o={container:a[0]};t&&(o.preset=t);var l=tui.component.colorpicker.create(o),s=l.getColor();a.append(r);var c=e.getUI().createPopup({title:!1,content:a,className:"tui-popup-color",$target:e.getUI().$el,css:{width:"auto",position:"absolute"}});e.eventManager.listen("focus",function(){c.hide()}),e.eventManager.listen("colorButtonClicked",function(){e.eventManager.emit("closeAllPopup"),c.isShow()?c.hide():(c.$el.css({top:i.position().top+i.height()+5,left:i.position().left}),c.show(),l.slider.toggle(!0))}),e.eventManager.listen("closeAllPopup",function(){c.hide()}),e.eventManager.listen("removeEditor",function(){l.off("selectColor")}),l.on("selectColor",function(t){s=t.color,"palette"===t.origin&&(e.exec("color",s),c.hide())}),c.$el.find(".te-apply-button").on("click",function(){e.exec("color",s)})}function r(e,t){return"{color:"+t+"}"+e+"{color}"}function o(e,t){return'<span style="color:'+t+'">'+e+"</span>"}function l(e){return e.replace(p,function(e,t,n,i){t=parseInt(t,10),n=parseInt(n,10),i=parseInt(i,10);var a=s(t.toString(16))+s(n.toString(16))+s(i.toString(16));return"#"+a})}function s(e){return"0"===e?"00":e}var c=n(7),u=i(c),d=n(6),f=i(d),h=/\{color:(.+?)}(.*?)\{color}/g,g=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)/g,v=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)<\/span>/g,p=/rgb\((\d+)[, ]+(\d+)[, ]+(\d+)\)/g,m="#181818";u.default.defineExtension("colorSyntax",function(e){var t=!1,n=void 0;e.options.colorSyntax&&(t=!!e.options.colorSyntax.useCustomSyntax,n=e.options.colorSyntax.preset),e.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){var n=void 0;return n=t?e.replace(h,function(e,t,n){return o(n,t)}):e}),e.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){var n=t?v:g;return e.replace(n,function(e,n,i){var a=void 0;return n.match(p)&&(n=l(n)),a=t?r(i,n):e.replace(/ ?class="colour" ?/g," ").replace(p,n)})}),e.isViewOnly()||"default"!==e.getUI().name||(e.addCommand("markdown",{name:"color",exec:function(e,n){var i=e.getEditor();n&&(t?i.replaceSelection(r(i.getSelection(),n)):i.replaceSelection(o(i.getSelection(),n)),e.focus())}}),e.addCommand("wysiwyg",{name:"color",exec:function(e,t){var n=e.getEditor();t&&(n.hasFormat("PRE")||(t===m?n.changeFormat(null,{class:"colour",tag:"span"}):n.setTextColour(t)),n.focus())}}),a(e,n))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),r=i(a),o=n(21),l=i(o),s=n(22),c=i(s),u=n(24),d=i(u),f=n(23),h=i(f),g=n(20),v=i(g),p=tui.util,m=100,y=/(\n)|(\r\n)|(\r)/g;r.default.defineExtension("mark",function(e){function t(){var t=void 0;return t=e.isViewOnly()?s:e.isWysiwygMode()?r:o}function n(){var n=t();i.getAll().forEach(function(e){n.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",i.getAll())}var i=new l.default,a=new c.default(i),r=void 0,o=void 0,s=void 0;e.eventManager.addEventType("markerUpdated"),e.isViewOnly()?s=new h.default(e.preview):(r=new d.default(e.getSquire()),o=new v.default(e.getCodeMirror())),$(window).on("resize",n),e.on("removeEditor",function(){$(window).off("resize",n)}),e.on("setMarkdownAfter",function(){var e=t();a.resetContent(e.getTextContent())}),e.setValueWithMarkers=function(n,r){var l=void 0;return i.resetMarkers(),r.forEach(function(e){i.addMarker(e.start,e.end,e.id)}),e.setValue(n),a.resetContent(n.replace(y,"")),e.isViewOnly()||e.isWysiwygMode()?(l=t(),a.updateMarkersByContent(l.getTextContent())):l=o,i.getAll().forEach(function(e){l.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",i.getAll()),i.getAll()},e.getMarker=function(e){return i.getMarker(e)},e.getMarkersAll=function(){return i.getAll()},e.removeMarker=function(e){return i.removeMarker(e)},e.exportMarkers=function(){var n=void 0;return e.isMarkdownMode()?n=i.getMarkersData():(e.isViewOnly()||e.isWysiwygMode())&&(a.updateMarkersByContent(e.getValue().replace(y,"")),n=i.getMarkersData(),a.updateMarkersByContent(t().getTextContent())),n},e.selectMarker=function(n){var i=t(),a=e.getMarker(n);a&&i.selectOffsetRange(a.start,a.end)},e.addMarker=function(n,a,r){var o=void 0,l=t();return r?(o={start:n,end:a},o=l.updateMarkerWithExtraInfo(o)):(r=n,o=l.getMarkerInfoOfCurrentSelection()),o&&(o.id=r,o=i.addMarker(o),i.sortBy("end"),e.eventManager.emit("markerUpdated",[o])),o},e.clearSelect=function(){t().clearSelect()},e.isViewOnly()||(e.on("changeMode",function(){e._updateMarkers()}),e.on("change",p.debounce(function(){e._updateMarkers()},m)),e._updateMarkers=function(){var n=t();i.getAll().length&&(a.updateMarkersByContent(n.getTextContent()),i.getAll().forEach(function(e){n.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",i.getAll()))})})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=/(\n)|(\r\n)|(\r)/g,o=function(){function e(t){n(this,e),this.cm=t}return i(e,[{key:"getTextContent",value:function(){return this.cm.getValue().replace(r,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetCursor([e.start,e.end]),n=t[0].line,i=t[0].ch,a=t[1].line,o=t[1].ch,l=this._getExtraInfoOfRange(n,i,a,o);return e.text=l.text.replace(r," "),e.top=l.top,e.left=l.left,e.height=l.height,e}},{key:"_getExtraInfoOfRange",value:function(e,t,n,i){var a=void 0,r=void 0,o=void 0,l=void 0,s=void 0,c=this.cm.getDoc();return c.getValue().length?(a=c.getRange({line:e,ch:t},{line:n,ch:i}),r=this.cm.charCoords({line:n,ch:i},"local"),o=r.top,l=r.left,s=r.bottom-r.top):(o=l=s=0,a=""),{text:a,top:o,left:l,height:s}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=this.cm.getDoc(),t=this._getSelection(),n=e.getRange({line:0,ch:0},t.anchor).replace(r,"").length,i=n+e.getSelection().replace(r,"").length,a=this._findOffsetCursor([n,i]),o=this._getExtraInfoOfRange(a[0].line,a[0].ch,a[1].line,a[1].ch);return{start:n,end:i,text:o.text.replace(r," "),top:o.top,left:o.left,height:o.height}}},{key:"_getSelection",value:function(){var e=this.cm.getDoc().listSelections()[0],t=e.anchor,n=e.head,i=t.line>n.line||t.line===n.line&&t.ch>n.ch;if(i){var a=n;n=t,t=a}return{anchor:t,head:n}}},{key:"_findOffsetCursor",value:function(e){var t=this.cm.getDoc(),n=0,i=[],r=t.lineCount(),o=0,l=0,s=void 0;for(s=0;s<r;s+=1){for(l+=t.getLine(s).length;l>=e[o];)if(i.push({line:s,ch:e[o]-n}),o+=1,a.isUndefined(e[o]))return i;n=l}for(;!a.isUndefined(e[o]);)i.push({line:s,ch:l-n}),o+=1;return i}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetCursor([e,t]);this.cm.setSelection({line:n[0].line,ch:n[0].ch},{line:n[1].line,ch:n[1].ch})}},{key:"clearSelect",value:function(){var e=this.cm.getDoc().listSelections()[0];e&&this.cm.setCursor(e.to())}}]),e}();e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=function(){function e(){n(this,e),this._sortedMarkers=[],this._markersWithId={}}return i(e,[{key:"addMarker",value:function(e,t,n){var i=void 0;return i=n?{start:e,end:t,id:n}:e,this._markersWithId[i.id]||(this._sortedMarkers.push(i),this._markersWithId[i.id]=i),i}},{key:"getMarker",value:function(e){
return this._markersWithId[e]}},{key:"removeMarker",value:function(e){var t=this._markersWithId[e];delete this._markersWithId[e];var n=this._sortedMarkers.indexOf(t);return this._sortedMarkers.splice(n,1),t}},{key:"updateMarker",value:function(e,t){var n=this.getMarker(e);return a.extend(n,t)}},{key:"forEachByRangeAffected",value:function(e,t,n){var i=this._getMarkersByRangeAffected(e,t);i.forEach(n)}},{key:"_getMarkersByRangeAffected",value:function(e,t){var n=this._sortedMarkers.filter(function(n){return n.end>t||n.end>e});return n}},{key:"getAll",value:function(){return this._sortedMarkers}},{key:"resetMarkers",value:function(){this._sortedMarkers=[],this._markersWithId={}}},{key:"sortBy",value:function(e){this._sortedMarkers.sort(function(t,n){return t[e]-n[e]})}},{key:"getMarkersData",value:function(){return this.getAll().map(function(e){return{start:e.start,end:e.end,id:e.id}})}}]),e}();e.exports=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(48),o=tui.util,l=0,s=1,c=-1,u=function(){function e(t){i(this,e),this._dmp=new r,this.markerList=t,this.oldTextContent=null}return a(e,[{key:"resetContent",value:function(e){this.oldTextContent=o.isString(e)?e:null}},{key:"updateMarkersByContent",value:function(e){if(o.isNull(this.oldTextContent))return this.resetContent(e),[];var t=this._makeMarkerDiffs(e);return this.oldTextContent=e,this._getUpdateMarkersWithDiffs(t)}},{key:"_makeMarkerDiffs",value:function(e){var t=this.markerList,n=this,i={};return this._forEachChanges(e,function(e,a,r){t.forEachByRangeAffected(e,a,function(t){var o=i[t.id],l=n._calculateStartDiff(e,a,r,t),s=n._calculateEndDiff(e,a,r,t);o?(o.start+=l,o.end+=s):i[t.id]={start:l,end:s}})}),i}},{key:"_forEachChanges",value:function(e,t){var n=0,i=0,a=this._dmp.diff_main(this.oldTextContent,e);a.forEach(function(e){var a=e[0],r=e[1],o=0,u=r.length;return n=i,a===l?(n+=u,void(i+=u)):(a===s?o+=u:a===c&&(o-=u,i+=u),void t(n,i,o))})}},{key:"_calculateStartDiff",value:function(e,t,n,i){var a=void 0;return a=e<=i.start&&t<=i.start?n:e<=i.start&&t>i.start?e-i.start:0}},{key:"_calculateEndDiff",value:function(e,t,n,i){var a=void 0;return a=t<=i.end?n:e<=i.end&&t>i.start?e-i.end:0}},{key:"_getUpdateMarkersWithDiffs",value:function(e){var t=[],n=this.markerList;return o.forEachOwnProperties(e,function(e,i){var a=n.getMarker(i);n.updateMarker(i,{start:a.start+=e.start,end:a.end+=e.end}),t.push(a)}),t}}]),e}();e.exports=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=window.getSelection(),t=void 0;return e&&e.rangeCount?t=e.getRangeAt(0).cloneRange():(t=document.createRange(),t.selectNodeContents(this.preview.$el[0]),t.collapse(!0)),t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=/(\n)|(\r\n)|(\r)/g,s=function(){function e(t){i(this,e),this.preview=t}return r(e,[{key:"getTextContent",value:function(){return this.preview.$el[0].textContent.replace(l,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetNode([e.start,e.end]),n=document.createRange();n.setStart(t[0].container,t[0].offsetInContainer),n.setEnd(t[1].container,t[1].offsetInContainer);var i=this._getExtraInfoOfRange(n);return e.text=i.text,e.top=i.top,e.left=i.left,e.height=i.height,e}},{key:"_getExtraInfoOfRange",value:function(e){var t=void 0,n=void 0,i=void 0,a=void 0,r=void 0,o=void 0,s=void 0,c=e.cloneContents().textContent.replace(l,"");return e.setStart(e.endContainer,e.endOffset),e.collapse(!0),i=e.getBoundingClientRect(),i&&!i.top&&(o=document.createElement("SPAN"),o.textContent="​",e.endContainer.parentNode.insertBefore(o,e.endContainer),i=o.getBoundingClientRect(),s=o.parentNode,s.removeChild(o)),i?(a=this.preview.$el.offset(),t=i.top+this.preview.$el.scrollTop()-a.top+$("body").scrollTop(),n=i.left-a.left,r=i.height):r=t=n=0,{text:c,top:t,left:n,height:r}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=void 0,t=void 0,n=void 0,i=void 0,r=a(),o=$.contains(this.preview.$el[0],r.commonAncestorContainer);return o&&this._extendRangeToTextNodeIfHasNone(r)?(e=r.cloneRange(),e.setStart(this.preview.$el[0],0),e.setEnd(r.startContainer,r.startOffset),i=this._getExtraInfoOfRange(r),t=e.cloneContents().textContent.length,n=t+i.text.length,{start:t,end:n,text:i.text,top:i.top,left:i.left,height:i.height}):null}},{key:"_extendRangeToTextNodeIfHasNone",value:function(e){var t=o.getChildNodeByOffset(e.endContainer,e.endOffset),n=void 0;if(!o.isTextNode(e.endContainer))if(o.isTextNode(t))e.setEnd(t,0);else{if(n=o.getPrevTextNode(t),!n)return!1;e.setEnd(n,n.length)}return!0}},{key:"_findOffsetNode",value:function(e){return o.findOffsetNode(this.preview.$el[0],e,function(e){return e.replace(l,"")})}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetNode([e,t]),i=document.createRange(),a=window.getSelection();i.setStart(n[0].container,n[0].offsetInContainer),i.setEnd(n[1].container,n[1].offsetInContainer),a.removeAllRanges(),a.addRange(i)}},{key:"clearSelect",value:function(){window.getSelection().removeAllRanges()}}]),e}();e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=/\u200B/g,l=function(){function e(t){i(this,e),this.sqe=t}return a(e,[{key:"getTextContent",value:function(){return this.sqe.get$Body()[0].textContent.replace(o,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetNode([e.start,e.end]),n=this.sqe.getSelection().cloneRange();n.setStart(t[0].container,t[0].offsetInContainer),n.setEnd(t[1].container,t[1].offsetInContainer);var i=this._getExtraInfoOfRange(n);return e.text=i.text,e.top=i.top,e.left=i.left,e.height=i.height,e}},{key:"_getExtraInfoOfRange",value:function(e){var t=void 0,n=void 0,i=void 0,a=void 0,l=void 0,s=void 0,c=void 0,u=e.endContainer,d=e.endOffset,f=e.cloneContents().textContent.replace(o,"");return r.getChildNodeByOffset(u,d)&&(e.setStart(u,d),e.collapse(!0),i=e.getBoundingClientRect()),i&&!i.top&&this.sqe.modifyDocument(function(){l=document.createElement("SPAN"),l.textContent="​",e.endContainer.parentNode.insertBefore(l,e.endContainer),i=l.getBoundingClientRect(),s=l.parentNode,s.removeChild(l)}),i?(c=this.sqe.get$Body().parent().offset(),t=this.sqe.scrollTop()+i.top-c.top+$("body").scrollTop(),n=i.left-c.left,a=i.height):a=t=n=0,{text:f,top:t,left:n,height:a}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=void 0,t=void 0,n=void 0,i=void 0,a=this.sqe.getSelection().cloneRange();return this._extendRangeToTextNodeIfHasNone(a)?(e=a.cloneRange(),e.setStart(this.sqe.get$Body()[0],0),e.setEnd(a.startContainer,a.startOffset),i=this._getExtraInfoOfRange(a),t=e.cloneContents().textContent.length,n=t+i.text.length,{start:t,end:n,text:i.text,top:i.top,left:i.left,height:i.height}):null}},{key:"_extendRangeToTextNodeIfHasNone",value:function(e){var t=r.getChildNodeByOffset(e.endContainer,e.endOffset),n=void 0;if(!r.isTextNode(e.endContainer)||!t.nodeValue.replace(o,"").length)if(r.isTextNode(t))e.setEnd(t,0);else{if(n=r.getPrevTextNode(t),!n)return!1;e.setEnd(n,n.length)}return!0}},{key:"_findOffsetNode",value:function(e){return r.findOffsetNode(this.sqe.get$Body()[0],e,function(e){return e.replace(o,"")})}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetNode([e,t]),i=this.sqe.getSelection().cloneRange();i.setStart(n[0].container,n[0].offsetInContainer),i.setEnd(n[1].container,n[1].offsetInContainer),this.sqe.setSelection(i)}},{key:"clearSelect",value:function(){var e=this.sqe.getSelection().cloneRange();e.collapse(!0),this.sqe.setSelection(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(6),r=i(a);r.default.setLang(["ko","ko_KR"],{"Merge cells":"셀 병합","Unmerge cells":"셀 병합해제","Cannot change part of merged cell":"병합 된 셀의 일부를 변경할 수 없습니다.","Cannot paste row merged cells into the table header":"테이블 헤더에는 행 병합된 셀을 붙여넣을 수 없습니다."}),r.default.setLang(["en","en_US"],{"Merge cells":"Merge cells","Unmerge cells":"Unmerge cells","Cannot change part of merged cell":"Cannot change part of merged cell.","Cannot paste row merged cells into the table header":"Cannot paste row merged cells into the table header."}),r.default.setLang(["ja","ja_JP"],{"Merge cells":"セルの結合","Unmerge cells":"セルの結合を解除","Cannot change part of merged cell":"結合されたセルの一部を変更することはできません。","Cannot paste row merged cells into the table header":"行にマージされたセルをヘッダーに貼り付けることはできません。"}),r.default.setLang(["nl","nl_NL"],{"Merge cells":"cellen samenvoegen","Unmerge cells":"Samenvoegen cellen ongedaan maken","Cannot change part of merged cell":"Kan geen deel uit van samengevoegde cel te veranderen.","Cannot paste row merged cells into the table header":"Kan niet plakken rij samengevoegde cellen in de koptekst. "}),r.default.setLang(["zh","zh_CN"],{"Merge cells":"合并单元格","Unmerge cells":"取消合并单元格","Cannot change part of merged cell":"无法更改合并单元格的一部分。","Cannot paste row merged cells into the table header":"无法将行合并单元格粘贴到标题中。"})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){var i,r=n+1,o=(i=[]).concat.apply(i,a(e.map(function(e){return e.slice(t,r)}))),l=o.filter(function(e){var t=e.content;return t&&t!==w});return l.length?l[0].content:w}function o(e,t,n){var i,r=n+1,o=e.map(function(e){return e.slice(t,r)});(i=[]).concat.apply(i,a(o)).slice(1).forEach(function(e){var t=e.nodeName;b.forEach(e,function(t,n){return delete e[n]}),e.nodeName=t})}function l(e,t,n,i){var a=n+1;e.forEach(function(e){e.slice(t,a).forEach(function(e){e.rowMergeWith=i})})}function s(e,t,n,i){var a=n+1;e.forEach(function(e){e.slice(t,a).forEach(function(e){e.colMergeWith=i})})}function c(e,t){var n=t.start,i=t.end,a=n.rowIndex,c=n.colIndex,u=i.rowIndex,d=i.colIndex,f=e[a][c],h=e.slice(a,u+1),g=u-a+1,v=d-c+1;f.rowspan=g,f.colspan=v,f.content=r(h,c,d),o(h,c,d),g>1&&l(h.slice(1),c,d,a),v>1&&s(h,c+1,d,c)}function u(e,t,n){var i=g.default.createTableData(e),a=g.default.findElementIndex(i,t,n);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._mergeCells=c;var d=n(1),f=i(d),h=n(3),g=i(h),v=n(4),p=i(v),m=n(5),y=i(m),b=tui.util,w=b.browser.msie?"":"<br>",k=f.default.command("wysiwyg",{name:"MergeCells",exec:function(e){var t=e.getEditor();if(t.focus(),t.hasFormat("TABLE")){var n=e.componentManager.getManager("tableSelection"),i=n.getSelectedCells();if(!(i.length<2||n.hasSelectedBothThAndTd(i))){var a=t.getSelection().cloneRange(),r=$(a.startContainer),o=r.closest("table"),l=g.default.createTableData(o),s=p.default.getTableSelectionRange(l,i,r);c(l,s);var d=y.default.replaceTable(o,l),f=u(d,s.start.rowIndex,s.start.colIndex);y.default.focusToCell(t,a,f)}}}});t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return{nodeName:t,colMergeWith:e}}function o(e,t,n,i){var a=e[n],o=void 0;if(y.isExisty(a.colMergeWith)){var l=a.colMergeWith,s=e[l],c=l+s.colspan-1;y.isExisty(s.rowMergeWith)&&i?o=y.extend({},i):c>n&&(s.colspan+=1,o=y.extend({},a))}else a.colspan>1&&(a.colspan+=1,o=r(n,a.nodeName));return o||(o=h.default.createBasicCell(t,n+1,a.nodeName)),o}function l(e,t,n){var i=y.range(t,n+1),a=[],r=null;return e.forEach(function(e,t){var l=i.map(function(i,a){var l=r?r[a-1]:null;return o(e,t,n,l)});r=l,a.push(l)}),a}function s(e,t){var n=t.end,i=h.default.findColMergedLastIndex(e,n.rowIndex,n.colIndex),r=l(e,t.start.colIndex,i),o=i+1;e.forEach(function(e,t){e.splice.apply(e,a([o,0].concat(r[t])))})}function c(e,t,n){var i=h.default.createTableData(e),a=h.default.findColMergedLastIndex(i,t,n)+1,r=h.default.findElementIndex(i,t,a);return e.find("tr").eq(r.rowIndex).find("td, th")[r.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._createNewColumns=l,t._addColumns=s;var u=n(1),d=i(u),f=n(3),h=i(f),g=n(4),v=i(g),p=n(5),m=i(p),y=tui.util,b=d.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.focus(),t.hasFormat("TABLE")){var i=$(n.startContainer),a=i.closest("table"),r=h.default.createTableData(a),o=e.componentManager.getManager("tableSelection").getSelectedCells(),l=v.default.getTableSelectionRange(r,o,i);s(r,l);var u=m.default.replaceTable(a,r),d=c(u,l.start.rowIndex,l.end.colIndex);m.default.focusToCell(t,n,d)}}});t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){return{nodeName:"TD",rowMergeWith:e}}function o(e,t){var n=null;return e[t].map(function(i,a){var o=void 0;if(m.isExisty(i.rowMergeWith)){var l=i.rowMergeWith,s=e[l][a],c=l+s.rowspan-1;m.isExisty(s.colMergeWith)&&n?o=m.extend({},n):c>t&&(s.rowspan+=1,o=m.extend({},i))}else i.rowspan>1&&(i.rowspan+=1,o=r(t));return o||(o=f.default.createBasicCell(t+1,a)),n=o,o})}function l(e,t){var n=t.start.rowIndex,i=t.end,r=f.default.findRowMergedLastIndex(e,i.rowIndex,i.colIndex),l=m.range(n,r+1).map(function(){return o(e,r)});e.splice.apply(e,a([r+1,0].concat(l)))}function s(e,t,n){var i=f.default.createTableData(e),a=f.default.findRowMergedLastIndex(i,t,n)+1,r=f.default.findElementIndex(i,a,n);return e.find("tr").eq(r.rowIndex).find("td")[r.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._createNewRow=o,t._addRow=l;var c=n(1),u=i(c),d=n(3),f=i(d),h=n(4),g=i(h),v=n(5),p=i(v),m=tui.util,y=u.default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.focus(),t.hasFormat("TABLE")){var i=$(n.startContainer),a=i.closest("table"),r=f.default.createTableData(a),o=e.componentManager.getManager("tableSelection").getSelectedCells(),c=g.default.getTableSelectionRange(r,o,i);l(r,c);var u=p.default.replaceTable(a,r),d=s(u,c.end.rowIndex,c.start.colIndex);p.default.focusToCell(t,n,d)}}});t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,i){g.range(t,n+1).forEach(function(t){var n=e[t];g.isExisty(n.colMergeWith)?e[n.colMergeWith].align=i:n.align=i})}function r(e,t){var n=c.default.findElementRowIndex(t),i=c.default.findElementColIndex(t);return e.find("tr").eq(n).find("td, th")[i]}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=i(o),s=n(3),c=i(s),u=n(4),d=i(u),f=n(5),h=i(f),g=tui.util,v=l.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),i=n.getSelection().cloneRange();if(n.focus(),n.hasFormat("TABLE")){var o=$(i.startContainer),l=o.closest("table"),s=c.default.createTableData(l),u=e.componentManager.getManager("tableSelection").getSelectedCells(),f=d.default.getTableSelectionRange(s,u,o);a(s[0],f.start.colIndex,f.end.colIndex,t);var g=h.default.replaceTable(l,s),v=r(g,o);h.default.focusToCell(n,i,v)}}});t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var i=new RegExp("^((?:"+n+"=[0-9]+:)?)"+t+"=([0-9]+):(.*)"),a=i.exec(e),r=1;return a&&(r=parseInt(a[2],10),e=a[1]+a[3]),[r,e]}function r(e){var t=e.nodeName,n=e.align||"",i=e.innerHTML.trim(),r=null,o=null,l=a(i,"@cols","@rows"),s=h(l,2);r=s[0],i=s[1];var c=a(i,"@rows","@cols"),u=h(c,2);return o=u[0],i=u[1],{nodeName:t,colspan:r,rowspan:o,content:i,align:n}}function o(e){return e.find("tr").get().map(function(e){return $(e).find("td, th").get().map(r)})}function l(e,t){var n=-1;return tui.util.forEach(e,function(e,i){var a=!0;return t(e,i)&&(n=i,a=!1),a}),n}function s(e){var t=l(e,function(e){return"TD"===e[0].nodeName});return[e.slice(0,t),e.slice(t)]}function c(e){e.forEach(function(e){var t=e.length,n=0;e.forEach(function(e){n+=e.colspan-1}),e.splice(t-n)})}function u(e){var t=e.map(function(e,t){return t}),n=t.map(function(){return 0});return e.forEach(function(e,i){var a=e.filter(function(e){return e.rowspan>1}),r=i+1;a.forEach(function(e){var i=e.colspan,a=r+(e.rowspan-1);t.slice(r,a).forEach(function(e){n[e]+=i})})}),n}function d(e){var t=u(e);e.forEach(function(e,n){e.splice(e.length-t[n])})}function f(e){var t=o($(e)),n=s(t),i=h(n,2),a=i[0],r=i[1];return c(a),c(r),d(r),$(v.default.createTableHtml(t))[0]}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t._extractPropertiesForMerge=a,t._parseTableCell=r,t._createTableObjectFrom$Table=o,t._divideTrs=s,t._mergeByColspan=c,t._getRemovalTdCountsByRowspan=u,t._mergeByRowspan=d,t.default=f;var g=n(5),v=i(g)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){e.forEach(function(e){p.range(t,n+1).forEach(function(t){var i=e[t];if(p.isExisty(i.colMergeWith)){var a=e[i.colMergeWith];a.colspan&&(a.colspan-=1)}else if(i.colspan>1){var r=t+i.colspan-1;i.colspan-=n-t+1,r>n&&(e[n+1]=p.extend({},i))}})})}function r(e,t,n){e.forEach(function(e){e.slice(n+1).forEach(function(e){p.isExisty(e.colMergeWith)&&e.colMergeWith>=t&&(e.colMergeWith=n+1)})})}function o(e,t){var n=t.start.colIndex,i=t.end,o=d.default.findColMergedLastIndex(e,i.rowIndex,i.colIndex),l=o-n+1;l!==e[0].length&&(a(e,n,o),r(e,n,o),e.forEach(function(e){e.splice(n,l)}))}function l(e,t,n){var i=d.default.createTableData(e);i[0].length-1<n&&(n-=1);var a=d.default.findElementIndex(i,t,n);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._removeColumns=o;var s=n(1),c=i(s),u=n(3),d=i(u),f=n(4),h=i(f),g=n(5),v=i(g),p=tui.util,m=c.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.focus(),t.hasFormat("TABLE")){var i=$(n.startContainer),a=i.closest("table"),r=d.default.createTableData(a),s=e.componentManager.getManager("tableSelection").getSelectedCells(),c=h.default.getTableSelectionRange(r,s,i),u=r[0].length;if(o(r,c),u!==r[0].length){var f=v.default.replaceTable(a,r),g=l(f,c.start.rowIndex,c.end.colIndex);v.default.focusToCell(t,n,g)}}}});t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){p.range(t,n+1).forEach(function(t){e[t].forEach(function(i,a){if(p.isExisty(i.rowMergeWith)){var r=e[i.rowMergeWith][a];r.rowspan&&(r.rowspan-=1)}else if(i.rowspan>1){var o=t+i.rowspan-1;i.rowspan-=n-t+1,o>n&&(e[n+1][a]=p.extend({},i))}})})}function r(e,t,n){e.slice(n+1).forEach(function(e){e.forEach(function(e){p.isExisty(e.rowMergeWith)&&e.rowMergeWith>=t&&(e.rowMergeWith=n+1)})})}function o(e,t){var n=t.start.rowIndex,i=t.end,o=d.default.findRowMergedLastIndex(e,i.rowIndex,i.colIndex),l=o-n+1;l!==e.length-1&&(a(e,n,o),r(e,n,o),e.splice(n,l))}function l(e,t,n){var i=d.default.createTableData(e);i.length-1<t&&(t-=1);var a=d.default.findElementIndex(i,t,n);return e.find("tr").eq(a.rowIndex).find("td")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._removeRow=o;var s=n(1),c=i(s),u=n(3),d=i(u),f=n(4),h=i(f),g=n(5),v=i(g),p=tui.util,m=c.default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.focus(),t.hasFormat("TABLE")){var i=$(n.startContainer),a=i.closest("table"),r=d.default.createTableData(a),s=r.length,c=e.componentManager.getManager("tableSelection").getSelectedCells(),u=h.default.getTableSelectionRange(r,c,i);if(o(r,u),s!==r.length){var f=v.default.replaceTable(a,r),g=l(f,u.end.rowIndex,u.start.colIndex);v.default.focusToCell(t,n,g)}}}});t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=['<button type="button" class="te-table-add-row">'+s.default.get("Add row")+"</button>",'<button type="button" class="te-table-add-col">'+s.default.get("Add col")+"</button>",'<button type="button" class="te-table-remove-row">'+s.default.get("Remove row")+"</button>",'<button type="button" class="te-table-remove-col">'+s.default.get("Remove col")+"</button>",'<button type="button" class="te-table-merge">'+s.default.get("Merge cells")+"</button>",'<button type="button" class="te-table-unmerge">'+s.default.get("Unmerge cells")+"</button>",'<button type="button" class="te-table-col-align-left">'+s.default.get("Align left")+"</button>",'<button type="button" class="te-table-col-align-center">'+s.default.get("Align center")+"</button>",'<button type="button" class="te-table-col-align-right">'+s.default.get("Align right")+"</button>",'<button type="button" class="te-table-remove">'+s.default.get("Remove table")+"</button>"].join(""),n=$(t);e.$content=n,e.setContent(n)}function r(e,t,n){var i=e.$content,a=$(i[4]),r=$(i[5]);e.on("click .te-table-merge",function(){t.emit("command","MergeCells")}),e.on("click .te-table-unmerge",function(){t.emit("command","UnmergeCells")}),t.listen("openPopupTableUtils",function(){var e=n.getSelectedCells(),t=e.length;t?(t<2||n.hasSelectedBothThAndTd(e)?a.hide():a.show(),e.is("[rowspan], [colspan]")?r.show():r.hide()):(a.hide(),r.hide())})}function o(e,t,n){a(e),r(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),s=i(l);t.default={updateContextMenu:o}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e.addCommand(B.default),e.addCommand(R.default)}function r(e){e.removeManager("table"),e.removeManager("tableSelection"),e.addManager(y.default),e.addManager(w.default)}function o(e,t){var n=$("<div>"+e+"</div>"),i=n.find("table");return i.length&&(i.get().forEach(function(e){var n=t(e);$(e).replaceWith(n)}),e=n.html()),e}function l(e){var t=e.command;if(t.isWWType())switch(t.getName()){case"AddRow":e.command=_.default;break;case"AddCol":e.command=E.default;break;case"RemoveRow":e.command=M.default;break;case"RemoveCol":e.command=S.default;break;case"AlignCol":e.command=N.default}}function s(e){e.listen("convertorAfterMarkdownToHtmlConverted",function(e){return o(e,f.default)}),e.listen("convertorBeforeHtmlToMarkdownConverted",function(e){return o(e,g.default)}),e.listen("addCommandBefore",l)}var c=n(7),u=i(c),d=n(30),f=i(d),h=n(35),g=i(h),v=n(36),p=i(v),m=n(38),y=i(m),b=n(39),w=i(b),k=n(28),_=i(k),C=n(27),E=i(C),T=n(32),M=i(T),x=n(31),S=i(x),I=n(29),N=i(I),A=n(26),B=i(A),L=n(37),R=i(L),O=n(33),D=i(O);n(25),u.default.defineExtension("tableExtension",function(e){var t=e.eventManager;if(e.toMarkOptions=e.toMarkOptions||{},e.toMarkOptions.renderer=p.default,s(t),!e.isViewOnly()){var n=e.wwEditor.componentManager,i=e._ui.popupTableUtils;a(e),r(n),e._ui.popupTableUtils&&D.default.updateContextMenu(i,t,n.getManager("tableSelection"))}})},function(e,t){"use strict";function n(e){var t=$(e),n=t.attr("colspan")||"",i=t.attr("rowspan")||"",a=t.html();n&&(a="@cols="+n+":"+a),i&&(a="@rows="+i+":"+a),a&&t.html(a)}function i(e){return $(e).find("td, th").get().forEach(n),e}Object.defineProperty(t,"__esModule",{value:!0}),t._prependMergeSyntaxToContent=n,t.default=i},function(e,t){"use strict";function n(e,t){return tui.util.range(0,t).map(function(){return e}).join("")}function i(e){var t=e.align,i=(e.textContent||e.innerText).replace(l,""),a=i.length,r="",o="";return t&&("left"===t?(r=":",a-=1):"right"===t?(o=":",a-=1):"center"===t&&(o=":",r=":",a-=2)),a=Math.max(a,3),r+n("-",a)+o}function a(e){var t=0;return e.filter(function(e){return $(e).attr("colspan")}).forEach(function(e){t+=parseInt($(e).attr("colspan"),10)-1}),t}function r(e,t){var r=$(e).find("th").get(),o=r.map(function(e){return" "+i(e)+" |"}).join("");return o+=n(" --- |",a(r)),t?t+"|"+o+"\n":""}Object.defineProperty(t,"__esModule",{value:!0}),t._getAdditionalThCount=a,t._createTheadMarkdown=r;var o=window.toMark,l=/@cols=[0-9]+:/g;t.default=o.Renderer.factory(o.gfmRenderer,{THEAD:r})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){var n,i=t.start,r=t.end,o=i.colIndex,l=r.colIndex+1,s=e.slice(i.rowIndex,r.rowIndex+1),c=s.map(function(e){return e.slice(o,l)});return!!(n=[]).concat.apply(n,a(c)).filter(function(e){return e.colspan>1||e.rowspan>1}).length}function o(e,t,n,i,a){var r=t+i,o=n+a,l=m.range(n,o);m.range(t,r).forEach(function(n){var i=e[n],a=n===t?1:0;l.slice(a).forEach(function(e){i[e]=f.default.createBasicCell(n,e,i[e].nodeName)})})}function l(e,t){var n=t.start,i=t.end,a=m.range(n.colIndex,i.colIndex+1);m.range(n.rowIndex,i.rowIndex+1).forEach(function(t){a.forEach(function(n){var i=e[t][n],a=i.colspan,r=i.rowspan;(a>1||r>1)&&(i.colspan=1,i.rowspan=1,o(e,t,n,r,a))})})}function s(e,t,n){var i=f.default.createTableData(e),a=f.default.findElementIndex(i,t,n);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._hasMergedCell=r,t._unmergeCells=l;var c=n(1),u=i(c),d=n(3),f=i(d),h=n(4),g=i(h),v=n(5),p=i(v),m=tui.util,y=u.default.command("wysiwyg",{name:"UnmergeCells",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.focus(),t.hasFormat("TABLE")){var i=$(n.startContainer),a=i.closest("table"),o=f.default.createTableData(a),c=e.componentManager.getManager("tableSelection").getSelectedCells(),u=g.default.getTableSelectionRange(o,c,i);if(r(o,u)){l(o,u);var d=p.default.replaceTable(a,o),h=s(d,u.start.rowIndex,u.start.colIndex);p.default.focusToCell(t,n,h)}}}});t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=!1;return w.forEach(e,function(e){return n=t(e),!n}),n}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(15),d=i(u),f=n(3),h=i(f),g=n(5),v=i(g),p=n(4),m=i(p),y=n(6),b=i(y),w=tui.util,k="tui-paste-table-bookmark",_="tui-paste-table-cell-bookmark",C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"_updateCopyDataMergeWith",value:function(e,t){e.forEach(function(e){e.forEach(function(e){w.isExisty(e.rowMergeWith)&&(e.rowMergeWith-=t.rowIndex),w.isExisty(e.colMergeWith)&&(e.colMergeWith-=t.colIndex)})})}},{key:"_createCopyTableData",value:function(e,t,n){var i=e.slice(t.rowIndex,n.rowIndex+1);return i=i.map(function(e){return e.slice(t.colIndex,n.colIndex+1)}),this._updateCopyDataMergeWith(i,t),i}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection").getSelectedCells();if(t.length){var n=h.default.createTableData($(t[0]).closest("TABLE")),i=m.default.getTableSelectionRange(n,t),a=i.start,r=i.end,o=this._createCopyTableData(n,a,r),l=h.default.createCellIndexData(o),s=h.default.createRenderData(o,l);e.html(v.default.createTableHtml(s))}}},{key:"prepareToTableCellStuffing",value:function(e){var t=e[0].length,n=!1;return e.slice(1).forEach(function(e){var i=e.length;t!==i&&(n=!0,t<i&&(t=i))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=$(e),n=h.default.createTableData(t),i=h.default.addTbodyOrTheadIfNeed(n),a=this.prepareToTableCellStuffing(n),r=a.needTableCellStuffingAid;r&&h.default.stuffCellsIntoIncompleteRow(n,a.maximumCellLength),(i||r)&&v.default.replaceTable(t,n)}},{key:"_findStartCell",value:function(e){var t=void 0;return t=1===e.length?e[0]:this.wwe.getEditor().getSelection().startContainer}},{key:"_findStartCellIndex",value:function(e,t){var n=h.default.createCellIndexData(e);return h.default.findCellIndex(n,t)}},{key:"_hasRowMergedHeader",value:function(e,t,n){var i="TH"===t[n.rowIndex][n.colIndex].nodeName,a=s(e[0],function(e){return e.rowspan&&e.rowspan>1});return i&&a}},{key:"_isExactlyFit",value:function(e,t,n){return t%e.length===0&&n%e[0].length===0}},{key:"_updateClipboardTableData",value:function(e,t,n){var i=e.length,r=e[0].length,o=parseInt(t/i,10),l=parseInt(n/r,10);if(o>1){var s=JSON.parse(JSON.stringify(e));w.range(0,o-1).forEach(function(){var t=JSON.parse(JSON.stringify(s));e.push.apply(e,a(t))})}if(l>1){var c=JSON.parse(JSON.stringify(e));w.range(0,l-1).forEach(function(){var t=JSON.parse(JSON.stringify(c));e.forEach(function(e,n){e.push.apply(e,a(t[n]))})})}}},{key:"_updateTableDataByClipboardData",value:function(e,t,n){var i=n.rowIndex,a=n.colIndex;e.forEach(function(e,n){var r=i+n;e.forEach(function(e,n){var i=a+n,o=t[r][i];e.nodeName=o.nodeName,t[r][i]=e})})}},{key:"_isPossibleToPaste",value:function(e,t,n){var i=t.rowIndex,a=t.colIndex,r=n.rowIndex,o=n.colIndex,l=e.slice(i,r+1),c=l[0].slice(a,o+1),u=!s(c,function(e){return w.isExisty(e.rowMergeWith)});if(u){var d=w.pluck(l,a);u=!s(d,function(e){return w.isExisty(e.colMergeWith)})}if(u&&e.length>r+1){var f=e[r+1].slice(a,o+1);u=!s(f,function(e){return w.isExisty(e.rowMergeWith)})}if(u&&e[0].length>o+1){var h=w.pluck(l,o+1);u=!s(h,function(e){return w.isExisty(e.colMergeWith)})}return u}},{key:"_spliceClipboardData",value:function(e,t,n){e.splice(t),e.forEach(function(e){e.splice(n)})}},{key:"_bookmarkLastTd",value:function(e){var t=e.rowIndex,n=e.colIndex,i=this.wwe.getEditor(),a=i.get$Body().find("."+k),r=h.default.createTableData(a),o=r[t][n];t=w.isExisty(o.rowMergeWith)?o.rowMergeWith:t,n=w.isExisty(o.colMergeWith)?o.colMergeWith:n;var l=r[t][n].elementIndex,s=a.find("tr").eq(l.rowIndex).children()[l.colIndex];a.removeClass(k),$(s).addClass(_)}},{key:"_updateClipboardDataForPasteToSamllerSelectedArea",value:function(e,t,n,i,a){var r=!0,o={rowIndex:0,colIndex:0},l={rowIndex:n-1,colIndex:i-1};return this._isPossibleToPaste(e,o,l)?(this._spliceClipboardData(e,n,i),this._updateTableDataByClipboardData(e,t,a)):r=!1,r}},{key:"_pasteToSelectedArea",value:function(e,t,n,i){var a=m.default.getTableSelectionRange(n,i),r=a.start,o=a.end,l=o.rowIndex-r.rowIndex+1,s=o.colIndex-r.colIndex+1,c=t.length,u=t[0].length,d=l>=c&&s>=u,f=b.default.get("Cannot change part of merged cell"),h=!0,g=void 0;
this._hasRowMergedHeader(t,n,r)?(f=b.default.get("Cannot paste row merged cells into the table header"),h=!1):this._isExactlyFit(t,l,s)?(g=o,this._updateClipboardTableData(t,l,s),this._updateTableDataByClipboardData(t,n,r)):d?(g={rowIndex:r.rowIndex+c-1,colIndex:r.colIndex+u-1},this._isPossibleToPaste(n,r,g)?this._updateTableDataByClipboardData(t,n,r):h=!1):(g={rowIndex:r.rowIndex+l-1,colIndex:r.colIndex+s-1},h=this._updateClipboardDataForPasteToSamllerSelectedArea(t,n,l,s,r)),h?(n.className+=" "+k,v.default.replaceTable(e,n),this._bookmarkLastTd(g)):(alert(f),this.wwe.getEditor().focus())}},{key:"_findEndCellIndex",value:function(e,t){var n=t.rowIndex,i=t.colIndex;return{rowIndex:n+e.length-1,colIndex:i+e[0].length-1}}},{key:"_expandRow",value:function(e,t){var n=e.length,i=e[0].length,r=w.range(n,n+t).map(function(e){return w.range(0,i).map(function(t){return h.default.createBasicCell(e,t)})});e.push.apply(e,a(r))}},{key:"_expandCoumn",value:function(e,t){var n=e[0].length,i=w.range(n,n+t);e.forEach(function(e,t){var n=e[0].nodeName,r=i.map(function(e){return h.default.createBasicCell(t,e,n)});e.push.apply(e,a(r))})}},{key:"_expandTableDataIfNeed",value:function(e,t,n){var i=n.rowIndex-e.length+1,a=n.colIndex-e[0].length+1;i>0&&this._expandRow(e,i),a>0&&this._expandCoumn(e,a)}},{key:"_pasteAllClipboardTableData",value:function(e,t,n,i){var a=this._findEndCellIndex(t,i);return this._hasRowMergedHeader(t,n,i)?(alert(b.default.get("Cannot paste row merged cells into the table header")),void this.wwe.getEditor().focus()):(this._expandTableDataIfNeed(n,i,a),void(this._isPossibleToPaste(n,i,a)?(this._updateTableDataByClipboardData(t,n,i),n.className+=" "+k,v.default.replaceTable(e,n),this._bookmarkLastTd(a)):(alert(b.default.get("Cannot change part of merged cell")),this.wwe.getEditor().focus())))}},{key:"pasteClipboardData",value:function(e){var t=h.default.createTableData(e),n=this.wwe.componentManager.getManager("tableSelection"),i=n.getSelectedCells(),a=$(this._findStartCell(i)),r=a.closest("table"),o=h.default.createTableData(r),l=this._findStartCellIndex(o,a);i.length>1?this._pasteToSelectedArea(r,t,o,i):this._pasteAllClipboardTableData(r,t,o,l)}}]),t}(d.default);e.exports=C},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(16),c=i(s),u=n(3),d=i(u),f=n(4),h=i(f),g="te-cell-selected",v=tui.util,p=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._tableData=null,n.mergedTableSelectionManager=!0,n}return o(t,e),l(t,[{key:"_addClassToSelectedCells",value:function(e,t,n){var i=n.start,a=n.end,r=v.range(i.colIndex,a.colIndex+1),o=e.find("tr");v.range(i.rowIndex,a.rowIndex+1).forEach(function(e){var n=t[e],i=o.eq(e).find("td, th");return r.forEach(function(e){var t=n[e];t.elementIndex&&i.eq(n[e].elementIndex.colIndex).addClass(g)})})}},{key:"onDragStart",value:function(e){var t=$(e).closest("table");this._tableData=d.default.createTableData(t)}},{key:"onDragEnd",value:function(){this._tableData=null}},{key:"highlightTableCellsBy",value:function(e,t){var n=$(e),i=$(t),a=n.closest("table"),r=h.default.findSelectionRange(this._tableData,n,i);this.removeClassAttrbuteFromAllCellsIfNeed(),this._addClassToSelectedCells(a,this._tableData,r)}},{key:"styleToSelectedCells",value:function(e){var t=this.wwe.getEditor(),n=t.getSelection().cloneRange(),i=$(n.startContainer).closest("table");i.find("tr").get().forEach(function(i){var a=$(i).find("."+g),r=a.first()[0],o=a.last()[0];a.length&&(n.setStart(r,0),n.setEnd(o,o.childNodes.length),t.setSelection(n),e(t))})}},{key:"hasSelectedBothThAndTd",value:function(e){return e=e||this.getSelectedCells(),e.first()[0].nodeName!==e.last()[0].nodeName}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";var i=n(7),a=/^\s*\* \[[xX ]\] [^\n]*/gm,r=/^\s*\* \[[xX]\] [^\n]*/gm;i.defineExtension("taskCounter",function(e){e.getTaskCount=function(){var t=void 0,n=void 0;return e.isViewOnly()?n=e.preview.$el.find(".task-list-item").length:e.isMarkdownMode()?(t=e.mdEditor.getValue().match(a),n=t?t.length:0):n=e.wwEditor.get$Body().find(".task-list-item").length,n},e.getCheckedTaskCount=function(){var t=void 0,n=void 0;return e.isViewOnly()?n=e.preview.$el.find(".task-list-item.checked").length:e.isMarkdownMode()?(t=e.mdEditor.getValue().match(r),n=t?t.length:0):n=e.wwEditor.get$Body().find(".task-list-item.checked").length,n}})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=tui.util,r=function(){function e(){n(this,e),this.globalTOID=null,this.lazyRunFunctions={}}return i(e,[{key:"run",value:function(e,t,n,i){var r=void 0;return a.isString(e)?r=this._runRegisteredRun(e,t,n,i):(r=this._runSingleRun(e,t,n,i,this.globalTOID),this.globalTOID=r),r}},{key:"registerLazyRunFunction",value:function(e,t,n,i){i=i||this,this.lazyRunFunctions[e]={fn:t,delay:n,context:i,TOID:null}}},{key:"_runSingleRun",value:function(e,t,n,i,a){return this._clearTOIDIfNeed(a),a=setTimeout(function(){e.call(n,t)},i)}},{key:"_runRegisteredRun",value:function(e,t,n,i){var a=this.lazyRunFunctions[e].fn,r=this.lazyRunFunctions[e].TOID;return i=i||this.lazyRunFunctions[e].delay,n=n||this.lazyRunFunctions[e].context,r=this._runSingleRun(a,t,n,i,r),this.lazyRunFunctions[e].TOID=r,r}},{key:"_clearTOIDIfNeed",value:function(e){e&&clearTimeout(e)}}]),e}();e.exports=r},function(e,t){"use strict";function n(e){switch(e){case 9:case 32:return!0}return!1}e.exports=function(e,t,i,a){var r,o,l,s,c,u,d,f,h,g,v,p,m,y,b,w,k=/(?:-|\*|\d+\.) {1,4}(?:> {0,3})[^>]*$/,_=e.src.split("\n"),C=_[t],E=e.bMarks[t]+e.tShift[t],T=e.eMarks[t];if(C.match(k)||62!==e.src.charCodeAt(E++))return!1;if(a)return!0;for(32===e.src.charCodeAt(E)&&E++,u=e.blkIndent,e.blkIndent=0,h=g=e.sCount[t]+E-(e.bMarks[t]+e.tShift[t]),c=[e.bMarks[t]],e.bMarks[t]=E;E<T&&(v=e.src.charCodeAt(E),n(v));)9===v?g+=4-g%4:g++,E++;for(o=E>=T,s=[e.sCount[t]],e.sCount[t]=g-h,l=[e.tShift[t]],e.tShift[t]=E-e.bMarks[t],p=e.md.block.ruler.getRules("blockquote"),r=t+1;r<i&&!(e.sCount[r]<u)&&(E=e.bMarks[r]+e.tShift[r],T=e.eMarks[r],!(E>=T));r++)if(62!==e.src.charCodeAt(E++)){if(o)break;for(w=!1,y=0,b=p.length;y<b;y++)if(p[y](e,r,i,!0)){w=!0;break}if(w)break;c.push(e.bMarks[r]),l.push(e.tShift[r]),s.push(e.sCount[r]),e.sCount[r]=-1}else{for(32===e.src.charCodeAt(E)&&E++,h=g=e.sCount[r]+E-(e.bMarks[r]+e.tShift[r]),c.push(e.bMarks[r]),e.bMarks[r]=E;E<T&&(v=e.src.charCodeAt(E),n(v));)9===v?g+=4-g%4:g++,E++;o=E>=T,s.push(e.sCount[r]),e.sCount[r]=g-h,l.push(e.tShift[r]),e.tShift[r]=E-e.bMarks[r]}for(d=e.parentType,e.parentType="blockquote",m=e.push("blockquote_open","blockquote",1),m.markup=">",m.map=f=[t,0],e.md.block.tokenize(e,t,r),m=e.push("blockquote_close","blockquote",-1),m.markup=">",e.parentType=d,f[1]=e.line,y=0;y<l.length;y++)e.bMarks[y+t]=c[y],e.tShift[y+t]=l[y],e.sCount[y+t]=s[y];return e.blkIndent=u,!0}},function(e,t){"use strict";function n(e,t,n){var i=e.attrIndex(t),a=[t,n];i<0?e.attrPush(a):e.attrs[i]=a}function i(e){return e.block===!0&&"code"===e.tag&&"fence"===e.type}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var r=function(e){e.core.ruler.after("block","tui-code-block",function(e){var t,r,o=e.tokens;for(r=0;r<o.length;r+=1)t=o[r],i(t)&&t.info&&n(t,"data-language",a(t.info.replace(" ",""),!0))})};e.exports=r},function(e,t){"use strict";e.exports=function(e,t,n){var i,a,r,o=/ {0,3}(?:-|\*|\d\.) /,l=e.src.split("\n"),s=l[t],c=0;if(s.match(o)||e.sCount[t]-e.blkIndent<4)return!1;for(a=i=t+1;i<n;)if(e.isEmpty(i)){if(c++,c>=2&&"list"===e.parentType)break;i++}else{if(c=0,!(e.sCount[i]-e.blkIndent>=4))break;i++,a=i}return e.line=a,r=e.push("code_block","code",0),r.content=e.getLines(t,a,4+e.blkIndent,!0),r.map=[t,e.line],!0}},function(e,t){"use strict";var n=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^<("+n.join("|")+")","i"),/^\/?>$/,!0],[new RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|pre|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)\s*$/,/^$/,!1]];e.exports=function(e,t,n,a){var r,o,l,s,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(s=e.src.slice(c,u),r=0;r<i.length;r++)if(i[r][0].test(s)){if(5===r)return!1;break}if(r===i.length)return!1;if(a)return i[r][2];if(o=t+1,!i[r][1].test(s))for(;o<n&&!(e.sCount[o]<e.blkIndent);o++)if(c=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],s=e.src.slice(c,u),i[r][1].test(s)){0!==s.length&&o++;break}return e.line=o,l=e.push("html_block","",0),l.map=[t,o],l.content=e.getLines(t,o,e.blkIndent,!0),!0}},function(e,t){"use strict";function n(e,t){var n=e.bMarks[t]+e.blkIndent,i=e.eMarks[t];return e.src.substr(n,i-n)}function i(e){var t,n=[],i=0,a=e.length,r=0,o=0,l=!1,s=0;for(t=e.charCodeAt(i);i<a;)96===t&&r%2===0?(l=!l,s=i):124!==t||r%2!==0||l?92===t?r+=1:r=0:(n.push(e.substring(o,i)),o=i+1),i+=1,i===a&&l&&(l=!1,i=s+1),t=e.charCodeAt(i);return n.push(e.substring(o)),n}e.exports=function(e,t,a,r){var o,l,s,c,u,d,f,h,g,v,p,m,y;if(t+2>a)return!1;if(u=t+1,e.sCount[u]<e.blkIndent)return!1;if(s=e.bMarks[u]+e.tShift[u],s>=e.eMarks[u])return!1;if(o=e.src.charCodeAt(s),124!==o&&45!==o&&58!==o)return!1;if(l=n(e,t+1),!/^[-:| ]+$/.test(l))return!1;for(d=l.split("|"),g=[],c=0;c<d.length;c+=1){if(p=d[c].trim(),!p){if(0===c||c===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;58===p.charCodeAt(p.length-1)?g.push(58===p.charCodeAt(0)?"center":"right"):58===p.charCodeAt(0)?g.push("left"):g.push("")}if(v=g.length,l=n(e,t).trim(),l.indexOf("|")===-1)return!1;if(d=i(l.replace(/^\||\|$/g,"")),f=d.length,f>v)return!1;if(f<v){for(c=0;c<v-f;c+=1)d.push("");f=d.length}if(r)return!0;for(h=e.push("table_open","table",1),h.map=m=[t,0],h=e.push("thead_open","thead",1),h.map=[t,t+1],h=e.push("tr_open","tr",1),h.map=[t,t+1],c=0;c<f;c+=1)h=e.push("th_open","th",1),h.map=[t,t+1],g[c]&&(h.attrs=[["align",g[c]]]),h=e.push("inline","",0),h.content=d[c].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),h=e.push("tbody_open","tbody",1),h.map=y=[t+2,0],u=t+2;u<a&&!(e.sCount[u]<e.blkIndent)&&(l=n(e,u),l.indexOf("|")!==-1);u+=1){for(d=i(l.replace(/^\||\|\s*$/g,"")),h=e.push("tr_open","tr",1),c=0;c<f;c+=1)h=e.push("td_open","td",1),g[c]&&(h.attrs=[["align",g[c]]]),h=e.push("inline","",0),h.content=d[c]?d[c].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),m[1]=y[1]=u,e.line=u,!0}},function(e,t){"use strict";function n(e){e.content=e.content.slice(4),e.children[0].content=e.children[0].content.slice(4)}function i(e){var t=!1;return 0!==e.content.indexOf("[x]")&&0!==e.content.indexOf("[X]")||(t=!0),t}function a(e,t,n){var i=e.attrIndex(t),a=[t,n];i<0?e.attrPush(a):e.attrs[i]=a}function r(e,t){return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===e[t].content.indexOf("[ ]")||0===e[t].content.indexOf("[x]")||0===e[t].content.indexOf("[X]"))}var o=function(e){e.core.ruler.after("inline","tui-task-list",function(e){var t,o,l="task-list-item",s="checked",c=e.tokens;for(o=2;o<c.length;o+=1)r(c,o)&&(t=i(c[o])?l+" "+s:l,n(c[o]),a(c[o-2],"class",t),a(c[o-2],"data-te-task",""))})};e.exports=o},function(e,t){"use strict";function n(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=-1,r=1,o=0;n.Diff,n.prototype.diff_main=function(e,t,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[o,e]]:[];"undefined"==typeof n&&(n=!0);var r=n,l=this.diff_commonPrefix(e,t),s=e.substring(0,l);e=e.substring(l),t=t.substring(l),l=this.diff_commonSuffix(e,t);var c=e.substring(e.length-l);e=e.substring(0,e.length-l),t=t.substring(0,t.length-l);var u=this.diff_compute_(e,t,r,a);return s&&u.unshift([o,s]),c&&u.push([o,c]),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,n,i){var l;if(!e)return[[r,t]];if(!t)return[[a,e]];var s=e.length>t.length?e:t,c=e.length>t.length?t:e,u=s.indexOf(c);if(u!=-1)return l=[[r,s.substring(0,u)],[o,c],[r,s.substring(u+c.length)]],e.length>t.length&&(l[0][0]=l[2][0]=a),l;if(1==c.length)return[[a,e],[r,t]];var d=this.diff_halfMatch_(e,t);if(d){var f=d[0],h=d[1],g=d[2],v=d[3],p=d[4],m=this.diff_main(f,g,n,i),y=this.diff_main(h,v,n,i);return m.concat([[o,p]],y)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},n.prototype.diff_lineMode_=function(e,t,n){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var l=i.lineArray,s=this.diff_main(e,t,!1,n);this.diff_charsToLines_(s,l),this.diff_cleanupSemantic(s),s.push([o,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case r:d++,h+=s[c][1];break;case a:u++,f+=s[c][1];break;case o:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var i=this.diff_main(f,h,!1,n),g=i.length-1;g>=0;g--)s.splice(c,0,i[g]);c+=i.length}d=0,u=0,f="",h=""}c++}return s.pop(),s},n.prototype.diff_bisect_=function(e,t,n){for(var i=e.length,o=t.length,l=Math.ceil((i+o)/2),s=l,c=2*l,u=new Array(c),d=new Array(c),f=0;f<c;f++)u[f]=-1,d[f]=-1;u[s+1]=0,d[s+1]=0;for(var h=i-o,g=h%2!=0,v=0,p=0,m=0,y=0,b=0;b<l&&!((new Date).getTime()>n);b++){for(var w=-b+v;w<=b-p;w+=2){var k,_=s+w;k=w==-b||w!=b&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1;for(var C=k-w;k<i&&C<o&&e.charAt(k)==t.charAt(C);)k++,C++;if(u[_]=k,k>i)p+=2;else if(C>o)v+=2;else if(g){var E=s+h-w;if(E>=0&&E<c&&d[E]!=-1){var T=i-d[E];if(k>=T)return this.diff_bisectSplit_(e,t,k,C,n)}}}for(var M=-b+m;M<=b-y;M+=2){var T,E=s+M;T=M==-b||M!=b&&d[E-1]<d[E+1]?d[E+1]:d[E-1]+1;for(var x=T-M;T<i&&x<o&&e.charAt(i-T-1)==t.charAt(o-x-1);)T++,x++;if(d[E]=T,T>i)y+=2;else if(x>o)m+=2;else if(!g){var _=s+h-M;if(_>=0&&_<c&&u[_]!=-1){var k=u[_],C=s+k-_;if(T=i-T,k>=T)return this.diff_bisectSplit_(e,t,k,C,n)}}}}return[[a,e],[r,t]]},n.prototype.diff_bisectSplit_=function(e,t,n,i,a){var r=e.substring(0,n),o=t.substring(0,i),l=e.substring(n),s=t.substring(i),c=this.diff_main(r,o,!1,a),u=this.diff_main(l,s,!1,a);return c.concat(u)},n.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,r=-1,o=i.length;r<e.length-1;){r=e.indexOf("\n",n),r==-1&&(r=e.length-1);var l=e.substring(n,r+1);n=r+1,(a.hasOwnProperty?a.hasOwnProperty(l):void 0!==a[l])?t+=String.fromCharCode(a[l]):(t+=String.fromCharCode(o),a[l]=o,i[o++]=l)}return t}var i=[],a={};i[0]="";var r=n(e),o=n(t);return{chars1:r,chars2:o,lineArray:i}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],a=[],r=0;r<i.length;r++)a[r]=t[i.charCodeAt(r)];e[n][1]=a.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),a=i,r=0;n<a;)e.substring(r,a)==t.substring(r,a)?(n=a,r=n):i=a,a=Math.floor((i-n)/2+n);return a},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),a=i,r=0;n<a;)e.substring(e.length-a,e.length-r)==t.substring(t.length-a,t.length-r)?(n=a,r=n):i=a,a=Math.floor((i-n)/2+n);return a},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var a=Math.min(n,i);if(e==t)return a;for(var r=0,o=1;;){var l=e.substring(a-o),s=t.indexOf(l);if(s==-1)return r;o+=s,0!=s&&e.substring(a-o)!=t.substring(0,o)||(r=o,o++)}},n.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var i,a,r,l,s=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";(c=t.indexOf(s,c+1))!=-1;){var d=o.diff_commonPrefix(e.substring(n),t.substring(c)),f=o.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<f+d&&(u=t.substring(c-f,c)+t.substring(c,c+d),i=e.substring(0,n-f),a=e.substring(n+d),r=t.substring(0,c-f),l=t.substring(c+d))}return 2*u.length>=e.length?[i,a,r,l,u]:null}if(this.Diff_Timeout<=0)return null;var i=e.length>t.length?e:t,a=e.length>t.length?t:e;if(i.length<4||2*a.length<i.length)return null;var r,o=this,l=n(i,a,Math.ceil(i.length/4)),s=n(i,a,Math.ceil(i.length/2));if(!l&&!s)return null;r=s?l&&l[4].length>s[4].length?l:s:l;var c,u,d,f;e.length>t.length?(c=r[0],u=r[1],d=r[2],f=r[3]):(d=r[0],f=r[1],c=r[2],u=r[3]);var h=r[4];return[c,u,d,f,h]},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],i=0,l=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]==o?(n[i++]=s,c=d,u=f,d=0,f=0,l=e[s][1]):(e[s][0]==r?d+=e[s][1].length:f+=e[s][1].length,l&&l.length<=Math.max(c,u)&&l.length<=Math.max(d,f)&&(e.splice(n[i-1],0,[a,l]),e[n[i-1]+1][0]=r,i--,i--,s=i>0?n[i-1]:-1,c=0,u=0,d=0,f=0,l=null,t=!0)),s++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]==a&&e[s][0]==r){var h=e[s-1][1],g=e[s][1],v=this.diff_commonOverlap_(h,g),p=this.diff_commonOverlap_(g,h);v>=p?(v>=h.length/2||v>=g.length/2)&&(e.splice(s,0,[o,g.substring(0,v)]),e[s-1][1]=h.substring(0,h.length-v),e[s+1][1]=g.substring(v),s++):(p>=h.length/2||p>=g.length/2)&&(e.splice(s,0,[o,h.substring(0,p)]),e[s-1][0]=r,e[s-1][1]=g.substring(0,g.length-p),e[s+1][0]=a,e[s+1][1]=h.substring(p),s++),s++}s++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var i=e.charAt(e.length-1),a=t.charAt(0),r=i.match(n.nonAlphaNumericRegex_),o=a.match(n.nonAlphaNumericRegex_),l=r&&i.match(n.whitespaceRegex_),s=o&&a.match(n.whitespaceRegex_),c=l&&i.match(n.linebreakRegex_),u=s&&a.match(n.linebreakRegex_),d=c&&e.match(n.blanklineEndRegex_),f=u&&t.match(n.blanklineStartRegex_);return d||f?5:c||u?4:r&&!l&&s?3:l||s?2:r||o?1:0}for(var i=1;i<e.length-1;){if(e[i-1][0]==o&&e[i+1][0]==o){var a=e[i-1][1],r=e[i][1],l=e[i+1][1],s=this.diff_commonSuffix(a,r);if(s){var c=r.substring(r.length-s);a=a.substring(0,a.length-s),r=c+r.substring(0,r.length-s),l=c+l}for(var u=a,d=r,f=l,h=t(a,r)+t(r,l);r.charAt(0)===l.charAt(0);){a+=r.charAt(0),r=r.substring(1)+l.charAt(0),l=l.substring(1);var g=t(a,r)+t(r,l);g>=h&&(h=g,u=a,d=r,f=l)}e[i-1][1]!=u&&(u?e[i-1][1]=u:(e.splice(i-1,1),i--),e[i][1]=d,f?e[i+1][1]=f:(e.splice(i+1,1),i--))}i++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,l=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]==o?(e[s][1].length<this.Diff_EditCost&&(d||f)?(n[i++]=s,c=d,u=f,l=e[s][1]):(i=0,l=null),d=f=!1):(e[s][0]==a?f=!0:d=!0,l&&(c&&u&&d&&f||l.length<this.Diff_EditCost/2&&c+u+d+f==3)&&(e.splice(n[i-1],0,[a,l]),e[n[i-1]+1][0]=r,i--,l=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?n[i-1]:-1,d=f=!1),t=!0)),s++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push([o,""]);for(var t,n=0,i=0,l=0,s="",c="";n<e.length;)switch(e[n][0]){case r:l++,c+=e[n][1],n++;break;case a:i++,s+=e[n][1],n++;break;case o:i+l>1?(0!==i&&0!==l&&(t=this.diff_commonPrefix(c,s),0!==t&&(n-i-l>0&&e[n-i-l-1][0]==o?e[n-i-l-1][1]+=c.substring(0,t):(e.splice(0,0,[o,c.substring(0,t)]),n++),c=c.substring(t),s=s.substring(t)),t=this.diff_commonSuffix(c,s),0!==t&&(e[n][1]=c.substring(c.length-t)+e[n][1],c=c.substring(0,c.length-t),s=s.substring(0,s.length-t))),0===i?e.splice(n-l,i+l,[r,c]):0===l?e.splice(n-i,i+l,[a,s]):e.splice(n-i-l,i+l,[a,s],[r,c]),n=n-i-l+(i?1:0)+(l?1:0)+1):0!==n&&e[n-1][0]==o?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,i=0,s="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]==o&&e[n+1][0]==o&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,i=0,o=0,l=0,s=0;for(n=0;n<e.length&&(e[n][0]!==r&&(i+=e[n][1].length),e[n][0]!==a&&(o+=e[n][1].length),!(i>t));n++)l=i,s=o;return e.length!=n&&e[n][0]===a?s:s+(t-l)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,l=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(n,"&amp;").replace(i,"&lt;").replace(l,"&gt;").replace(s,"&para;<br>");switch(u){case r:t[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case a:t[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case o:t[c]="<span>"+f+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==r&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==a&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,l=0;l<e.length;l++){var s=e[l][0],c=e[l][1];switch(s){case r:n+=c.length;break;case a:i+=c.length;break;case o:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case r:t[n]="+"+encodeURI(e[n][1]);break;case a:t[n]="-"+e[n][1].length;break;case o:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var n=[],i=0,l=0,s=t.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{n[i++]=[r,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(l,l+=d);"="==s[c].charAt(0)?n[i++]=[o,f]:n[i++]=[a,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(l!=e.length)throw new Error("Delta length ("+l+") does not equal source text length ("+e.length+").");return n},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){function i(e,i){var a=e/t.length,o=Math.abs(n-i);return r.Match_Distance?a+o/r.Match_Distance:o?1:a}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(t),r=this,o=this.Match_Threshold,l=e.indexOf(t,n);l!=-1&&(o=Math.min(i(0,l),o),l=e.lastIndexOf(t,n+t.length),l!=-1&&(o=Math.min(i(0,l),o)));var s=1<<t.length-1;l=-1;for(var c,u,d,f=t.length+e.length,h=0;h<t.length;h++){for(c=0,u=f;c<u;)i(h,n+u)<=o?c=u:f=u,u=Math.floor((f-c)/2+c);f=u;var g=Math.max(1,n-u+1),v=Math.min(n+u,e.length)+t.length,p=Array(v+2);p[v+1]=(1<<h)-1;for(var m=v;m>=g;m--){var y=a[e.charAt(m-1)];if(0===h?p[m]=(p[m+1]<<1|1)&y:p[m]=(p[m+1]<<1|1)&y|((d[m+1]|d[m])<<1|1)|d[m+1],p[m]&s){var b=i(h,m-1);if(b<=o){if(o=b,l=m-1,!(l>n))break;g=Math.max(1,2*n-l)}}}if(i(h+1,n)>o)break;d=p}return l},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var a=t.substring(e.start2-i,e.start2);a&&e.diffs.unshift([o,a]);var r=t.substring(e.start2+e.length1,e.start2+e.length1+i);r&&e.diffs.push([o,r]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+r.length,e.length2+=a.length+r.length}},n.prototype.patch_make=function(e,t,l){var s,c;if("string"==typeof e&&"string"==typeof t&&"undefined"==typeof l)s=e,c=this.diff_main(s,t,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(e&&"object"==("undefined"==typeof e?"undefined":i(e))&&"undefined"==typeof t&&"undefined"==typeof l)c=e,s=this.diff_text1(c);else if("string"==typeof e&&t&&"object"==("undefined"==typeof t?"undefined":i(t))&&"undefined"==typeof l)s=e,c=t;else{if("string"!=typeof e||"string"!=typeof t||!l||"object"!=("undefined"==typeof l?"undefined":i(l)))throw new Error("Unknown call format to patch_make.");s=e,c=l}if(0===c.length)return[];for(var u=[],d=new n.patch_obj,f=0,h=0,g=0,v=s,p=s,m=0;m<c.length;m++){var y=c[m][0],b=c[m][1];switch(f||y===o||(d.start1=h,d.start2=g),y){case r:d.diffs[f++]=c[m],d.length2+=b.length,p=p.substring(0,g)+b+p.substring(g);break;case a:d.length1+=b.length,d.diffs[f++]=c[m],p=p.substring(0,g)+p.substring(g+b.length);break;case o:b.length<=2*this.Patch_Margin&&f&&c.length!=m+1?(d.diffs[f++]=c[m],d.length1+=b.length,d.length2+=b.length):b.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(d,v),u.push(d),d=new n.patch_obj,f=0,v=p,h=g)}y!==r&&(h+=b.length),y!==a&&(g+=b.length)}return f&&(this.patch_addContext_(d,v),u.push(d)),u},n.prototype.patch_deepCopy=function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],r=new n.patch_obj;r.diffs=[];for(var o=0;o<a.diffs.length;o++)r.diffs[o]=a.diffs[o].slice();r.start1=a.start1,r.start2=a.start2,r.length1=a.length1,r.length2=a.length2,t[i]=r}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,l=[],s=0;s<e.length;s++){var c,u=e[s].start2+i,d=this.diff_text1(e[s].diffs),f=-1;if(d.length>this.Match_MaxBits?(c=this.match_main(t,d.substring(0,this.Match_MaxBits),u),c!=-1&&(f=this.match_main(t,d.substring(d.length-this.Match_MaxBits),u+d.length-this.Match_MaxBits),(f==-1||c>=f)&&(c=-1))):c=this.match_main(t,d,u),c==-1)l[s]=!1,i-=e[s].length2-e[s].length1;else{l[s]=!0,i=c-u;var h;if(h=f==-1?t.substring(c,c+d.length):t.substring(c,f+this.Match_MaxBits),d==h)t=t.substring(0,c)+this.diff_text2(e[s].diffs)+t.substring(c+d.length);else{var g=this.diff_main(d,h,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(g)/d.length>this.Patch_DeleteThreshold)l[s]=!1;else{this.diff_cleanupSemanticLossless(g);for(var v,p=0,m=0;m<e[s].diffs.length;m++){var y=e[s].diffs[m];y[0]!==o&&(v=this.diff_xIndex(g,p)),y[0]===r?t=t.substring(0,c+v)+y[1]+t.substring(c+v):y[0]===a&&(t=t.substring(0,c+v)+t.substring(c+this.diff_xIndex(g,p+y[1].length))),y[0]!==a&&(p+=y[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,l]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var a=e[0],r=a.diffs;if(0==r.length||r[0][0]!=o)r.unshift([o,n]),a.start1-=t,a.start2-=t,a.length1+=t,a.length2+=t;else if(t>r[0][1].length){var l=t-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],a.start1-=l,a.start2-=l,a.length1+=l,a.length2+=l}if(a=e[e.length-1],r=a.diffs,0==r.length||r[r.length-1][0]!=o)r.push([o,n]),a.length1+=t,a.length2+=t;else if(t>r[r.length-1][1].length){var l=t-r[r.length-1][1].length;r[r.length-1][1]+=n.substring(0,l),a.length1+=l,a.length2+=l}return n},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var l=e[i];e.splice(i--,1);for(var s=l.start1,c=l.start2,u="";0!==l.diffs.length;){var d=new n.patch_obj,f=!0;for(d.start1=s-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([o,u]));0!==l.diffs.length&&d.length1<t-this.Patch_Margin;){var h=l.diffs[0][0],g=l.diffs[0][1];h===r?(d.length2+=g.length,c+=g.length,d.diffs.push(l.diffs.shift()),f=!1):h===a&&1==d.diffs.length&&d.diffs[0][0]==o&&g.length>2*t?(d.length1+=g.length,s+=g.length,f=!1,d.diffs.push([h,g]),l.diffs.shift()):(g=g.substring(0,t-d.length1-this.Patch_Margin),d.length1+=g.length,s+=g.length,h===o?(d.length2+=g.length,c+=g.length):f=!1,d.diffs.push([h,g]),g==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(g.length))}u=this.diff_text2(d.diffs),u=u.substring(u.length-this.Patch_Margin);var v=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);""!==v&&(d.length1+=v.length,d.length2+=v.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===o?d.diffs[d.diffs.length-1][1]+=v:d.diffs.push([o,v])),f||e.splice(++i,0,d)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var i=e.split("\n"),l=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<i.length;){var c=i[l].match(s);if(!c)throw new Error("Invalid patch string: "+i[l]);var u=new n.patch_obj;for(t.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),l++;l<i.length;){var d=i[l].charAt(0);try{var f=decodeURI(i[l].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+f)}if("-"==d)u.diffs.push([a,f]);else if("+"==d)u.diffs.push([r,f]);else if(" "==d)u.diffs.push([o,f]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+f)}l++}}return t},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,i=["@@ -"+e+" +"+t+" @@\n"],l=0;l<this.diffs.length;l++){switch(this.diffs[l][0]){case r:n="+";break;case a:n="-";break;case o:n=" "}i[l+1]=n+encodeURI(this.diffs[l][1])+"\n"}return i.join("").replace(/%20/g," ")},e.exports=n;
},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(14),l=i(o),s=n(12),c=i(s),u=n(1),d=i(u),f=n(7),h=i(f),g=n(11),v=i(g),p=n(8),m=i(p),y=tui.util,b="data-te-task",w="checked",k=function(){function e(t){var n=this;a(this,e),this.options=t,this.eventManager=new c.default,this.commandManager=new d.default(this),this.convertor=new v.default(this.eventManager),this.codeBlockManager=m.default,this.toMarkOptions=null,this.options.hooks&&y.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&y.forEach(this.options.events,function(e,t){n.on(t,e)}),this.preview=new l.default($(this.options.el),this.eventManager,this.convertor,!0),this.preview.$el.on("mousedown",$.proxy(this._toggleTask,this)),h.default.applyExtension(this,this.options.exts),this.setValue(this.options.initialValue),this.eventManager.emit("load",this)}return r(e,[{key:"_toggleTask",value:function(e){var t=e.offsetX<18&&e.offsetY>18;e.target.hasAttribute(b)&&!t&&($(e.target).toggleClass(w),this.eventManager.emit("change",{source:"viewOnly",data:e}))}},{key:"setMarkdown",value:function(e){this.markdownValue=e=e||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setMarkdownAfter",this.markdownValue)}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"remove",value:function(){this.eventManager.emit("removeEditor"),this.preview.$el.off("mousedown",$.proxy(this._toggleTask,this)),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"isViewOnly",value:function(){return!0}},{key:"isMarkdownMode",value:function(){return!1}},{key:"isWysiwygMode",value:function(){return!1}}]),e}();e.exports=k},function(e,t){},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){n(this,e),this._managers={},this._editor=t}return i(e,[{key:"addManager",value:function(e,t){t||(t=e,e=null);var n=new t(this._editor);this._managers[e||n.name]=n}},{key:"getManager",value:function(e){return this._managers[e]}},{key:"removeManager",value:function(e){var t=this.getManager(e);t&&(t.destroy&&t.destroy(),delete this._managers[e])}}]),e}();e.exports=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","","","","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","@","!",'"',"#","$","%","&","_","(",")","*","+","|","-","{","}","~","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","-",".","/","`","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","'","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""],r=void 0,o=function(){function e(t){n(this,e),this._setSplitter(t)}return i(e,[{key:"_setSplitter",value:function(e){var t=e?e.splitter:"+";this._splitter=t}},{key:"convert",value:function(e){var t=[];e.shiftKey&&t.push("SHIFT"),e.ctrlKey&&t.push("CTRL"),e.metaKey&&t.push("META"),e.altKey&&t.push("ALT");var n=this._getKeyCodeChar(e.keyCode);return n&&t.push(n),t.join(this._splitter)}},{key:"_getKeyCodeChar",value:function(e){var t=a[e];return t}}],[{key:"getSharedInstance",value:function(){return r||(r=new e),r}}]),e}();e.exports=o},function(e,t,n){"use strict";function i(e){a.call(this,{tagName:"button",className:e.className+" tui-toolbar-icons",rootElement:e.$el}),this._setOptions(e),this.render(),this.attachEvents({click:"_onClick"}),e.tooltip&&this.attachEvents({mouseover:"_onOver",mouseout:"_onOut"})}var a=n(10),r=n(99),o=tui.util,l=new r;i.prototype=o.extend({},a.prototype),i.prototype._setOptions=function(e){this.command=e.command,this.event=e.event,this.text=e.text,this.tooltip=e.tooltip,this.style=e.style,this.state=e.state},i.prototype.render=function(){this.$el.text(this.text),this.$el.attr("type","button"),this.style&&this.$el.attr("style",this.style)},i.prototype._onClick=function(){this.command?this.trigger("command",this.command):this.trigger("event",this.event),this.trigger("clicked")},i.prototype._onOver=function(){l.show(this.$el,this.tooltip)},i.prototype._onOut=function(){l.hide()},e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){o.default.call(this,{tagName:"div",className:"te-tab"}),e=c.extend({},e),this.items=e.items,this.sections=e.sections,this._$activeButton=null,this.render(),this._initItemClickEvent(e.onItemClick),this._applyInitName(e.initName)}var r=n(10),o=i(r),l=n(97),s=i(l),c=tui.util,u='<button type="button" data-index="${index}">${name}</button>';a.prototype=c.extend({},o.default.prototype),a.prototype.render=function(){var e=(0,s.default)(u,this._getButtonData());this.$el.html(e),this.attachEvents({"click button":"_onButtonClick"})},a.prototype._applyInitName=function(e){e&&this.activate(e)},a.prototype._getButtonData=function(){for(var e=[],t=0,n=this.items.length;t<n;t+=1)e.push({name:this.items[t],index:t});return e},a.prototype._onButtonClick=function(e){var t=$(e.target);this._activateTabByButton(t),this.trigger("itemClick",t.text())},a.prototype._deactivate=function(){this._$activeButton&&(this._$activeButton.removeClass("te-tab-active"),this.sections&&this.sections[this._$activeButton.attr("data-index")].removeClass("te-tab-active"))},a.prototype._activateButton=function(e){this._$activeButton=e,this._$activeButton.addClass("te-tab-active")},a.prototype._activateSection=function(e){this.sections&&this.sections[e].addClass("te-tab-active")},a.prototype.activate=function(e){var t=this.$el.find('button:contains("'+e+'")');this._activateTabByButton(t)},a.prototype._activateTabByButton=function(e){this._isActivatedButton(e)||(this._deactivate(),this._activateButton(e),this._activateSection(e.attr("data-index")))},a.prototype._isActivatedButton=function(e){return this._$activeButton&&this._$activeButton.text()===e.text()},a.prototype._initItemClickEvent=function(e){e&&this.on("itemClick",e)},e.exports=a},function(e,t){"use strict";function n(e){return i(e)&&e.anchor.ch===e.head.ch}function i(e){return e.anchor.line===e.head.line}function a(e,t,i,a){var r=e.getLine(i.line),o=e.getLine(i.line+a),l={anchor:t,head:i};e.replaceRange(o,{line:i.line,ch:0},{line:i.line,ch:r.length},"+input"),e.replaceRange(r,{line:i.line+a,ch:0},{line:i.line+a,ch:o.length},"+input"),n(l)?e.setCursor({line:i.line+a,ch:i.ch}):e.setSelection({line:t.line+a,ch:t.ch},{line:i.line+a,ch:i.ch})}function r(e,t,n,i){var a=e.getRange({line:t.line,ch:0},{line:n.line,ch:e.getLine(n.line).length}),r=i>0?n:t,o=e.getLine(r.line+i),l=void 0;l=i>0?t:n,e.replaceRange(o,{line:l.line,ch:0},{line:l.line,ch:e.getLine(l.line).length},"+input"),e.replaceRange(a,{line:t.line+i,ch:0},{line:n.line+i,ch:e.getLine(n.line+i).length},"+input"),e.setSelection({line:t.line+i,ch:t.ch},{line:n.line+i,ch:n.ch})}CodeMirror.commands.replaceLineTextToUpper=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),o=-1,l=0;l<t.length;l++){var s=t[l],c=s.anchor,u=s.head;if(i(s)&&u.line>0)a(e,c,u,o);else if(!n(s)){var d=c.line<u.line?c.line:u.line;if(d>0){var f=c.line===d?c:u,h=c.line===d?u:c;r(e,f,h,o)}}}},CodeMirror.commands.replaceLineTextToLower=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),o=1,l=0;l<t.length;l++){var s=t[l],c=s.anchor,u=s.head,d=u.line===e.lastLine();if(i(s)&&!d)a(e,c,u,o);else if(!n(s)){var f=c.line<u.line?c.line:u.line,h=c.line===f?c:u,g=c.line===f?u:c;g.line<e.lastLine()&&r(e,h,g,o)}}}},function(e,t){"use strict";var n=/^(\s*)(>[> ]*|[*+-]\s(?:\[(?:x|\s)\]\s)?|(\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(\s*)/,i=/^(\s*)(>[> ]*|[*+-]\s(?:\[(?:x|\s)\]\s)?|(\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(\s*)$/,a=/^ *(`{3,}|~{3,})[ \.]*\S+ */,r=/[*+-]\s/;CodeMirror.commands.subListIndentTab=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),i=0;i<t.length;i++){var a=t[i].head,r=e.getLine(a.line),o=r.substr(0,a.ch);n.test(o)?(e.replaceRange(Array(e.getOption("indentUnit")+1).join(" ")+r,{line:a.line,ch:0},{line:a.line,ch:r.length},"+input"),e.setCursor(a.line,a.ch+4)):e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertSoftTab")}},CodeMirror.commands.newlineAndIndentContinue=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),o=[],l=0;l<t.length;l++){var s=t[l].head,c=e.getStateAfter(s.line),u=c.base.list!==!1,d=0!==c.base.quote,f=e.getLine(s.line),h=a.test(f),g=n.exec(f),v=e.getCursor();if(!t[l].empty()||!u&&!d&&!h||!g&&!h)return void e.execCommand("newlineAndIndent");if(h&&(v=e.getCursor(),v.line!==s.line||v.ch!==f.length))return void e.execCommand("newlineAndIndent");if(i.test(f)&&v.ch>0)e.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:f.length}),o[l]="\n";else if(h)o[l]="\n\n```";else{var p,m=g[1],y=g[5];p=m.length===s.ch?"":r.test(g[2])||g[2].indexOf(">")>=0?g[2]:parseInt(g[3],10)+1+g[4],o[l]="\n"+m+p+y}}e.replaceSelections(o),h&&e.setCursor(s.line+1,0)}},function(e,t){"use strict";CodeMirror.defineMode("gfm",function(e,t){function n(e){return e.code=!1,null}var i=0,a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?(t.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;if("`"===e.peek()){e.next();var n=e.pos;e.eatWhile("`");var a=1+e.pos-n;return t.code?a===i&&(t.code=!1):(i=a,t.code=!0),null}return t.code?(e.next(),null):e.eatSpace()?(t.ateSpace=!0,null):((e.sol()||t.ateSpace)&&(t.ateSpace=!1),e.next(),null)},blankLine:n},r={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var o in t)r[o]=t[o];return r.name="markdown",CodeMirror.overlayMode(CodeMirror.getMode(e,r),a)},"markdown"),CodeMirror.defineMIME("text/x-gfm","gfm")},function(e,t){"use strict";CodeMirror.defineMode("markdown",function(e,t){function n(t){if(CodeMirror.findModeByName){var n=CodeMirror.findModeByName(t);n&&(t=n.mime||n.mimes[0])}var i=CodeMirror.getMode(e,t);return"null"==i.name?null:i}function i(e,t,n){return t.f=t.inline=n,n(e,t)}function a(e){return!e||!/\S/.test(e.string)}function r(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,w||e.f!=l||(e.f=f,e.block=o),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function o(e,r){var o=e.sol(),l=r.list!==!1,c=r.indentedCode;r.indentedCode=!1,l&&(r.indentationDiff>=0&&(r.indentationDiff<4&&(r.indentation-=r.indentationDiff),r.list=null),r.indentation>0?(r.list=null,r.listDepth=Math.floor(r.indentation/4)+1):(r.list=!1,r.listDepth=0));var d=null;if(r.indentationDiff>=4)return e.skipToEnd(),c||a(r.prevLine)?(r.indentation-=4,r.indentedCode=!0,E):null;if(e.eatSpace())return null;if((d=e.match(j))&&d[1].length<=6)return r.header=d[1].length,t.highlightFormatting&&(r.formatting="header"),r.f=r.inline,u(r);if(!(a(r.prevLine)||r.quote||l||c)&&(d=e.match(V)))return r.header="="==d[0].charAt(0)?1:2,t.highlightFormatting&&(r.formatting="header"),r.f=r.inline,u(r);if(e.eat(">"))return r.quote=o?1:r.quote+1,t.highlightFormatting&&(r.formatting="quote"),e.eatSpace(),u(r);if("["===e.peek())return i(e,r,p);if(e.match(H,!0))return r.hr=!0,I;if((a(r.prevLine)||l)&&(e.match(F,!1)||e.match(U,!1))){var f=null;return e.match(F,!0)?f="ul":(e.match(U,!0),f="ol"),r.indentation=e.column()+e.current().length,r.list=!0,r.listDepth++,t.taskLists&&e.match(W,!1)&&(r.taskList=!0,r.task=!0),r.f=r.inline,t.highlightFormatting&&(r.formatting=["list","list-"+f]),u(r)}return t.fencedCodeBlocks&&(d=e.match(q,!0))?(r.fencedChars=d[1],r.localMode=n(d[2]),r.localMode&&(r.localState=r.localMode.startState()),r.f=r.block=s,t.highlightFormatting&&(r.formatting="code-block"),r.code=!0,u(r)):i(e,r,r.inline)}function l(e,t){var n=k.token(e,t.htmlState);return(w&&null===t.htmlState.tagStart&&!t.htmlState.context&&t.htmlState.tokenize.isInText||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=f,t.block=o,t.htmlState=null),n}function s(e,t){return e.sol()&&t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=c,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),E)}function c(e,n){e.match(n.fencedChars),n.block=o,n.f=f,n.fencedChars=null,t.highlightFormatting&&(n.formatting="code-block"),n.code=!0;var i=u(n);return n.code=!1,i}function u(e){var n=[];if(e.formatting){n.push(A),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)n.push(A+"-"+e.formatting[i]),"header"===e.formatting[i]&&n.push(A+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&(!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(A+"-"+e.formatting[i]+"-"+e.quote):n.push("error"))}if(e.taskOpen)return n.push("meta"),n.length?n.join(" "):null;if(e.taskClosed)return n.push("property"),n.length?n.join(" "):null;if(e.linkHref?n.push(R,"url"):(e.strong&&n.push(D),e.em&&n.push(O),e.strikethrough&&n.push(P),e.linkText&&n.push(L),e.code&&n.push(E)),e.header&&(n.push(C),n.push(C+"-"+e.header)),e.quote&&(n.push(T),!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(T+"-"+e.quote):n.push(T+"-"+t.maxBlockquoteDepth)),e.list!==!1){var a=(e.listDepth-1)%3;a?1===a?n.push(x):n.push(S):n.push(M)}return e.trailingSpaceNewLine?n.push("trailing-space-new-line"):e.trailingSpace&&n.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),n.length?n.join(" "):null}function d(e,t){if(e.match(K,!0))return u(t)}function f(e,n){var i=n.text(e,n);if("undefined"!=typeof i)return i;if(n.list)return n.list=null,u(n);if(n.taskList){var a="x"!==e.match(W,!0)[1];return a?n.taskOpen=!0:n.taskClosed=!0,t.highlightFormatting&&(n.formatting="task"),n.taskList=!1,u(n)}if(n.taskOpen=!1,n.taskClosed=!1,n.header&&e.match(/^#+$/,!0))return t.highlightFormatting&&(n.formatting="header"),u(n);var r=e.sol(),o=e.next();if("\\"===o&&(e.next(),t.highlightFormatting)){var l=u(n);return l?l+" formatting-escape":"formatting-escape"}if(n.linkTitle){n.linkTitle=!1;var s=o;"("===o&&(s=")"),s=(s+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var c="^\\s*(?:[^"+s+"\\\\]+|\\\\\\\\|\\\\.)"+s;if(e.match(new RegExp(c),!0))return R}if("`"===o){var d=n.formatting;t.highlightFormatting&&(n.formatting="code");var f=u(n),v=e.pos;e.eatWhile("`");var p=1+e.pos-v;return n.code?p===_?(n.code=!1,f):(n.formatting=d,u(n)):(_=p,n.code=!0,u(n))}if(n.code)return u(n);if("!"===o&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),N;if("["===o&&e.match(/.*\](\(.*\)| ?\[.*\])/,!1))return n.linkText=!0,t.highlightFormatting&&(n.formatting="link"),u(n);if("]"===o&&n.linkText&&e.match(/\(.*\)| ?\[.*\]/,!1)){t.highlightFormatting&&(n.formatting="link");var l=u(n);return n.linkText=!1,n.inline=n.f=g,l}if("<"===o&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=h,t.highlightFormatting&&(n.formatting="link");var l=u(n);return l?l+=" ":l="",l+$}if("<"===o&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=h,t.highlightFormatting&&(n.formatting="link");var l=u(n);return l?l+=" ":l="",l+B}var m=!1;if(!t.underscoresBreakWords&&"_"===o&&"_"!==e.peek()&&e.match(/(\w)/,!1)){var y=e.pos-2;if(y>=0){var b=e.string.charAt(y);"_"!==b&&b.match(/(\w)/,!1)&&(m=!0)}}if("*"===o||"_"===o&&!m)if(r&&" "===e.peek());else{if(n.strong===o&&e.eat(o)){t.highlightFormatting&&(n.formatting="strong");var f=u(n);return n.strong=!1,f}if(!n.strong&&e.eat(o))return n.strong=o,t.highlightFormatting&&(n.formatting="strong"),u(n);if(n.em===o){t.highlightFormatting&&(n.formatting="em");var f=u(n);return n.em=!1,f}if(!n.em)return n.em=o,t.highlightFormatting&&(n.formatting="em"),u(n)}else if(" "===o&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return u(n);e.backUp(1)}if(t.strikethrough)if("~"===o&&e.eatWhile(o)){if(n.strikethrough){t.highlightFormatting&&(n.formatting="strikethrough");var f=u(n);return n.strikethrough=!1,f}if(e.match(/^[^\s]/,!1))return n.strikethrough=!0,t.highlightFormatting&&(n.formatting="strikethrough"),u(n)}else if(" "===o&&e.match(/^~~/,!0)){if(" "===e.peek())return u(n);e.backUp(2)}return" "===o&&(e.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),u(n)}function h(e,n){var i=e.next();if(">"===i){n.f=n.inline=f,t.highlightFormatting&&(n.formatting="link");var a=u(n);return a?a+=" ":a="",a+$}return e.match(/^[^>]+/,!0),$}function g(e,n){if(e.eatSpace())return null;var i=e.next();return"("===i||"["===i?(n.f=n.inline=v("("===i?")":"]"),t.highlightFormatting&&(n.formatting="link-string"),n.linkHref=!0,u(n)):"error"}function v(e){return function(n,i){var a=n.next();if(a===e){i.f=i.inline=f,t.highlightFormatting&&(i.formatting="link-string");var r=u(i);return i.linkHref=!1,r}return n.match(b(e),!0)&&n.backUp(1),i.linkHref=!0,u(i)}}function p(e,n){return e.match(/^[^\]]*\]:/,!1)?(n.f=m,e.next(),t.highlightFormatting&&(n.formatting="link"),n.linkText=!0,u(n)):i(e,n,f)}function m(e,n){if(e.match(/^\]:/,!0)){n.f=n.inline=y,t.highlightFormatting&&(n.formatting="link");var i=u(n);return n.linkText=!1,i}return e.match(/^[^\]]+/,!0),L}function y(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=f,R+" url")}function b(e){return Y[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),Y[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),Y[e]}var w=CodeMirror.modes.hasOwnProperty("xml"),k=CodeMirror.getMode(e,w?{name:"xml",htmlMode:!0}:"text/plain");void 0===t.highlightFormatting&&(t.highlightFormatting=!1),void 0===t.maxBlockquoteDepth&&(t.maxBlockquoteDepth=0),void 0===t.underscoresBreakWords&&(t.underscoresBreakWords=!0),void 0===t.taskLists&&(t.taskLists=!1),void 0===t.strikethrough&&(t.strikethrough=!1);var _=0,C="header",E="comment",T="quote",M="variable-2",x="variable-3",S="keyword",I="hr",N="tag",A="formatting",$="link",B="link",L="link",R="string",O="em",D="strong",P="strikethrough",H=/^([*\-_])(?:\s*\1){2,}\s*$/,F=/^[*\-+]\s+/,U=/^[0-9]+([.)])\s+/,W=/^\[(x| )\](?=\s)/,j=t.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,V=/^ *(?:\={1,}|-{1,})\s*$/,K=/^[^#!\[\]*_\\<>` "'(~]+/,q=new RegExp("^("+(t.fencedCodeBlocks===!0?"~~~+|```+":t.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),Y=[],z={startState:function(){return{f:o,prevLine:null,thisLine:null,block:o,htmlState:null,indentation:0,inline:f,text:d,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,task:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.this,block:e.block,htmlState:e.htmlState&&CodeMirror.copyState(k,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkTitle:e.linkTitle,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,header:e.header,hr:e.hr,taskList:e.taskList,task:e.task,list:e.list,listDepth:e.listDepth,quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedChars:e.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var n=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||n){if(r(t),!n)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.task=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var i=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,a=4*Math.floor((i-t.indentation)/4);a>4&&(a=4);var o=t.indentation+a;if(t.indentationDiff=o-t.indentation,t.indentation=o,i>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==l?{state:e.htmlState,mode:k}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:z}},blankLine:r,getType:u,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return z},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown")},function(e,t){"use strict";CodeMirror.overlayMode=function(e,t,n){return{startState:function(){return{base:CodeMirror.startState(e),overlay:CodeMirror.startState(t),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:CodeMirror.copyState(e,n.base),overlay:CodeMirror.copyState(t,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(i,a){return(i!=a.streamSeen||Math.min(a.basePos,a.overlayPos)<i.start)&&(a.streamSeen=i,a.basePos=a.overlayPos=i.start),i.start==a.basePos&&(a.baseCur=e.token(i,a.base),a.basePos=i.pos),i.start==a.overlayPos&&(i.pos=i.start,a.overlayCur=t.token(i,a.overlay),a.overlayPos=i.pos),i.pos=Math.min(a.basePos,a.overlayPos),null==a.overlayCur?a.baseCur:null!=a.baseCur&&a.overlay.combineTokens||n&&null==a.overlay.combineTokens?a.baseCur+" "+a.overlayCur:a.overlayCur},indent:e.indent&&function(t,n){return e.indent(t.base,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(n){e.blankLine&&e.blankLine(n.base),t.blankLine&&t.blankLine(n.overlay)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(86),l=i(o),s=n(14),c=i(s),u=n(132),d=i(u),f=n(70),h=i(f),g=n(12),v=i(g),p=n(1),m=i(p),y=n(7),b=i(y),w=n(64),k=i(w),_=n(8),C=i(_),E=n(11),T=i(E),M=n(49),x=i(M),S=n(90),I=i(S),N=n(6),A=i(N),B=n(74),L=i(B),R=n(79),O=i(R),D=n(82),P=i(D),H=n(73),F=i(H),U=n(77),W=i(U),j=n(81),V=i(j),K=n(78),q=i(K),Y=n(72),z=i(Y),G=n(71),X=i(G),Q=n(85),J=i(Q),Z=n(80),ee=i(Z),te=n(83),ne=i(te),ie=n(84),ae=i(ie),re=n(75),oe=i(re),le=n(76),se=i(le),ce=n(112),ue=i(ce),de=n(119),fe=i(de),he=n(122),ge=i(he),ve=n(111),pe=i(ve),me=n(109),ye=i(me),be=n(110),we=i(be),ke=n(117),_e=i(ke),Ce=n(116),Ee=i(Ce),Te=n(121),Me=i(Te),xe=n(131),Se=i(xe),Ie=n(120),Ne=i(Ie),Ae=n(123),$e=i(Ae),Be=n(125),Le=i(Be),Re=n(124),Oe=i(Re),De=n(129),Pe=i(De),He=n(128),Fe=i(He),Ue=n(126),We=i(Ue),je=n(127),Ve=i(je),Ke=n(118),qe=i(Ke),Ye=n(115),ze=i(Ye),Ge=n(130),Xe=i(Ge),Qe=n(113),Je=i(Qe),Ze=n(114),et=i(Ze),tt=tui.util,nt=[],it=function(){function e(t){a(this,e);var n=this;this.options=$.extend({previewStyle:"tab",initialEditType:"markdown",height:300,language:"en_US",useDefaultHTMLSanitizer:!0,useCommandShortcut:!0},t),this.eventManager=new v.default,this.importManager=new k.default(this.eventManager),this.commandManager=new m.default(this,{useCommandShortcut:this.options.useCommandShortcut}),this.codeBlockManager=C.default,this.convertor=new T.default(this.eventManager),this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&tt.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&tt.forEach(this.options.events,function(e,t){n.on(t,e)}),this.layout=new h.default(t,this.eventManager),this.i18n=A.default,this.i18n.setCode(this.options.language),this.setUI(this.options.UI||new I.default(this)),this.mdEditor=l.default.factory(this.layout.getMdEditorContainerEl(),this.eventManager),this.preview=new c.default(this.layout.getPreviewEl(),this.eventManager,this.convertor),this.wwEditor=d.default.factory(this.layout.getWwEditorContainerEl(),this.eventManager,{useCommandShortcut:this.options.useCommandShortcut}),this.toMarkOptions=null,this.changePreviewStyle(this.options.previewStyle),this.changeMode(n.options.initialEditType,!0),this.contentHeight(n.options.height),this.setValue(n.options.initialValue),b.default.applyExtension(n,n.options.exts),this.eventManager.emit("load",n),nt.push(this)}return r(e,[{key:"changePreviewStyle",value:function(e){this.layout.changePreviewStyle(e),this.mdPreviewStyle=e,this.eventManager.emit("changePreviewStyle",e),this.eventManager.emit("previewNeedsRefresh")}},{key:"exec",value:function(){var e;(e=this.commandManager).exec.apply(e,arguments)}},{key:"addCommand",value:function(e,t){t?this.commandManager.addCommand(m.default.command(e,t)):this.commandManager.addCommand(e)}},{key:"afterAddedCommand",value:function(){this.eventManager.emit("afterAddedCommand",this)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"removeHook",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"getCodeMirror",value:function(){return this.mdEditor.getEditor()}},{key:"getSquire",value:function(){return this.wwEditor.getEditor()}},{key:"focus",value:function(){this.getCurrentModeEditor().focus()}},{key:"blur",value:function(){this.getCurrentModeEditor().blur()}},{key:"moveCursorToEnd",value:function(){this.getCurrentModeEditor().moveCursorToEnd()}},{key:"moveCursorToStart",value:function(){this.getCurrentModeEditor().moveCursorToStart()}},{key:"setMarkdown",value:function(e){e=e||"",this.isMarkdownMode()?this.mdEditor.setValue(e):this.wwEditor.setValue(this.convertor.toHTML(e)),this.eventManager.emit("setMarkdownAfter",e)}},{key:"setHtml",value:function(e){if(e=e||"",this.wwEditor.setValue(e),this.isMarkdownMode()){var t=this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions);this.mdEditor.setValue(t),this.eventManager.emit("setMarkdownAfter",t)}}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"getMarkdown",value:function(){var e=void 0;return e=this.isMarkdownMode()?this.mdEditor.getValue():this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)}},{key:"getHtml",value:function(){return this.isWysiwygMode()&&this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)),this.convertor.toHTML(this.mdEditor.getValue())}},{key:"getValue",value:function(){return this.getMarkdown()}},{key:"addWidget",value:function(e,t,n,i){this.getCurrentModeEditor().addWidget(e,t,n,i)}},{key:"contentHeight",value:function(e){return e&&(this._contentHeight=e,this.mdEditor.setHeight(e),this.preview.setHeight(e),this.wwEditor.setHeight(e)),this._contentHeight}},{key:"getCurrentModeEditor",value:function(){var e=void 0;return e=this.isMarkdownMode()?this.mdEditor:this.wwEditor}},{key:"isMarkdownMode",value:function(){return"markdown"===this.currentMode}},{key:"isWysiwygMode",value:function(){return"wysiwyg"===this.currentMode}},{key:"isViewOnly",value:function(){return!1}},{key:"getCurrentPreviewStyle",value:function(){return this.mdPreviewStyle}},{key:"changeMode",value:function(e,t){this.currentMode!==e&&(this.eventManager.emit("changeModeBefore",this.currentMode),this.currentMode=e,this.isWysiwygMode()?(this.layout.switchToWYSIWYG(),this.wwEditor.setValue(this.convertor.toHTML(this.mdEditor.getValue())),this.eventManager.emit("changeModeToWysiwyg")):(this.layout.switchToMarkdown(),this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)),this.getCodeMirror().refresh(),this.eventManager.emit("changeModeToMarkdown")),this.eventManager.emit("changeMode",e),t||this.focus())}},{key:"remove",value:function(){var e=this,t=nt.length-1;for(this.wwEditor.remove(),this.mdEditor.remove(),this.layout.remove(),this.getUI()&&this.getUI().remove(),this.eventManager.emit("removeEditor"),this.eventManager.events.forEach(function(t,n){e.off(n)}),this.eventManager=null;t>=0;t-=1)nt[t]===this&&nt.splice(t,1)}},{key:"hide",value:function(){this.eventManager.emit("hide",this)}},{key:"show",value:function(){this.eventManager.emit("show",this),this.getCodeMirror().refresh()}},{key:"scrollTop",value:function(e){return this.getCurrentModeEditor().scrollTop(e)}},{key:"setUI",value:function(e){this._ui=e}},{key:"getUI",value:function(){return this._ui}},{key:"reset",value:function(){this.wwEditor.reset(),this.mdEditor.reset()}},{key:"getRange",value:function(){return this.getCurrentModeEditor().getRange()}},{key:"getTextObject",value:function(e){return this.getCurrentModeEditor().getTextObject(e)}}],[{key:"getInstances",value:function(){return nt}},{key:"defineExtension",value:function(e,t){b.default.defineExtension(e,t)}},{key:"factory",value:function(t){var n=void 0;return t.viewOnly?n=new x.default(t):(n=new e(t),n.addCommand(L.default),n.addCommand(O.default),n.addCommand(F.default),n.addCommand(W.default),n.addCommand(V.default),n.addCommand(q.default),n.addCommand(z.default),n.addCommand(X.default),n.addCommand(J.default),n.addCommand(ee.default),n.addCommand(ne.default),n.addCommand(ae.default),n.addCommand(oe.default),n.addCommand(se.default),n.addCommand(P.default),n.addCommand(ue.default),n.addCommand(fe.default),n.addCommand(pe.default),n.addCommand(Se.default),n.addCommand(Ne.default),n.addCommand(ye.default),n.addCommand(we.default),n.addCommand(_e.default),n.addCommand(Ee.default),n.addCommand(Me.default),n.addCommand(qe.default),n.addCommand(ze.default),n.addCommand(Xe.default),n.addCommand($e.default),n.addCommand(Le.default),n.addCommand(Oe.default),n.addCommand(Pe.default),n.addCommand(Fe.default),n.addCommand(We.default),n.addCommand(Ve.default),n.addCommand(Je.default),n.addCommand(et.default),n.addCommand(ge.default)),n}}]),e}();it.i18n=A.default,it.markdownItRenderer=T.default.getMarkdownHighlightRenderer(),
e.exports=it},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),r=i(a),o=n(62),l=i(o),s=n(63),c=i(s),u=n(53),d=i(u),f=n(6),h=i(f);r.default.defineExtension("scrollFollow",function(e){function t(){"vertical"===e.mdPreviewStyle&&"markdown"===e.currentMode?f.$el.show():f.$el.hide()}var n="tui-scrollfollow",i={active:h.default.get("Auto scroll enabled"),inActive:h.default.get("Auto scroll disabled")};if(!e.isViewOnly()){var a=e.getCodeMirror(),r=new c.default(a,e.preview),o=new l.default(r,a,e.preview.$el),s=!1,u=!0,f=void 0;"default"===e.getUI().name&&(f=new d.default({className:n,command:"scrollFollowToggle",tooltip:i.active,$el:$('<button class="active '+n+'" type="button"></button>')}),e.getUI().toolbar.addButton(f),t(),e.on("changeMode",t),e.on("changePreviewStyle",t),e.addCommand("markdown",{name:"scrollFollowToggle",exec:function(){u=!u,f._onOut(),u?(f.$el.addClass("active"),f.tooltip=i.active):(f.$el.removeClass("active"),f.tooltip=i.inActive),f._onOver()}})),a.on("change",function(){s=!1,r.makeSectionList()}),e.on("previewRenderAfter",function(){r.sectionMatch(),o.syncPreviewScrollTopToMarkdown(),s=!0}),e.eventManager.listen("scroll",function(t){u&&(s&&e.preview.isVisible()?"markdown"!==t.source||o.isMarkdownScrollEventBlocked?"preview"!==t.source||o.isPreviewScrollEventBlocked||o.syncMarkdownScrollTopToPreview():o.syncPreviewScrollTopToMarkdown():o.saveScrollInfo())})}})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=57,r=20,o=15,l=function(){function e(t,i,a){n(this,e),this.sectionManager=t,this.cm=i,this.$previewContainerEl=a,this.$contents=this.$previewContainerEl.find(".tui-editor-contents"),this.releaseTimer=null,this._currentTimeoutId=null,this._savedScrollInfo=null}return i(e,[{key:"_getEditorSectionHeight",value:function(e){var t=this.cm.heightAtLine(e.end,"local");return t-=this.cm.heightAtLine(e.start>0?e.start-1:0,"local")}},{key:"_getEditorLineHeightGapInSection",value:function(e,t){var n=this.cm.heightAtLine(t,"local");return n-=this.cm.heightAtLine(e.start>0?e.start-1:0,"local"),Math.max(n,0)}},{key:"_getEditorSectionScrollRatio",value:function(e,t){var n=e.end===e.start,i=void 0;return i=n?0:this._getEditorLineHeightGapInSection(e,t)/this._getEditorSectionHeight(e)}},{key:"_getScrollFactorsOfEditor",value:function(){var e=this.cm,t=e.getScrollInfo(),n=void 0,i=void 0,a=void 0,r=void 0;t=this._fallbackScrollInfoIfIncorrect(t);var o=t.height-t.top<=t.clientHeight;return o?r={isEditorBottom:o}:(n=e.coordsChar({left:t.left,top:t.top},"local").line,i=this.sectionManager.sectionByLine(n),a=this._getEditorSectionScrollRatio(i,n),r={section:i,sectionRatio:a}),r}},{key:"_getScrollInfoForMarkdown",value:function(){var e=this,t=this.sectionManager.getSectionList(),n=void 0;return tui.util.forEachArray(t,function(t){var i=t.$previewSectionEl,a=i.parent().parent(),r=a[0].clientHeight-a.scrollTop()<=a[0].height,o=!0;return r?(n={isPreviewBottom:r},o=!1):e._isTopSection(a,i)&&(n={section:t,sectionRatio:e._getMarkdownEditorScrollRatio(a,i)},o=!1),o}),n}},{key:"_getMarkdownEditorScrollRatio",value:function(e,t){return(e.scrollTop()-t[0].offsetTop)/t.height()}},{key:"_getScrollTopForPreview",value:function(){var e=void 0,t=this._getScrollFactorsOfEditor(),n=t.section,i=t.sectionRatio;return t.isEditorBottom?e=this.$contents.height():n.$previewSectionEl&&(e=n.$previewSectionEl[0].offsetTop,e+=n.$previewSectionEl.height()*i-r),e=e&&Math.max(e,0)}},{key:"_getScrollTopForMarkdown",value:function(){var e=void 0,t=this._getScrollInfoForMarkdown(),n=t.sectionRatio;if(t.isPreviewBottom)e=this.cm.getScrollInfo().height;else if(t.section){var i=t.section,a=this.cm.charCoords({line:i.start,char:0},"local"),r=this.cm.charCoords({line:i.end,char:0},"local");e=a.top,e+=(r.top-a.top)*n}return e=e&&Math.max(e,0)}},{key:"syncPreviewScrollTopToMarkdown",value:function(){var e=this,t=this.$previewContainerEl,n=t.scrollTop(),i=this._getScrollTopForPreview();this.isPreviewScrollEventBlocked=!0,this._animateRun(n,i,function(n){clearTimeout(e.releaseTimer),t.scrollTop(n),e.releaseTimer=setTimeout(function(){e.isPreviewScrollEventBlocked=!1},o)})}},{key:"syncMarkdownScrollTopToPreview",value:function(){var e=this,t=this.cm,n=t.getScrollInfo(),i=n.top,a=this._getScrollTopForMarkdown();this.isMarkdownScrollEventBlocked=!0,this._animateRun(i,a,function(n){clearTimeout(e.releaseTimer),t.scrollTo(0,n),e.releaseTimer=setTimeout(function(){e.isMarkdownScrollEventBlocked=!1},o)})}},{key:"_animateRun",value:function(e,t,n){function i(){var l=Date.now(),s=(l-r)/200,c=void 0;s<1?(c=e+a*Math.cos((1-s)*Math.PI/2),n(Math.ceil(c)),o._currentTimeoutId=setTimeout(i,1)):(n(t),o._currentTimeoutId=null)}var a=t-e,r=Date.now(),o=this;this._currentTimeoutId&&clearTimeout(this._currentTimeoutId),i()}},{key:"_fallbackScrollInfoIfIncorrect",value:function(e){return e.height<0&&this._savedScrollInfo?this._savedScrollInfo:e}},{key:"saveScrollInfo",value:function(){this._savedScrollInfo=this.cm.getScrollInfo()}},{key:"_isTopSection",value:function(e,t){var n=e.scrollTop(),i=t[0].offsetTop,r=t.height(),o=n>=i-a,l=n>i+r;return o&&!l}}]),e}();e.exports=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return this.nodeType===Node.ELEMENT_NODE}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/,o=/^ *(\*|-|\d+\.|[*-] \[[ xX]])\s/,l=/^ {0,3}(> ?)+\s/,s=/^ {0,3}!\[([^\[\]]*)]\(([^)]*)\)/,c=/^ *(?:={1,}|-{1,})\s*$/,u=/^ *(`{3,}|~{3,})[ ]*$/,d=/^ *(`{3,}|~{3,})[ .]*(\S+)? */,f=/\s/g,h=function(){function e(t,i){n(this,e),this.cm=t,this.preview=i,this.$previewContent=i.$el.find(".tui-editor-contents"),this._sectionList=null,this._currentSection=null}return a(e,[{key:"_addNewSection",value:function(e,t){var n=this._makeSectionData(e,t);this._sectionList.push(n),this._currentSection=n}},{key:"getSectionList",value:function(){return this._sectionList}},{key:"_makeSectionData",value:function(e,t){return{start:e,end:t,$previewSectionEl:null}}},{key:"_updateCurrentSectionEnd",value:function(e){this._currentSection.end=e}},{key:"_eachLineState",value:function(e){var t=void 0,n=void 0,i=void 0,a=void 0,r=void 0,o=!0,l=!1,s=!1,c="",u=!1,d=!1,f=void 0,h=this.cm.getDoc().lineCount();for(n=0;n<h;n+=1){t=!1,i=this.cm.getLine(n),a=this.cm.getLine(n+1)||"",r=this.cm.getLine(n-1)||"";var g=this._isCodeBlockEnd(r)&&f!==n-1;if(!l||i&&this._isTableCode(i)?!l&&this._isTable(i,a)&&(l=!0):l=!1,s&&g&&(s=!1),!s&&this._isCodeBlockStart(i)&&(s=this._doFollowedLinesHaveCodeBlockEnd(n,h),f=n),d&&0!==i.length?(this._isIndependentImage(s,l,i,r)?(u=!0,d=!0):(u=!1,d=!1),t=!0):this._isAtxHeader(i)?(u=!1,t=!0,d=!1):this._isCodeBlockEnd(i)||l||!this._isSeTextHeader(i,a)?this._isIndependentImage(s,l,i,r)?(u=!0,t=!0,d=!1):u&&0===i.length&&(u=!1,d=!0):(u=!1,t=!0,d=!1),o){if(c+=i.trim(),!c)continue;o=!1}e(t,n)}}},{key:"_isIndependentImage",value:function(e,t,n,i){return!e&&!t&&this._isImage(n)&&!this._isList(n)&&!this._isQuote(n)&&0===i.length}},{key:"_doFollowedLinesHaveCodeBlockEnd",value:function(e,t){for(var n=!1,i=e+1;i<t;i+=1)if(this._isCodeBlockEnd(this.cm.getLine(i))){n=!0;break}return n}},{key:"_isCodeBlockStart",value:function(e){return d.test(e)}},{key:"_isCodeBlockEnd",value:function(e){return u.test(e)}},{key:"_isTable",value:function(e,t){return this._isTableCode(e)&&this._isTableAligner(t)}},{key:"_isTableCode",value:function(e){return/(^\S?.*\|.*)/.test(e)}},{key:"_isTableAligner",value:function(e){return/(\s*[-:]+\s*\|)+/.test(e)}},{key:"_isAtxHeader",value:function(e){return r.test(e)}},{key:"_isSeTextHeader",value:function(e,t){return""!==e.replace(f,"")&&t&&c.test(t)}},{key:"_isImage",value:function(e){return s.test(e)}},{key:"_isList",value:function(e){return o.test(e)}},{key:"_isQuote",value:function(e){return l.test(e)}},{key:"makeSectionList",value:function(){var e=this;this._sectionList=[],this._eachLineState(function(t,n){t||!e._sectionList.length?e._addNewSection(n,n):e._updateCurrentSectionEnd(n)})}},{key:"sectionMatch",value:function(){if(this._sectionList){var e=this._getPreviewSections();this._matchPreviewSectionsWithSectionlist(e)}}},{key:"_matchPreviewSectionsWithSectionlist",value:function(e){var t=this;e.forEach(function(e,n){if(t._sectionList[n]){var i=$("<div class='content-id-"+n+"'></div>");t._sectionList[n].$previewSectionEl=$(e).wrapAll(i).parent()}})}},{key:"_getPreviewSections",value:function(){var e=[],t=0,n=!1;return e[0]=[],this.$previewContent.contents().filter(i).each(function(i,a){var r="P"===a.tagName,o=a.tagName.match(/^(H1|H2|H3|H4|H5|H6)$/),l=r&&"IMG"===a.childNodes[0].nodeName;(o||l||n)&&e[t].length&&(e.push([]),t+=1,n=!1),l&&(n=!0),e[t].push(a)}),e}},{key:"sectionByLine",value:function(e){var t=void 0,n=this._sectionList,i=n.length;for(t=0;t<i&&!(e<=n[t].end);t+=1);return t===i&&(t=i-1),n[t]}}]),e}();e.exports=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=void 0;try{t=decodeURIComponent(e)}catch(n){t=e}return t}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=tui.util,o=function(){function e(t){n(this,e),this.eventManager=t,this._lastState=null,this._initEvent(),this._initDefaultImageImporter()}return a(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("stateChange",function(t){e._lastState=t}),this.eventManager.listen("drop",function(t){var n=t.data.dataTransfer&&t.data.dataTransfer.files;e._processBlobItems(n,t.data)}),this.eventManager.listen("paste",function(t){e._processClipboard(t.data)}),this.eventManager.listen("pasteBefore",function(t){e._decodeURL(t)})}},{key:"_initDefaultImageImporter",value:function(){this.eventManager.listen("addImageBlobHook",function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)})}},{key:"_emitAddImageBlobHook",value:function(e){var t=this,n=e.name?e:e.getAsFile();this.eventManager.emit("addImageBlobHook",n,function(e){t.eventManager.emit("command","AddImage",{imageUrl:e,altText:n.name||"image"})})}},{key:"_decodeURL",value:function(e){if("markdown"===e.source&&1===e.data.text.length&&e.data.text[0].match(/https?:\/\//g))e.data.update(null,null,[i(e.data.text[0])]);else if("wysiwyg"===e.source&&e.$clipboardContainer.find("A")){var t=e.$clipboardContainer.find("A");t.each(function(e,t){$(t).text(i($(t).text()))})}}},{key:"_processClipboard",value:function(e){var t=e.clipboardData||window.clipboardData,n=t&&t.items,i=t.types;n&&i&&1===i.length&&r.inArray("Files",i)!==-1&&this._processBlobItems(n,e)}},{key:"_processBlobItems",value:function(e,t){var n=this;e&&r.forEachArray(e,function(e){return e.type.indexOf("image")===-1||(t.preventDefault(),t.codemirrorIgnore=!0,n._emitAddImageBlobHook(e),!1)})}},{key:"_isInBlockFormat",value:function(){var e=this._lastState;return e&&(e.codeBlock||e.list||e.task||e.code)}}]),e}();e.exports=o},function(e,t){"use strict";tui.Editor.i18n.setLang(["en","en_US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task","Insert link":"Insert link","Insert codeblock":"Insert codeblock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file",Description:"Description",OK:"OK",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row":"Add row","Add col":"Add col","Remove row":"Remove row","Remove col":"Remove col","Align left":"Align left","Align center":"Align center","Align right":"Align right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Cannot paste values ​​other than a table in the cell selection state":"Cannot paste values ​​other than a table in the cell selection state."})},function(e,t){"use strict";tui.Editor.i18n.setLang(["ja","ja_JP"],{Markdown:"マークダウン",WYSIWYG:"WYSIWYG",Headings:"見出し",Paragraph:"本文",Bold:"太字",Italic:"イタリック",Strike:"ストライク",Code:"コード",Line:"ライン",Blockquote:"引用","Unordered list":"番号なしリスト","Ordered list":"順序付きリスト",Task:"タスク","Insert link":"リンク挿入","Insert codeblock":"コードブロック挿入","Insert table":"テーブル挿入","Insert image":"画像挿入",Heading:"見出し","Image URL":"イメージURL","Select image file":"画像ファイル選択",Description:"ディスクリプション ",OK:"はい",Cancel:"キャンセル",File:"ファイル",URL:"URL","Link text":"リンクテキスト","Add row":"行追加","Add col":"列追加","Remove row":"行削除","Remove col":"列削除","Align left":"左揃え","Align center":"中央揃え","Align right":"右揃え","Remove table":"テーブル削除","Would you like to paste as table?":"テーブルを貼り付けますか?","Text color":"文字色相","Auto scroll enabled":"自動スクロールが有効","Auto scroll disabled":"自動スクロールを無効に","Cannot paste values ​​other than a table in the cell selection state":"表以外の値をセル選択状態に貼り付けることはできません。"})},function(e,t){"use strict";tui.Editor.i18n.setLang(["ko","ko_KR"],{Markdown:"마크다운",WYSIWYG:"위지윅",Headings:"제목크기",Paragraph:"본문",Bold:"굵게",Italic:"기울임꼴",Strike:"취소선",Code:"코드",Line:"문단나눔",Blockquote:"인용구","Unordered list":"글머리 기호","Ordered list":"번호 매기기",Task:"체크박스","Insert link":"링크 삽입","Insert codeblock":"코드블럭 삽입","Insert table":"표 삽입","Insert image":"이미지 삽입",Heading:"제목","Image URL":"이미지 주소","Select image file":"이미지 파일을 선택하세요.",Description:"설명",OK:"확인",Cancel:"취소",File:"파일",URL:"주소","Link text":"링크 텍스트","Add row":"행 추가","Add col":"열 추가","Remove row":"행 삭제","Remove col":"열 삭제","Align left":"왼쪽 정렬","Align center":"가운데 정렬","Align right":"오른쪽 정렬","Remove table":"표 삭제","Would you like to paste as table?":"표형태로 붙여 넣겠습니까?","Text color":"글자 색상","Auto scroll enabled":"자동 스크롤 켜짐","Auto scroll disabled":"자동 스크롤 꺼짐","Cannot paste values ​​other than a table in the cell selection state.":"셀 선택 상태에서는 테이블 이외의 값은 붙여넣을 수 없습니다."})},function(e,t){"use strict";tui.Editor.i18n.setLang(["nl","nl_NL"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Headings:"Koppen",Paragraph:"tekst",Bold:"Vet",Italic:"Cursief",Strike:"Doorhalen",Code:"Code",Line:"Regel",Blockquote:"Citaatblok","Unordered list":"Opsomming","Ordered list":"Genummerde opsomming",Task:"Taak","Insert link":"Link invoegen","Insert codeblock":"Codeblok toevoegen","Insert table":"Tabel invoegen","Insert image":"Afbeelding invoegen",Heading:"Kop","Image URL":"Afbeelding URL","Select image file":"Selecteer een afbeelding",Description:"Omschrijving",OK:"OK",Cancel:"Annuleren",File:"Bestand",URL:"URL","Link text":"Link tekst","Add row":"Rij toevoegen","Add col":"Kolom toevoegen","Remove row":"Rij verwijderen","Remove col":"Kolom verwijderen","Align left":"Links uitlijnen","Align center":"Centreren","Align right":"Rechts uitlijnen","Remove table":"Verwijder tabel","Would you like to paste as table?":"Wil je dit als tabel plakken?","Text color":"tekst kleur","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll uitgeschakeld","Cannot paste values ​​other than a table in the cell selection state":"Kan niet anders dan een tafel in de cel selectie staat waarden te plakken."})},function(e,t){"use strict";tui.Editor.i18n.setLang(["zh","zh_CN"],{Markdown:"Markdown",WYSIWYG:"所见即所得",Headings:"标题",Paragraph:"文本",Bold:"加粗",Italic:"斜体字",Strike:"删除线",Code:"内嵌代码",Line:"画水平线",Blockquote:"引用块","Unordered list":"无序列表","Ordered list":"有序列表",Task:"任务","Insert link":"插入链接","Insert codeblock":"插入代码块","Insert table":"插入表格","Insert image":"插入图片",Heading:"标题","Image URL":"图片网址","Select image file":"选择映像文件",Description:"说明",OK:"确认",Cancel:"取消",File:"文件",URL:"URL","Link text":"链接文本","Add row":"添加一行","Add col":"添加列","Remove row":"删除行","Remove col":"删除列","Align left":"左对齐","Align center":"居中对齐","Align right":"右对齐","Remove table":"删除表","Would you like to paste as table?":"你想粘贴表吗?","Text color":"文字色相","Auto scroll enabled":"自动滚动启用","Auto scroll disabled":"自动的滚动作非使用","Cannot paste values ​​other than a table in the cell selection state":"在单元格选择状态下无法粘贴表格以外的值。"})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=['<div class="tui-editor">','<div class="te-md-container">','<div class="te-editor" />','<div class="te-md-splitter" />','<div class="te-preview" />',"</div>",'<div class="te-ww-container">','<div class="te-editor" />',"</div>","</div>"].join(""),r=function(){function e(t,i){n(this,e),this.$el=$(t.el),this.height=t.height,this.type=t.initialEditType,this.eventManager=i,this.init(),this._initEvent()}return i(e,[{key:"init",value:function(){this._renderLayout(),this._initMarkdownAndPreviewSection(),this._initWysiwygSection()}},{key:"_initEvent",value:function(){this.eventManager.listen("hide",this.hide.bind(this)),this.eventManager.listen("show",this.show.bind(this))}},{key:"_renderLayout",value:function(){this.$containerEl=$(a).appendTo(this.$el)}},{key:"switchToWYSIWYG",value:function(){this.$containerEl.removeClass("te-md-mode"),this.$containerEl.addClass("te-ww-mode")}},{key:"switchToMarkdown",value:function(){this.$containerEl.removeClass("te-ww-mode"),this.$containerEl.addClass("te-md-mode")}},{key:"_initMarkdownAndPreviewSection",value:function(){this.$mdEditorContainerEl=this.$containerEl.find(".te-md-container .te-editor"),this.$previewEl=this.$containerEl.find(".te-md-container .te-preview")}},{key:"_initWysiwygSection",value:function(){this.$wwEditorContainerEl=this.$containerEl.find(".te-ww-container .te-editor")}},{key:"_verticalSplitStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-tab"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-vertical")}},{key:"_tabStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-vertical"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-tab")}},{key:"changePreviewStyle",value:function(e){"tab"===e?this._tabStyle():"vertical"===e&&this._verticalSplitStyle()}},{key:"hide",value:function(){this.$el.find(".tui-editor").addClass("te-hide")}},{key:"show",value:function(){this.$el.find(".tui-editor").removeClass("te-hide")}},{key:"remove",value:function(){this.$el.find(".tui-editor").remove()}},{key:"getEditorEl",value:function(){return this.$containerEl}},{key:"getPreviewEl",value:function(){return this.$previewEl}},{key:"getMdEditorContainerEl",value:function(){return this.$mdEditorContainerEl}},{key:"getWwEditorContainerEl",value:function(){return this.$wwEditorContainerEl}}]),e}();e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("markdown",{name:"AddImage",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),a=e.getCurrentRange(),r={line:a.from.line,ch:a.from.ch},o={line:a.to.line,ch:a.to.ch},l="!["+t.altText+"]("+t.imageUrl+")";i.replaceRange(l,r,o,"+addImage"),n.focus()}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("markdown",{name:"AddLink",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),a=e.getCurrentRange(),r={line:a.from.line,ch:a.from.ch},o={line:a.to.line,ch:a.to.ch},l="["+t.linkText+"]("+t.url+")";i.replaceRange(l,r,o),n.focus()}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("markdown",{name:"Blockquote",keyMap:["CTRL+Q","META+Q"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),a={line:i.from.line,ch:0},r={line:i.to.line,ch:n.getLineHandle(i.to.line).text.length},o=n.getRange(a,r),l=o.split("\n"),s=l.length,c=0;c<s;c+=1)l[c]=">"+l[c];n.replaceRange(l.join("\n"),a,r),i.to.ch+=1,n.setCursor(i.to),t.focus()}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=/^[\*_]{2,}[^\*_]*[\*_]{2,}$/,l=r.default.command("markdown",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),a=n.getSelection(),r=!a;if(r&&i.ch>1){var o=this.expendSelection(n,i);a=o||a}var l=this.isNeedRemove(a),s=l?this.remove(a):this.append(a);n.replaceSelection(s,"around"),r&&!l&&this.setCursorToCenter(n,i),t.focus()},isNeedRemove:function(e){return o.test(e)},append:function(e){return"**"+e+"**"},remove:function(e){return e.substr(2,e.length-4)},expendSelection:function(e,t){var n=e.getSelection(),i=void 0,a={line:t.line,ch:t.ch-2},r={line:t.line,ch:t.ch+2};return e.setSelection(a,r),"****"===n||"____"===n?i=n:e.setSelection(t),i},setCursorToCenter:function(e,t){e.setCursor(t.line,t.ch+2)}});e.exports=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("markdown",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getSelection(),a=t.getCursor();n.replaceSelection(this.append(i),"around"),i||n.setCursor(a.line,a.ch+1),t.focus()},append:function(e){return"`"+e+"`"}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("markdown",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),a=["```",n.getSelection(),"```"],r=1;0!==i.from.ch&&(a.unshift(""),r+=1),i.to.ch!==n.getLine(i.to.line).length&&a.push(""),n.replaceSelection(a.join("\n")),t.setCursor(i.from.line+r,0),t.focus()}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.match(s),i="";do i+="#",t-=1;while(t>0);return n&&(e=e.split(n[0])[1]),i+" "+e}var r=n(1),o=i(r),l=tui.util,s=/^#+\s/g,c=o.default.command("markdown",{name:"Heading",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),r=e.getCurrentRange(),o={line:r.from.line,ch:0},s={line:r.to.line,ch:i.getLineHandle(r.to.line).text.length},c=i.getLine(s.line).length,u=i.getRange(o,s),d=u.split("\n");l.forEachArray(d,function(e,n){d[n]=a(e,t)}),i.replaceRange(d.join("\n"),o,s),r.to.ch+=i.getLine(s.line).length-c,i.setSelection(o,r.to),n.focus()}});e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("markdown",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i="",a=e.getCurrentRange(),r={line:a.from.line,ch:a.from.ch},o={line:a.to.line,ch:a.to.ch};a.collapsed&&(i=n.getLine(r.line),r.ch=0,o.ch=n.getLineHandle(a.to.line).text.length),i+=n.getLine(r.line).length?"\n\n* * *\n\n":"\n* * *\n",n.replaceRange(i,r,o),t.focus()}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=/^[\*_]{3,}[^\*_]*[\*_]{3,}$/,l=/^[\*_][^\*_]*[\*_]$/,s=r.default.command("markdown",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),a=n.getSelection(),r=!a,o=!1,l=void 0;r&&(i.ch>2&&(l=this.expendWithBoldSelection(n,i),l&&(o="with")),"with"!==o&&i.ch>1&&(o=this.expendOnlyBoldSelection(n,i)),!o&&i.ch>0&&(this.expendSelection(n,i),a=l||a));var s=this.isNeedRemove(a),c=s?this.remove(a):this.append(a);n.replaceSelection(c,"around"),r&&this.setCursorToCenter(n,i,s),t.focus()},isNeedRemove:function(e){return l.test(e)||o.test(e)},append:function(e){return"_"+e+"_"},remove:function(e){return e.substr(1,e.length-2)},expendWithBoldSelection:function(e,t){var n=e.getSelection(),i=void 0,a={line:t.line,ch:t.ch-3},r={line:t.line,ch:t.ch+3};return e.setSelection(a,r),"******"===n||"______"===n?i=n:e.setSelection(t),i},expendOnlyBoldSelection:function(e,t){var n=e.getSelection(),i=!1,a={line:t.line,ch:t.ch-2},r={line:t.line,ch:t.ch+2};return e.setSelection(a,r),"****"!==n&&"____"!==n||(e.setSelection(t),i="only"),i},expendSelection:function(e,t){var n=e.getSelection(),i=void 0,a={line:t.line,ch:t.ch-2},r={line:t.line,ch:t.ch+2};return e.setSelection(a,r),"****"===n||"____"===n?i=n:e.setSelection(t),i},setCursorToCenter:function(e,t,n){var i=n?-1:1;e.setCursor(t.line,t.ch+i)}});e.exports=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return!(!e||!e.match(c)&&!e.match(s))}var r=n(1),o=i(r),l=/^[ \t]*[\d]+\. .*/,s=/^[ \t]*[-*] .*/,c=/^[ \t]*[-*]( \[[ xX]])? .*/,u=o.default.command("markdown",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r=e.componentManager.getManager("list"),o=r.expandLineRangeIfNeed(n,i,a),s=o.start,c=o.end,u=1,d=void 0,f=void 0,h=s;h<=c&&(f={line:h,ch:0},d=n.getLine(h),r.isListOrParagraph(d));h+=1)a(d)?r.replaceLineText(n,h,/[*-] /,u+". "):d.match(l)||n.replaceRange(u+". ",f),u+=1,h===c&&r.appendBlankLineIfNeed(t,h,c,s);t.focus()}});e.exports=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=/^(#{1,6}| *((?:\*|-|\d\.)(?: \[[ xX]])?)) /;return e.replace(t,"")}var r=n(1),o=i(r),l=tui.util,s=o.default.command("markdown",{name:"Paragraph",exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r={line:i.from.line,ch:0},o={line:i.to.line,ch:n.getLineHandle(i.to.line).text.length},s=n.getLine(o.line).length,c=n.getRange(r,o),u=c.split("\n");l.forEachArray(u,function(e,t){u[t]=a(e)}),n.replaceRange(u.join("\n"),r,o),i.to.ch+=n.getLine(o.line).length-s,n.setSelection(r,o),t.focus()}});e.exports=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=/^[~~](.*[\s\n]*.*)*[~~]$/,l=r.default.command("markdown",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),a=n.getSelection(),r=this.hasStrikeSyntax(a),o=void 0;o=r?this.remove(a):this.append(a),n.replaceSelection(o,"around");var l=!a;l&&!r&&this.setCursorToCenter(n,i,r),t.focus()},hasStrikeSyntax:function(e){return o.test(e)},append:function(e){return"~~"+e+"~~"},remove:function(e){return e.substr(2,e.length-4)},setCursorToCenter:function(e,t,n){var i=n?-2:2;e.setCursor(t.line,t.ch+i)}});e.exports=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n="|",i="|",a=0;e;)t?(n+=" "+t[a]+" |",a+=1):n+="  |",i+=" --- |",e-=1;return n+"\n"+i+"\n"}function r(e,t,n){for(var i="",a=e,r=0;r<t;r+=1){i+="|";for(var o=0;o<e;o+=1)n?(i+=" "+n[a]+" |",a+=1):i+="  |";i+="\n"}return i=i.replace(/\n$/g,"")}var o=n(1),l=i(o),s=l.default.command("markdown",{name:"Table",exec:function(e,t,n,i){var o=e.getEditor(),l=o.getDoc(),s="\n";o.getCursor().ch>0&&(s+="\n"),s+=a(t,i),s+=r(t,n-1,i),l.replaceSelection(s),i||o.setCursor(o.getCursor().line-n,2),e.focus()}});e.exports=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return!(!e||!e.match(s)&&!e.match(l))}var r=n(1),o=i(r),l=/^[ \t]*[\d]+\. .*/,s=/^[ \t]*[-*] .*/,c=/^[ \t]*[-*]( \[[ xX]])? .*/,u=/([*-] |[\d]+\. )(\[[ xX]] )/,d=o.default.command("markdown",{name:"Task",keyMap:["CTRL+T","META+T"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r=e.componentManager.getManager("list"),o=r.createSortedLineRange(i),l=o.start,s=o.end,d=void 0,f=void 0,h=l;h<=s;h+=1){f={line:h,ch:0},d=n.getLine(h);var g=!!d.match(u);if(!r.isListOrParagraph(d))break;a(d)&&g?r.replaceLineText(n,h,u,"$1"):a(d)&&!g?r.replaceLineText(n,h,/([*-] |[\d]+\. )/,"$1[ ] "):d.match(c)||n.replaceRange("* [ ] ",f),h===s&&r.appendBlankLineIfNeed(t,h,s,l)}t.focus()}});e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return!(!e||!e.match(c)&&!e.match(l))}var r=n(1),o=i(r),l=/^[ \t]*[\d]+\. .*/,s=/^[ \t]*[-*] .*/,c=/^[ \t]*[-*]( \[[ xX]])? .*/,u=o.default.command("markdown",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r=e.componentManager.getManager("list"),o=r.expandLineRangeIfNeed(n,i,a),l=o.start,c=o.end,u=void 0,d=void 0,f=l;f<=c&&(d={line:f,ch:0},u=n.getLine(f),r.isListOrParagraph(u));f+=1)a(u)?r.replaceLineText(n,f,/[\d]+\. /,"* "):u.match(s)||n.replaceRange("* ",d),f===c&&r.appendBlankLineIfNeed(t,f,c,l);t.focus()}});e.exports=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(52),l=i(o),s=n(88),c=i(s),u=n(87),d=i(u),f=n(51),h=i(f),g=window.CodeMirror,v=l.default.getSharedInstance(),p=function(){function e(t,n){a(this,e),this.componentManager=new h.default(this),this.eventManager=n,this.$editorContainerEl=t,this._latestState=null}return r(e,[{key:"init",value:function(e){var t=$("<textarea />");e&&(t.text(e),this._emitMarkdownEditorContentChangedEvent(e)),this.$editorContainerEl.append(t),this.cm=g.fromTextArea(t[0],{lineWrapping:!0,mode:"gfm",theme:"default",dragDrop:!0,allowDropFileTypes:["image"],extraKeys:{Enter:"newlineAndIndentContinue",Tab:"subListIndentTab","Shift-Tab":"indentLess","Alt-Up":"replaceLineTextToUpper","Alt-Down":"replaceLineTextToLower"},indentUnit:4}),this._initEvent()}},{key:"_initEvent",value:function(){var e=this;this.cm.getWrapperElement().addEventListener("click",function(){e.eventManager.emit("click",{source:"markdown"})}),this.cm.on("beforeChange",function(t,n){"paste"===n.origin&&e.eventManager.emit("pasteBefore",{source:"markdown",data:n})}),this.cm.on("change",function(t,n){e._emitMarkdownEditorContentChangedEvent(),e._emitMarkdownEditorChangeEvent(n)}),this.cm.on("focus",function(){e.eventManager.emit("focus",{source:"markdown"}),e.getEditor().refresh()}),this.cm.on("blur",function(){e.eventManager.emit("blur",{source:"markdown"})}),this.cm.on("scroll",function(t,n){e.eventManager.emit("scroll",{source:"markdown",data:n})}),this.cm.on("keydown",function(t,n){e.eventManager.emit("keydown",{source:"markdown",data:n}),e.eventManager.emit("keyMap",{source:"markdown",keyMap:v.convert(n),data:n})}),this.cm.on("keyup",function(t,n){e.eventManager.emit("keyup",{source:"markdown",data:n})}),this.cm.on("copy",function(t,n){e.eventManager.emit("copy",{source:"markdown",data:n})}),this.cm.on("cut",function(t,n){e.eventManager.emit("cut",{source:"markdown",data:n})}),this.cm.on("paste",function(t,n){e.eventManager.emit("paste",{source:"markdown",data:n})}),this.cm.on("drop",function(t,n){n.preventDefault(),e.eventManager.emit("drop",{source:"markdown",data:n})}),this.cm.on("cursorActivity",function(){var t=e.cm.getTokenAt(e.cm.getCursor()),n=t.state.base,i=t.state.overlay,a={bold:!!n.strong,italic:!!n.em,strike:!!n.strikethrough,code:!!i.code,codeBlock:!!i.codeBlock,quote:!!n.quote,list:!!n.list,
task:!!n.task,source:"markdown"};e._latestState&&!e._isStateChanged(e._latestState,a)||(e.eventManager.emit("stateChange",a),e._latestState=a)})}},{key:"getCurrentRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{from:e,to:t,collapsed:e===t}}},{key:"focus",value:function(){this.cm.focus()}},{key:"blur",value:function(){this.cm.getInputField().blur()}},{key:"remove",value:function(){this.cm.toTextArea()}},{key:"setValue",value:function(e){this.getEditor().setValue(e),this._emitMarkdownEditorContentChangedEvent(),this.moveCursorToEnd(),this.getEditor().refresh()}},{key:"getValue",value:function(){return this.cm.getValue("\n")}},{key:"getEditor",value:function(){return this.cm}},{key:"reset",value:function(){this.setValue("")}},{key:"_emitMarkdownEditorContentChangedEvent",value:function(){this.eventManager.emit("contentChangedFromMarkdown",this)}},{key:"_cloneCMEventObject",value:function(e){return{from:{line:e.from.line,ch:e.from.ch},to:{line:e.to.line,ch:e.to.ch}}}},{key:"_emitMarkdownEditorChangeEvent",value:function(e){if("setValue"!==e.origin){var t={source:"markdown"};this.eventManager.emit("changeFromMarkdown",t),this.eventManager.emit("change",t)}}},{key:"getCaretPosition",value:function(){return this.cm.cursorCoords()}},{key:"addWidget",value:function(e,t,n,i){i&&(e.ch+=i),this.cm.addWidget(e.end,t,!0,n)}},{key:"replaceSelection",value:function(e,t){t&&this.cm.setSelection(t.from,t.to),this.cm.replaceSelection(e),this.focus()}},{key:"replaceRelativeOffset",value:function(e,t,n){var i=this.cm.getCursor(),a={from:{line:i.line,ch:i.ch+t},to:{line:i.line,ch:i.ch+t+n}};this.replaceSelection(e,a)}},{key:"setHeight",value:function(e){this.$editorContainerEl.height(e),"auto"===e&&this.$editorContainerEl.find(".CodeMirror").height("auto")}},{key:"moveCursorToEnd",value:function(){var e=this.getEditor().getDoc(),t=e.lastLine();e.setCursor(t,e.getLine(t).length)}},{key:"moveCursorToStart",value:function(){var e=this.getEditor().getDoc(),t=e.firstLine();e.setCursor(t,0)}},{key:"scrollTop",value:function(e){return e&&this.cm.scrollTo(0,e),this.cm.getScrollInfo().top}},{key:"getRange",value:function(){var e=this.getEditor().getCursor("from"),t=this.getEditor().getCursor("to");return{start:{line:e.line,ch:e.ch},end:{line:t.line,ch:t.ch}}}},{key:"getTextObject",value:function(e){return new c.default(this,e)}},{key:"_isStateChanged",value:function(e,t){var n=!1;return tui.util.forEach(t,function(t,i){return n=e[i]!==t,!n}),n}}],[{key:"factory",value:function(t,n){var i=new e(t,n);return i.init(),i.componentManager.addManager(d.default),i}}]),e}();e.exports=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=/^[ \t]*[\d]+\. .*/,r=/^[ \t]*[-*] .*/,o=/^[ \t]*[-*]( \[[ xX]])? .*/,l=/^\|([-\s\w\d\t<>?!@#$%^&*()_=+\\\/'";: \r\[\]]*\|+)+/i,s=/^#+\s/,c=/^ {0,3}(```|\||>)/,u=function(){function e(t){n(this,e),this.mde=t,this.eventManager=t.eventManager,this.name="list"}return i(e,[{key:"isListOrParagraph",value:function(e){return!c.test(e)&&!l.test(e)&&!s.test(e)}},{key:"appendBlankLineIfNeed",value:function(e,t,n,i){var a=e.getDoc(),r=0,o=i!==n,l=a.getLine(this._getEndLineNumberOfList(a,n)+1),s=a.getLine(this._getStartLineNumberOfList(a,i)-1),c=a.getLine(t+1);(o&&this._isNeedAppendBlankLine(l)||!o&&this._isNeedAppendBlankLine(c))&&a.replaceRange("\n",{line:t,ch:a.getLine(t).length});var u=a.getLine(t-1);if((o&&this._isNeedAppendBlankLine(s)||!o&&this._isNeedAppendBlankLine(u))&&(a.replaceRange("\n",{line:i,ch:0}),r+=1),!o){var d=t+r;e.setCursor(d,a.getLine(d).length)}}},{key:"_isNeedAppendBlankLine",value:function(e){return e&&0!==e.length&&!this._isAList(e)}},{key:"createSortedLineRange",value:function(e){var t=e.from.line>e.to.line,n={line:t?e.to.line:e.from.line,ch:0},i={line:t?e.from.line:e.to.line,ch:0};return{start:n.line,end:i.line}}},{key:"expandLineRangeIfNeed",value:function(e,t,n){var i=this.createSortedLineRange(t),a=i.start,r=i.end,o=this._isDifferentListType(n,e.getLine(a)),l=this._isDifferentListType(n,e.getLine(r));return o&&(a=this._getStartLineNumberOfList(e,a)),l&&(r=this._getEndLineNumberOfList(e,r)),{start:a,end:r}}},{key:"replaceLineText",value:function(e,t,n,i){var a=e.getLine(t),r={line:t,ch:0},o={line:t,ch:a.length};a=a.replace(n,i),e.replaceRange(a,r,o)}},{key:"_isDifferentListType",value:function(e,t){return t&&0!==t.length&&e.call(this,t)}},{key:"_isAList",value:function(e){return e&&0!==e.length&&this._isListLine(e)}},{key:"_isListLine",value:function(e){return!!(e.match(o)||e.match(r)||e.match(a))}},{key:"_getStartLineNumberOfList",value:function(e,t){var n=void 0;for(n=t;n>0;n-=1){var i=e.getLine(n-1);if(!i||!this._isListLine(i))break}return n}},{key:"_getEndLineNumberOfList",value:function(e,t){var n=e.lineCount(),i=void 0;for(i=t;i<n;i+=1){var a=e.getLine(i+1);if(!a||!this._isListLine(a))break}return i}}]),e}();e.exports=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,i){n(this,e),this._mde=t,this.setRange(i||t.getRange())}return i(e,[{key:"_setStart",value:function(e){this._start=e}},{key:"_setEnd",value:function(e){this._end=e}},{key:"setRange",value:function(e){this._setStart(e.start),this._setEnd(e.end)}},{key:"setEndBeforeRange",value:function(e){this._setEnd(e.start)}},{key:"expandStartOffset",value:function(){var e=this._start;0!==e.ch&&(e.ch-=1)}},{key:"expandEndOffset",value:function(){var e=this._end;e.ch<this._mde.getEditor().getDoc().getLine(e.line).length&&(e.ch+=1)}},{key:"getTextContent",value:function(){return this._mde.getEditor().getRange(this._start,this._end)}},{key:"replaceContent",value:function(e){this._mde.getEditor().replaceRange(e,this._start,this._end,"+input")}},{key:"deleteContent",value:function(){this._mde.getEditor().replaceRange("",this._start,this._end,"+delete")}},{key:"peekStartBeforeOffset",value:function(e){var t={line:this._start.line,ch:Math.max(this._start.ch-e,0)};return this._mde.getEditor().getRange(t,this._start)}}]),e}();e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),c=i(s),u=window.Squire,d=tui.util,f=/\b(H[\d]|LI|P|BLOCKQUOTE|TD)\b/,h=/Trident\/[456]\./.test(navigator.userAgent),g=function(e){function t(){var e;a(this,t);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return l._decorateHandlerToCancelable("copy"),l._decorateHandlerToCancelable(h?"beforecut":"cut"),l._decorateHandlerToCancelable(h?"beforepaste":"paste"),l.get$Body=function(){return l.$body=l.$body||$(l.getRoot()),l.$body},l}return o(t,e),l(t,[{key:"_decorateHandlerToCancelable",value:function(e){var t=this._events[e];if(t.length>1)throw new Error("too many"+e+"handlers in squire");var n=t[0].bind(this);t[0]=function(e){e.defaultPrevented||e.squirePrevented||n(e)}}},{key:"changeBlockFormat",value:function(e,t){var n=this;this.modifyBlocks(function(i){var a=void 0,r=void 0,o=void 0,l=void 0,s=void 0,u=void 0,f=void 0;if(i.childNodes.length?a=i.childNodes[0]:(a=n.createDefaultBlock(),i.appendChild(a)),e){for(;a.firstChild;)a=a.firstChild;for(f=function(e){l.appendChild(e)};a!==i;){if(s=a.tagName,d.isFunction(e)?e(s):s===e){l=a.childNodes[0],(!c.default.isElemNode(l)||a.childNodes.length>1)&&(l=n.createDefaultBlock(),d.forEachArray(d.toArray(a.childNodes),f),u=l.lastChild,u&&"BR"===c.default.getNodeName(u)&&l.removeChild(u)),o=t?n.createElement(t,[l]):l,r=n.getDocument().createDocumentFragment(),r.appendChild(o),i=r;break}a=a.parentNode}}return r&&e||!t||"DIV"!==c.default.getNodeName(i.childNodes[0])||(i=n.createElement(t,[i.childNodes[0]])),i})}},{key:"changeBlockFormatTo",value:function(e){this.changeBlockFormat(function(e){return f.test(e)},e)}},{key:"getCaretPosition",value:function(){return this.getCursorPosition()}},{key:"replaceSelection",value:function(e,t){t&&this.setSelection(t),this._ignoreChange=!0,this.insertHTML(e)}},{key:"replaceRelativeOffset",value:function(e,t,n){var i=this.getSelection().cloneRange();this._replaceRelativeOffsetOfSelection(e,t,n,i)}},{key:"_replaceRelativeOffsetOfSelection",value:function(e,t,n,i){var a=void 0,r=void 0,o=void 0,l=i.endContainer,s=i.endOffset;"TEXT"!==c.default.getNodeName(l)&&(l=this._getClosestTextNode(l,s),l&&(s=c.default.isTextNode(l)?l.nodeValue.length:l.textContent.length)),l?(a=this.getSelectionInfoByOffset(l,s+t),i.setStart(a.element,a.offset),o=s+(t+n),r=this.getSelectionInfoByOffset(l,o),i.setEnd(r.element,r.offset),this.replaceSelection(e,i)):this.replaceSelection(e)}},{key:"_getClosestTextNode",value:function(e,t){var n=c.default.getChildNodeByOffset(e,t-1);return"TEXT"!==c.default.getNodeName(n)&&(n=n.previousSibling),n}},{key:"getSelectionInfoByOffset",value:function(e,t){var n=void 0,i=void 0,a=void 0,r=void 0,o=t>=0?"next":"previous",l=Math.abs(t),s=n;for(n="next"===o?e:e.previousSibling,a=l,r=0;n&&(i=c.default.isTextNode(n)?n.nodeValue.length:n.textContent.length,r+=i,!(l<=r));)a-=i,c.default.getTextLength(n)>0&&(s=n),n=n[o+"Sibling"];return n||(n=s,a=c.default.getTextLength(n)),"previous"===o&&(a=c.default.getTextLength(n)-a),{element:n,offset:a}}},{key:"getSelectionPosition",value:function(e,t,n){var i=this.createElement("INPUT"),a=e.cloneRange(),r=this.getSelectionInfoByOffset(e.endContainer,e.endOffset+(n||0));a.setStart(a.startContainer,a.startOffset),a.setEnd(r.element,r.offset),this._ignoreChange=!0,this.insertElement(i,a);var o=$(i).offset();return"over"!==t&&(o.top+=$(i).outerHeight()),i.parentNode.removeChild(i),e.setStart(e.endContainer,e.endOffset),e.collapse(!0),this.setSelection(e),o}},{key:"removeLastUndoStack",value:function(){this._undoStack.length&&(this._undoStackLength-=1,this._undoIndex-=1,this._undoStack.pop(),this._isInUndoState=!1)}},{key:"replaceParent",value:function(e,t,n){var i=$(e).closest(t);i.length&&(i.wrapInner("<"+n+"/>"),i.children().unwrap())}},{key:"preserveLastLine",value:function(){var e=this.get$Body().children().last();"DIV"!==c.default.getNodeName(e[0])&&(this._ignoreChange=!0,$(this.createDefaultBlock()).insertAfter(e))}},{key:"scrollTop",value:function(e){return d.isUndefined(e)?this.get$Body().scrollTop():this.get$Body().scrollTop(e)}},{key:"isIgnoreChange",value:function(){return this._ignoreChange}},{key:"focus",value:function(){var e=this.scrollTop();return u.prototype.focus.call(this),e!==this.scrollTop()&&this.scrollTop(e),this}},{key:"blockCommandShortcuts",value:function(){var e=this,t=/Mac/.test(navigator.platform),n=t?"meta":"ctrl",i=["b","i","u","shift-7","shift-5","shift-6","shift-8","shift-9","[","]"];i.forEach(function(t){e.setKeyHandler(n+"-"+t,function(e,t){t.preventDefault()})})}}]),t}(u);e.exports=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){this.name="default",this.type=e.options.initialEditType,this.editor=e,this.init(e.options.el),this._initEvent()}var r=n(98),o=i(r),l=n(54),s=i(l),c=n(9),u=i(c),d=n(91),f=i(d),h=n(94),g=i(h),v=n(93),p=i(v),m=n(96),y=i(m),b=n(95),w=i(b),k=n(92),_=i(k),C=['<div class="tui-editor-defaultUI">','<div class="te-toolbar-section"></div>','<div class="te-markdown-tab-section"></div>','<div class="te-editor-section"></div>','<div class="te-mode-switch-section"></div>',"</div>"].join("");a.prototype.init=function(e){this._renderLayout(e),this._initEditorSection(),this._initToolbar(),this._initModeSwitch(),this._initPopupAddLink(),this._initPopupAddImage(),this._initPopupAddTable(),this._initPopupAddHeading(),this._initPopupTableUtils(),this._initMarkdownTab()},a.prototype._initEditorSection=function(){this.$el.find(".te-editor-section").append(this.editor.layout.getEditorEl())},a.prototype._initEvent=function(){var e=this;this.editor.eventManager.listen("hide",this.hide.bind(this)),this.editor.eventManager.listen("show",this.show.bind(this)),this.editor.eventManager.listen("changeMode",function(){e.markdownTabControl()}),this.editor.eventManager.listen("changePreviewStyle",function(){e.markdownTabControl()})},a.prototype._renderLayout=function(e){this.$el=$(C).appendTo(e)},a.prototype._initToolbar=function(){this.toolbar=new o.default(this.editor.eventManager),this.$el.find(".te-toolbar-section").append(this.toolbar.$el)},a.prototype._initModeSwitch=function(){var e=this;this.modeSwitch=new f.default("markdown"===this.type?f.default.TYPE.MARKDOWN:f.default.TYPE.WYSIWYG),this.$el.find(".te-mode-switch-section").append(this.modeSwitch.$el),this.modeSwitch.on("modeSwitched",function(t,n){e.editor.changeMode(n)})},a.prototype.markdownTabControl=function(){this.editor.isMarkdownMode()&&"tab"===this.editor.getCurrentPreviewStyle()?(this.$el.find(".te-markdown-tab-section").show(),this.markdownTab.activate("Editor")):this.$el.find(".te-markdown-tab-section").hide()},a.prototype._initMarkdownTab=function(){var e=this.editor;this.markdownTab=new s.default({items:["Editor","Preview"],sections:[e.layout.getMdEditorContainerEl(),e.layout.getPreviewEl()]}),this.$el.find(".te-markdown-tab-section").append(this.markdownTab.$el),this.markdownTab.on("itemClick",function(t,n){"Preview"===n?e.eventManager.emit("previewNeedsRefresh"):e.getCodeMirror().focus()})},a.prototype._initPopupAddLink=function(){this.popupAddLink=new g.default({$target:this.$el,eventManager:this.editor.eventManager})},a.prototype._initPopupAddImage=function(){this.popupAddImage=new p.default({$target:this.$el,eventManager:this.editor.eventManager})},a.prototype._initPopupAddTable=function(){this.popupAddTable=new w.default({$target:this.$el,eventManager:this.editor.eventManager,$button:this.$el.find("button.tui-table"),css:{position:"absolute"}})},a.prototype._initPopupAddHeading=function(){this.popupAddHeading=new _.default({$target:this.$el,eventManager:this.editor.eventManager,$button:this.$el.find("button.tui-heading"),css:{position:"absolute"}})},a.prototype._initPopupTableUtils=function(){var e=this;this.editor.eventManager.listen("contextmenu",function(t){$(t.data.target).parents("table").length>0&&(t.data.preventDefault(),e.editor.eventManager.emit("openPopupTableUtils",t.data))}),this.popupTableUtils=new y.default({$target:this.$el,eventManager:this.editor.eventManager})},a.prototype.hide=function(){this.$el.addClass("te-hide")},a.prototype.show=function(){this.$el.removeClass("te-hide")},a.prototype.remove=function(){this.$el.remove()},a.prototype.createPopup=function(e){return u.default.factory(e)},e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){o.default.call(this,{tagName:"div",className:"te-mode-switch"}),this._render(),this._switchType(c.isExisty(e)?e:u.MARKDOWN)}var r=n(10),o=i(r),l=n(6),s=i(l),c=tui.util,u={MARKDOWN:"markdown",WYSIWYG:"wysiwyg"};a.prototype=c.extend({},o.default.prototype),a.prototype._render=function(){this.$buttons={},this.$buttons.markdown=$('<button class="te-switch-button markdown" type="button">'+s.default.get("Markdown")+"</button>"),this.$buttons.wysiwyg=$('<button class="te-switch-button wysiwyg" type="button">'+s.default.get("WYSIWYG")+"</button>"),this.$el.append(this.$buttons.markdown),this.$el.append(this.$buttons.wysiwyg),this.attachEvents({"click .markdown":"_changeMarkdown","click .wysiwyg":"_changeWysiwyg"})},a.prototype._changeMarkdown=function(){this._switchType(u.MARKDOWN)},a.prototype._changeWysiwyg=function(){this._switchType(u.WYSIWYG)},a.prototype._setActiveButton=function(e){c.forEach(this.$buttons,function(e){e.removeClass("active")}),this.$buttons[e].addClass("active")},a.prototype._switchType=function(e){this.type!==e&&(this.type=e,this._setActiveButton(e),this.trigger("modeSwitched",this.type))},a.TYPE=u,e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=["<ul>",'<li data-value="1" data-type="Heading"><h1>'+s.default.get("Heading")+" 1</h1></li>",'<li data-value="2" data-type="Heading"><h2>'+s.default.get("Heading")+" 2</h2></li>",'<li data-value="3" data-type="Heading"><h3>'+s.default.get("Heading")+" 3</h3></li>",'<li data-value="4" data-type="Heading"><h4>'+s.default.get("Heading")+" 4</h4></li>",'<li data-value="5" data-type="Heading"><h5>'+s.default.get("Heading")+" 5</h5></li>",'<li data-value="6" data-type="Heading"><h6>'+s.default.get("Heading")+" 6</h6></li>",'<li data-type="Paragraph"><div>'+s.default.get("Paragraph")+"</div></li>","</ul>"].join("");e=c.extend({title:!1,className:"te-heading-add",content:t},e),o.default.call(this,e),this.eventManager=e.eventManager,this.$button=e.$button,this.render(),this._linkWithEventManager(),this._bindEvent()}var r=n(9),o=i(r),l=n(6),s=i(l),c=tui.util;a.prototype=c.extend({},o.default.prototype),a.prototype._linkWithEventManager=function(){var e=this;this.eventManager.listen("focus",function(){e.hide()}),this.eventManager.listen("openHeadingSelect",function(){e.eventManager.emit("closeAllPopup"),e.$el.css({top:e.$button.position().top+e.$button.height()+5,left:e.$button.position().left}),e.show()}),this.eventManager.listen("closeAllPopup",function(){e.hide()})},a.prototype._bindEvent=function(){var e=this;this.on("click li",function(){e.eventManager.emit("command",$(this).data("type"),$(this).data("value"))})},e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=['<div class="te-tab-section"></div>','<div class="te-url-type">','<label for="">'+u.default.get("Image URL")+"</label>",'<input type="text" class="te-image-url-input" />',"</div>",'<form enctype="multipart/form-data" class="te-file-type">','<label for="">'+u.default.get("Select image file")+"</label>",'<input type="file" class="te-image-file-input" accept="image/*" />',"</form>",'<label for="url">'+u.default.get("Description")+"</label>",'<input type="text" class="te-alt-text-input" />','<div class="te-button-section">','<button type="button" class="te-ok-button">'+u.default.get("OK")+"</button>",'<button type="button" class="te-close-button">'+u.default.get("Cancel")+"</button>","</div>"].join("");e=d.extend({title:u.default.get("Insert image"),className:"te-popup-add-image tui-editor-popup",content:t},e),o.default.call(this,e),this.eventManager=e.eventManager,this.render(),this._bindContentEvent(),this._linkWithEventManager(),this._initApplyImageBindContext()}var r=n(9),o=i(r),l=n(54),s=i(l),c=n(6),u=i(c),d=tui.util;a.prototype=d.extend({},o.default.prototype),a.prototype._bindContentEvent=function(){var e=this;this.on("click .te-ok-button",function(){e.trigger("okButtonClicked",e),e.hide()}),this.on("click .te-close-button",function(){e.trigger("closeButtonClicked",e),e.hide()}),this.on("shown",function(){e.$el.find(".te-image-url-input").focus()}),this.on("hidden",function(){e.resetInputs()}),this.tab.on("itemClick",function(){e.resetInputs()}),this.on("change .te-image-file-input",function(){var t=e.$el.find(".te-image-file-input").val().split("\\").pop();e.$el.find(".te-alt-text-input").val(t)})},a.prototype._linkWithEventManager=function(){var e=this;this.eventManager.listen("focus",function(){e.hide()}),this.eventManager.listen("openPopupAddImage",function(){e.eventManager.emit("closeAllPopup"),e.show()}),this.eventManager.listen("closeAllPopup",function(){e.hide()}),this.on("okButtonClicked",function(){e._isUrlType()?e.applyImage():(e._preAltValue=e.$el.find(".te-alt-text-input").val(),e.eventManager.emit("addImageBlobHook",e.$el.find(".te-image-file-input")[0].files[0],e.applyImage))})},a.prototype._initApplyImageBindContext=function(){var e=this;this.applyImage=function(t){var n=void 0;n=t?e._getImageInfoWithGivenUrl(t):e._getImageInfo(),e.eventManager.emit("command","AddImage",n),e.hide()}},a.prototype._isUrlType=function(){return!!this.$el.find(".te-image-url-input").val()},a.prototype._renderContent=function(){var e=this.$el;o.default.prototype._renderContent.call(this),this.tab=new s.default({initName:u.default.get("File"),items:[u.default.get("File"),u.default.get("URL")],sections:[e.find(".te-file-type"),e.find(".te-url-type")]}),this.$body.find(".te-tab-section").append(this.tab.$el)},a.prototype._getImageInfoWithGivenUrl=function(e){var t=this._preAltValue;return this._preAltValue="",this._makeImageInfo(e,t)},a.prototype._getImageInfo=function(){var e=this.$el.find(".te-image-url-input").val(),t=this.$el.find(".te-alt-text-input").val();return this._makeImageInfo(e,t)},a.prototype._makeImageInfo=function(e,t){return{imageUrl:e,altText:t}},a.prototype._getImageFileForm=function(){return this.$el.find("form")},a.prototype.resetInputs=function(){this.$el.find("input").val("")},e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=['<label for="linkText">'+s.default.get("Link text")+"</label>",'<input type="text" class="te-link-text-input" />','<label for="url">'+s.default.get("URL")+"</label>",'<input type="text" class="te-url-input" />','<div class="te-button-section">','<button type="button" class="te-ok-button">'+s.default.get("OK")+"</button>",'<button type="button" class="te-close-button">'+s.default.get("Cancel")+"</button>","</div>"].join("");e=c.extend({title:s.default.get("Insert link"),className:"te-popup-add-link tui-editor-popup",content:t},e),o.default.call(this,e),this.render(),this._bindContentEvent(),this._linkWithEventManager(e.eventManager)}var r=n(9),o=i(r),l=n(6),s=i(l),c=tui.util;a.prototype=c.extend({},o.default.prototype),a.prototype._bindContentEvent=function(){var e=this;this.on("click .te-ok-button",function(){e.trigger("okButtonClicked",e),e.hide()}),this.on("click .te-close-button",function(){e.trigger("closeButtonClicked",e),e.hide()}),this.on("shown",function(){e.$el.find(".te-link-text-input").focus()}),this.on("hidden",function(){e.resetInputs()})},a.prototype._linkWithEventManager=function(e){var t=this;e.listen("focus",function(){t.hide()}),e.listen("openPopupAddLink",function(){e.emit("closeAllPopup"),t.show()}),e.listen("closeAllPopup",function(){t.hide()}),this.on("okButtonClicked",function(){e.emit("command","AddLink",t.getValue())})},a.prototype.getValue=function(){return{linkText:this.$el.find(".te-link-text-input").val(),url:this.$el.find(".te-url-input").val().replace(/\(/g,"%28").replace(/\)/g,"%29")}},a.prototype.resetInputs=function(){this.$el.find("input").val("")},e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e=l.extend({title:!1,className:"te-popup-add-table",content:s},e),o.default.call(this,e),this._selectedBound={},this._tableBound={},this.eventManager=e.eventManager,this.$button=e.$button,this.render(),this._cacheElements(),this._bindContentEvent(),this._linkWithEventManager(),this._setTableSizeByBound(h,d)}var r=n(9),o=i(r),l=tui.util,s=['<div class="te-table-selection">','<div class="te-table-header"></div>','<div class="te-table-body"></div>','<div class="te-selection-area"></div>',"</div>",'<p class="te-description"></p>'].join(""),c=25,u=17,d=7,f=14,h=5,g=9,v=1,p=1,m=1,y=1;a.prototype=l.extend({},o.default.prototype),a.prototype._cacheElements=function(){this.$header=this.$el.find(".te-table-header"),this.$body=this.$el.find(".te-table-body"),this.$selection=this.$el.find(".te-selection-area"),this.$desc=this.$el.find(".te-description")},a.prototype._bindContentEvent=function(){var e=this;this.on("mousemove .te-table-selection",function(t){var n=t.pageX-e._selectionOffset.left,i=t.pageY-e._selectionOffset.top,a=e._getSelectionBoundByOffset(n,i);e._resizeTableBySelectionIfNeed(a.col,a.row),e._setSelectionAreaByBound(a.col,a.row),e._setDisplayText(a.col,a.row),e._setSelectedBound(a.col,a.row)}),this.on("click .te-table-selection",function(){var t=e._getSelectedTableSize();e.eventManager.emit("command","Table",t.col,t.row)})},a.prototype._linkWithEventManager=function(){var e=this;this.eventManager.listen("focus",function(){e.hide()}),this.eventManager.listen("openPopupAddTable",function(){e.eventManager.emit("closeAllPopup"),e.$el.css({top:e.$button.position().top+e.$button.height()+5,left:e.$button.position().left}),e.show(),e._selectionOffset=e.$el.find(".te-table-selection").offset()}),this.eventManager.listen("closeAllPopup",function(){e.hide()})},a.prototype._resizeTableBySelectionIfNeed=function(e,t){var n=this._getResizedTableBound(e,t);n&&this._setTableSizeByBound(n.col,n.row)},a.prototype._getResizedTableBound=function(e,t){var n=void 0,i=void 0,a=void 0;return e>=h&&e<g?n=e+1:e<h&&(n=h),t>=d&&t<f?i=t+1:t<d&&(i=d),this._isNeedResizeTable(n,i)&&(a={row:i||this._tableBound.row,col:n||this._tableBound.col}),a},a.prototype._isNeedResizeTable=function(e,t){return e&&e!==this._tableBound.col||t&&t!==this._tableBound.row},a.prototype._getBoundByOffset=function(e,t){var n=parseInt(t/u,10),i=parseInt(e/c,10);return{row:n,col:i}},a.prototype._getOffsetByBound=function(e,t){var n=e*c+c,i=t*u+u;return{x:n,y:i}},a.prototype._setTableSizeByBound=function(e,t){var n=this._getOffsetByBound(e,t-m);this._setTableSize(n.x,n.y),this._tableBound.row=t,this._tableBound.col=e},a.prototype._getSelectionBoundByOffset=function(e,t){var n=this._getBoundByOffset(e,t);return n.row<v?n.row=v:n.row>this._tableBound.row&&(n.row=this._tableBound.row),n.col<p?n.col=p:n.col>this._tableBound.col&&(n.col=this._tableBound.col),n},a.prototype._setSelectionAreaByBound=function(e,t){var n=this._getOffsetByBound(e,t);this._setSelectionArea(n.x,n.y)},a.prototype._setSelectedBound=function(e,t){this._selectedBound.col=e,this._selectedBound.row=t},a.prototype._getSelectedTableSize=function(){return{row:this._selectedBound.row+1,col:this._selectedBound.col+1}},a.prototype._setDisplayText=function(e,t){this.$desc.html(e+1+" x "+(t+1))},a.prototype._setTableSize=function(e,t){e+=y,t+=y,this.$header.css({height:u,width:e}),this.$body.css({height:t,width:e}),this.$el.css({width:e+30})},a.prototype._setSelectionArea=function(e,t){e+=y,t+=y,this.$selection.css({height:t,width:e})},a.CELL_WIDTH=c,a.CELL_HEIGHT=u,a.MIN_ROW_SELECTION_INDEX=v,a.MIN_COL_SELECTION_INDEX=p,e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=['<button type="button" class="te-table-add-row">'+s.default.get("Add row")+"</button>",'<button type="button" class="te-table-add-col">'+s.default.get("Add col")+"</button>",'<button type="button" class="te-table-remove-row">'+s.default.get("Remove row")+"</button>",'<button type="button" class="te-table-remove-col">'+s.default.get("Remove col")+"</button>",'<button type="button" class="te-table-col-align-left">'+s.default.get("Align left")+"</button>",'<button type="button" class="te-table-col-align-center">'+s.default.get("Align center")+"</button>",'<button type="button" class="te-table-col-align-right">'+s.default.get("Align right")+"</button>",'<button type="button" class="te-table-remove">'+s.default.get("Remove table")+"</button>"].join("");e=c.extend({title:!1,className:"te-popup-table-utils",content:t},e),o.default.call(this,e),this.eventManager=e.eventManager,this.render(),this._bindContentEvent(),this._linkWithEventManager()}var r=n(9),o=i(r),l=n(6),s=i(l),c=tui.util;a.prototype=c.extend({},o.default.prototype),a.prototype._bindContentEvent=function(){var e=this;this.on("click .te-table-add-row",function(){e.eventManager.emit("command","AddRow")}),this.on("click .te-table-add-col",function(){e.eventManager.emit("command","AddCol")}),this.on("click .te-table-remove-row",function(){e.eventManager.emit("command","RemoveRow")}),this.on("click .te-table-col-align-left",function(){e.eventManager.emit("command","AlignCol","left")}),this.on("click .te-table-col-align-center",function(){e.eventManager.emit("command","AlignCol","center")}),this.on("click .te-table-col-align-right",function(){e.eventManager.emit("command","AlignCol","right")}),this.on("click .te-table-remove-col",function(){e.eventManager.emit("command","RemoveCol")}),this.on("click .te-table-remove",function(){e.eventManager.emit("command","RemoveTable")})},a.prototype._linkWithEventManager=function(){var e=this;this.eventManager.listen("focus",function(){e.hide()}),this.eventManager.listen("mousedown",function(){e.hide()}),this.eventManager.listen("openPopupTableUtils",function(t){var n=e.$el.parent().offset(),i=t.clientX-n.left,a=t.clientY-n.top+$(window).scrollTop();e.eventManager.emit("closeAllPopup"),e.$el.css({position:"absolute",top:a+5,left:i+10}),e.show()}),this.eventManager.listen("closeAllPopup",function(){e.hide()})},e.exports=a},function(e,t){"use strict";function n(e,t){var n=[],a=void 0;return i.isArray(t)||(t=[t]),i.forEach(t,function(t){a=e.replace(/\${([\w]+)}/g,function(e,n){return i.isExisty(t,n)?t[n].toString():""}),n.push(a)}),n}var i=tui.util;e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){o.default.call(this,{tagName:"div",className:"tui-editor-defaultUI-toolbar"}),this.buttons=[],this.eventManager=e,this.render(),this._initButton()}var r=n(10),o=i(r),l=n(53),s=i(l),c=n(6),u=i(c),d=tui.util;a.prototype=d.extend({},o.default.prototype),a.prototype.render=function(){this.$buttonContainer=this.$el},a.prototype.addButton=function(e,t){var n=this,i="tui-toolbar-button-group",a=$('<div class="'+i+'"></div>');d.isArray(e)?d.forEach(e,function(e){a.append(n._setButton(e).$el)}):a.append(this._setButton(e).$el),t?this.$buttonContainer.find("."+i).eq(t-1).after(a):this.$buttonContainer.append(a)},a.prototype._setButton=function(e){var t=this.eventManager;return e.render||(e=new s.default(e)),e.on("command",function(e,n){t.emit("command",n)}),e.on("event",function(e,n){t.emit(n)}),this.buttons.push(e),e},a.prototype._initButton=function(){var e=this;this.addButton(new s.default({className:"tui-heading",event:"openHeadingSelect",tooltip:u.default.get("Headings")})),this.addButton([new s.default({className:"tui-bold",command:"Bold",tooltip:u.default.get("Bold"),state:"bold"}),new s.default({className:"tui-italic",command:"Italic",tooltip:u.default.get("Italic"),state:"italic"}),new s.default({className:"tui-strike",command:"Strike",text:"~",tooltip:u.default.get("Strike"),state:"strike"})]),this.addButton([new s.default({className:"tui-ul",command:"UL",tooltip:u.default.get("Unordered list")}),new s.default({className:"tui-ol",command:"OL",tooltip:u.default.get("Ordered list")}),new s.default({className:"tui-task",command:"Task",tooltip:u.default.get("Task")})]),this.addButton([new s.default({className:"tui-hrline",command:"HR",tooltip:u.default.get("Line")}),new s.default({className:"tui-table",event:"openPopupAddTable",tooltip:u.default.get("Insert table")
})]),this.addButton([new s.default({className:"tui-image",event:"openPopupAddImage",tooltip:u.default.get("Insert image")}),new s.default({className:"tui-link",event:"openPopupAddLink",tooltip:u.default.get("Insert link")})]),this.addButton(new s.default({className:"tui-quote",command:"Blockquote",tooltip:u.default.get("Blockquote"),state:"quote"})),this.addButton([new s.default({className:"tui-codeblock",command:"CodeBlock",text:"CB",tooltip:u.default.get("Insert codeblock"),state:"codeBlock"}),new s.default({className:"tui-code",command:"Code",tooltip:u.default.get("Code"),state:"code"})]),this.eventManager.listen("stateChange",function(t){d.forEach(e.buttons,function(e){e.state&&(t[e.state]?e.$el.addClass("active"):e.$el.removeClass("active"))})})},e.exports=a},function(e,t){"use strict";function n(){this.$el=$(i),this.$el.appendTo("body"),this.$el.hide()}var i='<div class="tui-tooltip"><div class="arrow"></div><span class="text"></span></span></div>';n.prototype.show=function(e,t){this.$el.css({top:e.offset().top+e.height()+13,left:e.offset().left+3}).find(".text").html(t).end().show()},n.prototype.hide=function(){this.$el.hide()},e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s=n(106),c=i(s),u=n(6),d=i(u),f="tui-paste-table-bookmark",h="tui-paste-table-cell-bookmark",g=function(){function e(t){a(this,e),this.wwe=t,this._pch=new c.default(this.wwe),this._selectedSellCount=0,this._$clipboardArea=null}return r(e,[{key:"init",value:function(){this.wwe.getEditor().addEventListener("willPaste",this._onWillPaste.bind(this)),this.wwe.eventManager.listen("copy",this._onCopyCut.bind(this)),this.wwe.eventManager.listen("copyAfter",this._onCopyAfter.bind(this)),this.wwe.eventManager.listen("cut",this._onCopyCut.bind(this)),this.wwe.eventManager.listen("cutAfter",this._onCutAfter.bind(this))}},{key:"_onCopyCut",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection"),n=t.getSelectedCells().length;if(n){if(!t.mergedTableSelectionManager)return t.createRangeBySelectedCells(),void t.removeClassAttrbuteFromAllCellsIfNeed();var i=this.wwe.getEditor(),a=e.data,r=i.getSelection().cloneRange(),o=$("<div />");this._extendRange(r),o.append(r.cloneContents()),this._updateCopyDataForListTypeIfNeed(r,o),this.wwe.eventManager.emit("copyBefore",{source:"wysiwyg",$clipboardContainer:o}),this._setClipboardData(a,o.html(),o.text())}}},{key:"_clearClipboardArea",value:function(){this._$clipboardArea&&(this._$clipboardArea.remove(),this._$clipboardArea=null)}},{key:"_onCopyAfter",value:function(){this.wwe.getEditor().get$Body().focus(),this._clearClipboardArea()}},{key:"_onCutAfter",value:function(){var e=this.wwe.getEditor().getSelection();e.deleteContents(),this.wwe.getEditor().focus(),this._clearClipboardArea()}},{key:"_onWillPaste",value:function(e){var t=this,n=$("<div>").append(e.fragment.cloneNode(!0));this._setTableBookmark(n),this._pasteToTable(n)?e.preventDefault():(this._preparePaste(n),this._setTableBookmark(n),e.fragment=document.createDocumentFragment(),$(n[0].childNodes).each(function(t,n){e.fragment.appendChild(n)}));var i=function e(){t.wwe.getEditor().removeEventListener("input",e),t.wwe.eventManager.emit("wysiwygRangeChangeAfter",t),t._focusTableBookmark()};this.wwe.getEditor().addEventListener("input",i)}},{key:"_setClipboardData",value:function(e,t,n){tui.util.browser.msie?(e.squirePrevented=!0,this._$clipboardArea=this._createClipboardArea(),this._$clipboardArea.html(t),this._$clipboardArea.focus(),window.getSelection().selectAllChildren(this._$clipboardArea[0])):(e.preventDefault(),e.stopPropagation(),e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",n))}},{key:"_createClipboardArea",value:function(){return $("<DIV>").attr({contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"}).appendTo(document.body)}},{key:"_updateCopyDataForListTypeIfNeed",value:function(e,t){var n=e.commonAncestorContainer.nodeName;if("UL"===n||"OL"===n){var i=$("<"+n+" />");i.append(t.html()),t.html(""),t.append(i)}}},{key:"_removeEmptyFontElement",value:function(e){e.children("font").each(function(e,t){var n=$(t);n.text().trim()||n.remove()})}},{key:"_pasteToTable",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=this.wwe.componentManager.getManager("tableSelection"),i=this.wwe.getEditor().getSelection(),a=t.isInTable(i),r=e[0].childNodes,o=1===r.length&&"TABLE"===r[0].nodeName,l=!1;return a&&(o?(t.pasteClipboardData(e.first()),e.html(""),l=!0):n.getSelectedCells().length&&(alert(d.default.get("Cannot paste values ​​other than a table in the cell selection state")),e.html(""),l=!0)),l}},{key:"_preparePaste",value:function(e){this._removeEmptyFontElement(e),this._pch.preparePaste(e),this.wwe.eventManager.emit("pasteBefore",{source:"wysiwyg",$clipboardContainer:e})}},{key:"_setTableBookmark",value:function(e){var t=$(e[0].childNodes).last(),n=t[0]&&"TABLE"===t[0].nodeName;n&&t.addClass(f)}},{key:"_focusTableBookmark",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=e.get$Body().find("."+f),i=e.get$Body().find("."+h);n.length&&(n.removeClass(f),t.setEndAfter(n[0]),t.collapse(!1),e.setSelection(t)),i.length&&(i.removeClass(h),t.selectNodeContents(i[0]),t.collapse(!1),e.setSelection(t))}},{key:"_extendRange",value:function(e){(!l.default.isTextNode(e.commonAncestorContainer)||0===e.startOffset&&e.commonAncestorContainer.textContent.length===e.endOffset||"TD"===e.commonAncestorContainer.nodeName)&&(0===e.startOffset&&(e=this._extendStartRange(e)),e.endOffset===l.default.getOffsetLength(e.endContainer)&&(e=this._extendEndRange(e)),this._isWholeCommonAncestorContainerSelected(e)&&e.selectNode(e.commonAncestorContainer),this.wwe.getEditor().setSelection(e))}},{key:"_extendStartRange",value:function(e){for(var t=e.startContainer;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&!t.previousSibling;)t=t.parentNode;return e.setStart(t.parentNode,l.default.getNodeOffsetOfParent(t)),e}},{key:"_extendEndRange",value:function(e){for(var t=e.endContainer,n=t.nextSibling;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&(!n||"BR"===l.default.getNodeName(n)&&t.parentNode.lastChild===n);)t=t.parentNode,n=t.nextSibling;return e.setEnd(t.parentNode,l.default.getNodeOffsetOfParent(t)+1),e}},{key:"_isWholeCommonAncestorContainerSelected",value:function(e){return e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE&&e.commonAncestorContainer!==this.wwe.get$Body()[0]&&0===e.startOffset&&e.endOffset===e.commonAncestorContainer.childNodes.length&&e.commonAncestorContainer===e.startContainer&&e.commonAncestorContainer===e.endContainer}}]),e}();e.exports=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.replace(/[<>&]/g,function(e){return u[e]||e})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),s=i(l),c=tui.util,u={"&":"&amp;","<":"&lt;",">":"&gt;"},d=/\u200B/g,f="data-te-codeblock",h=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="codeblock",this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initKeyHandler",value:function(){this.wwe.addKeyEventHandler("BACK_SPACE",this._removeCodeblockIfNeed.bind(this))}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e.splitCodeblockToEachLine()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return e._mergeCodeblockEachlinesFromHTMLText(t)})}},{key:"prepareToPasteOnCodeblock",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.getEditor().getDocument().createDocumentFragment();return 1===e.length&&this._isCodeBlock(e[0])?n.appendChild(this._copyCodeblockTypeFromRangeCodeblock(e.shift(),t)):n.appendChild(this._copyCodeblockTypeFromRangeCodeblock(this.convertToCodeblock(e),t)),n}},{key:"convertToCodeblock",value:function(e){for(var t=$("<pre />"),n=this,i=e.shift();c.isTruthy(i);)t.append(n._makeCodeBlockLineHtml(c.isString(i)?i:i.textContent)),i=e.shift();return t.attr(f,""),t[0]}},{key:"_copyCodeblockTypeFromRangeCodeblock",value:function(e,t){var n=s.default.getParentUntil(t.commonAncestorContainer,this.wwe.get$Body()[0]);if("PRE"===s.default.getNodeName(n)){var i=$(n).prop("attributes");c.forEach(i,function(t){$(e).attr(t.name,t.value)})}return e}},{key:"_mergeCodeblockEachlinesFromHTMLText",value:function(e){return e=e.replace(/<pre( .*?)?>(.*?)<\/pre>/g,function(e,t,n){return n=n.replace(/<br \/>/g,"\n"),n=n.replace(/<div ?(.*?)>/g,""),n=n.replace(/\n$/,""),"<pre><code"+(t||"")+">"+n+"</code></pre>"})}},{key:"splitCodeblockToEachLine",value:function(e){var t=this;e||(e=this.wwe.get$Body()),$(e).find("pre").each(function(e,n){var i=$(n),a=i.find("code").attr("data-language"),r=void 0;i.children().length>1&&(r=[],i.children().each(function(e,t){"DIV"!==t.nodeName&&"P"!==t.nodeName||$(t).find("br").length||$(t).append("<br>")})),i.find("br").replaceWith("\n"),r=i.text().replace(/\s+$/,"").split(/\n/g),a&&(i.attr("data-language",a),i.addClass("lang-"+a)),i.empty(),c.forEach(r,function(e){i.append(t._makeCodeBlockLineHtml(e))}),i.attr(f,"")})}},{key:"_makeCodeBlockLineHtml",value:function(e){return e=e?r(e):"<br>","<div>"+e+"</div>"}},{key:"_removeCodeblockIfNeed",value:function(e,t){var n=this;if(!this.isInCodeBlock(t))return!0;var i=$(t.startContainer).closest("pre"),a=$(i).find("div").eq(0),r=a.text().replace(d,"");return 0!==t.startOffset&&0!==r.length||!($(i).find("div").length<=1)||(this.wwe.getEditor().modifyBlocks(function(){var e=n.wwe.getEditor().getDocument().createDocumentFragment(),t=void 0;return t=0===r.length?"<br>":a.html().replace(d,""),$(e).append($("<div>"+t+"</div>")),e}),!1)}},{key:"isInCodeBlock",value:function(e){var t=void 0;return t=e.collapsed?e.startContainer:e.commonAncestorContainer,this._isCodeBlock(t)}},{key:"_isCodeBlock",value:function(e){return!!$(e).closest("pre").length}}]),e}();e.exports=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s=/h[\d]/i,c=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="heading",this._init()}return r(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._wrapDefaultBlockToHeadingInner()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){return!e.wwe.hasFormatWithRx(s)||(e._onEnter(t,n),!1)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!e.wwe.hasFormatWithRx(s)||(e._removePrevTopNodeIfNeed(t,n),!1)})}},{key:"_wrapDefaultBlockToHeadingInner",value:function(){this.wwe.get$Body().find("h1, h2, h3, h4, h5, h6").each(function(e,t){$(t).children("div, p").length<=0&&$(t).wrapInner("<div />")})}},{key:"_unwrapHeading",value:function(){this.wwe.unwrapBlockTag(function(e){return s.test(e)})}},{key:"_onEnter",value:function(e,t){var n=this;t.startOffset>0?this.wwe.defer(function(e){n._unwrapHeading(),e.getEditor().removeLastUndoStack()}):(e.preventDefault(),this._insertEmptyBlockToPrevious(t))}},{key:"_insertEmptyBlockToPrevious",value:function(e){this.wwe.getEditor().saveUndoState(e),$("<div><br></div>").insertBefore(l.default.getParentUntil(e.startContainer,this.wwe.get$Body()[0]))}},{key:"_removePrevTopNodeIfNeed",value:function(e,t){var n=!1;if(t.collapsed&&0===t.startOffset){var i=t.startContainer,a=l.default.getTopPrevNodeUnder(i,this.wwe.get$Body()[0]),r=a&&0===a.textContent.length,o=this.wwe.getEditor();0===i.textContent.length?n=this._removeHedingAndChangeSelection(e,t,a):r&&(e.preventDefault(),o.saveUndoState(t),$(a).remove(),n=!0)}return n}},{key:"_removeHedingAndChangeSelection",value:function(e,t,n){var i=t.startContainer,a=this.wwe.getEditor(),r=this.wwe.get$Body(),o=s.test(l.default.getNodeName(i)),c=o?i:$(i).parents("h1,h2,h3,h4,h5,h6")[0],u=n,d=1;return e.defaultPrevented||(e.preventDefault(),a.saveUndoState(t)),$(c).remove(),n||(u=r.children("div").first()[0],d=0),t.setStart(u,d),t.collapse(!0),a.setSelection(t),!0}}]),e}();e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return this.nodeType===Node.TEXT_NODE}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),s=i(l),c=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="hr",this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._unwrapDivOnHr()}),this.eventManager.listen("wysiwygGetValueBefore",function(){e._wrapDefaultBlockToOrphanTexts()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler(function(t,n){return e._onTypedInHr(n)}),this.wwe.addKeyEventHandler("ENTER",function(t,n){return!n.collapsed||e._removeHrOnEnter(n,t)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!n.collapsed||e._removeHrOnBackspace(n,t)})}},{key:"_isInHr",value:function(e){return"HR"===s.default.getNodeName(e.startContainer.childNodes[e.startOffset])}},{key:"_isNearHr",value:function(e){var t=s.default.getChildNodeByOffset(e.startContainer,e.startOffset-1);return"HR"===s.default.getNodeName(t)}},{key:"_onTypedInHr",value:function(e){var t=this;(this._isInHr(e)||this._isNearHr(e))&&this.wwe.defer(function(e){e.saveSelection(),t._wrapDefaultBlockToOrphanTexts(),e.restoreSavedSelection()})}},{key:"_removeHrOnEnter",value:function(e,t){var n=void 0,i=void 0;return this._isInHr(e)?n=s.default.getChildNodeByOffset(e.startContainer,e.startOffset):this._isNearHr(e)&&(n=s.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),i="before"),this._changeHrToNewDefaultBlock(n,e,t,i)}},{key:"_removeHrOnBackspace",value:function(e,t){var n=void 0,i=void 0;return this._isInHr(e)?n=s.default.getChildNodeByOffset(e.startContainer,e.startOffset):0===e.startOffset?(n=s.default.getTopPrevNodeUnder(e.startContainer,this.wwe.get$Body()[0]),i="none"):this._isNearHr(e)&&(n=s.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),i="before"),this._changeHrToNewDefaultBlock(n,e,t,i)}},{key:"_changeHrToNewDefaultBlock",value:function(e,t,n,i){return!e||"HR"!==s.default.getNodeName(e)||(n.preventDefault(),"none"!==i&&this.wwe.breakToNewDefaultBlock(t,i),$(e).remove(),!1)}},{key:"_unwrapDivOnHr",value:function(){var e=this.wwe.get$Body()[0];this.wwe.get$Body().find("hr").each(function(t,n){var i=$(n).parent("div");i[0]!==e&&(i.find("br").remove(),$(n).unwrap())})}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){var e=this.wwe.get$Body().contents().filter(r);e.each(function(e,t){$(t).wrap("<div />")})}}]),e}();e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s=/<li/i,c=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="list",this._init()}return r(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter",function(){e._findAndRemoveEmptyList(),e._removeBranchListAll(),e._wrapDefaultBlockToListInner()}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeBranchListAll(),e._wrapDefaultBlockToListInner()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return e._prepareInsertBlankToBetweenSameList(t)}),this.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){return e.replace(/:BLANK_LINE:\n/g,"")})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("TAB",function(t,n){var i=void 0;return n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&(t.preventDefault(),e.eventManager.emit("command","IncreaseDepth"),i=!1),i}),this.wwe.addKeyEventHandler("SHIFT+TAB",function(t,n){var i=void 0;if(n.collapsed&&e.wwe.getEditor().hasFormat("LI")){t.preventDefault();var a=$(n.startContainer).closest("li").children("ul, ol");e.eventManager.emit("command","DecreaseDepth"),a.length&&!a.prev().length&&e._removeBranchList(a),i=!1}return i}),this.wwe.addKeyEventHandler("ENTER",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){var t=e.wwe.getRange(),n=$(t.startContainer).parents("li").eq(0);e._removeBranchListAll(n)})}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){e._removeBranchListAll()})})}},{key:"_findAndRemoveEmptyList",value:function(){this.wwe.get$Body().find("ul,ol").each(function(e,t){s.test(t.innerHTML)||$(t).remove()})}},{key:"_removeBranchListAll",value:function(e){var t=this;e=e?$(e):this.wwe.get$Body(),e.find("li ul, li ol").each(function(e,n){n&&!n.previousSibling&&t._removeBranchList(n)})}},{key:"_removeBranchList",value:function(e){for(var t=$(e),n=t;!n[0].previousSibling&&n[0].parentElement.tagName.match(/UL|OL|LI/g);)n=n.parent();var i=n.children("li").eq(0);n.prepend(t.children().unwrap()),i.remove()}},{key:"_wrapDefaultBlockToListInner",value:function(){this.wwe.get$Body().find("li").each(function(e,t){$(t).children("div, p").length<=0&&($(t).wrapInner("<div />"),$(t).find("div").children("ul, ol").appendTo(t))})}},{key:"_prepareInsertBlankToBetweenSameList",value:function(e){return e.replace(/<\/(ul|ol)>(<br \/>|<br>){0,}<\1>/g,"</$1>:BLANK_LINE:<$1>")}},{key:"getLinesOfSelection",value:function(e,t){var n=[],i=!1,a=!0,r=void 0;l.default.isTextNode(e)&&(e=$(e).parents("div").first()[0]),l.default.isTextNode(t)&&(t=$(t).parents("div").first()[0]);for(var o=e;a&&$(o).is("DIV");o=r)n.push(o),o===t&&(i=!0),r=o.nextElementSibling,a=r&&!i;return n}}]),e}();e.exports=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){n(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="p",this._initEvent()}return i(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._splitPtagContentLines(t)}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._ensurePtagContentWrappedWithDiv(),e._unwrapPtags()})}},{key:"_splitPtagContentLines",value:function(e){if(e){var t=$("<div />");t.html(e),t.find("p").each(function(e,t){var n=t.innerHTML,i=n.split(/<br>/gi),a=i.length-1,r=t.nextElementSibling||t.nextSibling,o="";o=i.map(function(e,t){var n="";return t>0&&t<a&&(e=e?e:"<br>"),e&&(n="<div>"+e+"</div>"),n}),r&&"P"===r.nodeName&&o.push("<div><br></div>"),$(t).replaceWith($(o.join("")))}),e=t.html()}return e}},{key:"_ensurePtagContentWrappedWithDiv",value:function(){this.wwe.get$Body().find("p").each(function(e,t){$(t).find("div").length<=0&&$(t).wrapInner("<div />"),$(t).next().is("p")&&$(t).append("<div><br></div>")})}},{key:"_unwrapPtags",value:function(){this.wwe.get$Body().find("div").each(function(e,t){$(t).parent().is("p")&&$(t).unwrap()})}}]),e}();e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s=n(13),c=i(s),u=tui.util,d=function(){function e(t){a(this,e),this.wwe=t}return r(e,[{key:"preparePaste",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.componentManager.getManager("codeblock"),i=!1,a=$("<div />"),r=void 0,o=void 0,s=void 0;this._pasteFirstAid(e);var c=u.toArray(e[0].childNodes);for(c.length&&"DIV"===c[0].tagName&&(a.append(this._unwrapFragmentFirstChildForPasteAsInline(c[0])),c.shift());c.length;)o=c[0],r=l.default.getNodeName(o),s="LI"===r||"UL"===r||"OL"===r,n.isInCodeBlock(t)?a.append(n.prepareToPasteOnCodeblock(c)):s?(a.append(this._prepareToPasteList(c,t,i)),i=!0):a.append(c.shift());e.html(a.html())}},{key:"_wrapOrphanNodeWithDiv",value:function(e){var t=$("<div />"),n=u.toArray(e[0].childNodes),i=void 0;return u.forEachArray(n,function(e){var n=3===e.nodeType,a=/^(SPAN|A|CODE|EM|I|STRONG|B|S|ABBR|ACRONYM|CITE|DFN|KBD|SAMP|VAR|BDO|Q|SUB|SUP)$/gi.test(e.tagName);n||a?(i||(i=document.createElement("div"),t.append(i)),i.appendChild(e)):(i&&"BR"!==i.lastChild.tagName&&i.appendChild($("<br/>")[0]),i=null,t.append(e))}),t.html()}},{key:"_pasteFirstAid",value:function(e){var t=this,n="div, section, article, aside, nav, menus, p";e.html((0,c.default)(e.html(),!0)),e.find("*").each(function(e,n){t._removeStyles(n)}),this._unwrapIfNonBlockElementHasBr(e),this._unwrapNestedBlocks(e,n),this._removeUnnecessaryBlocks(e,n),e.html(this._wrapOrphanNodeWithDiv(e)),this._preElementAid(e),this._tableElementAid(e),e.children("br").remove()}},{key:"_preElementAid",value:function(e){var t=this.wwe.componentManager.getManager("codeblock");t.splitCodeblockToEachLine(e)}},{key:"_unwrapIfNonBlockElementHasBr",value:function(e){var t=e.find("span, a, b, em, i, s");t.each(function(e,t){var n=$(t).children("br");n.length&&"LI"!==t.nodeName&&"UL"!==t.nodeName&&n.eq(0).unwrap()})}},{key:"_unwrapNestedBlocks",value:function(e,t){var n=e.find(":not(:has(*))").not("b,s,i,em,code,span");n.each(function(n,i){for(var a="BR"===i.nodeName?$(i.parentNode):$(i);a.parents(t).length;){var r=a.parent(t);r.length&&r[0]!==e[0]?a.unwrap():a=a.parent()}})}},{key:"_removeUnnecessaryBlocks",value:function(e,t){e.find(t).each(function(e,n){var i=$(n),a=n.tagName,r="DIV"===a,o=0!==i.parent("li").length,l=0!==i.parent("blockquote").length,s=i.children(t).length;r&&(o||l||!s)||i.replaceWith(i.html())})}},{key:"_removeStyles",value:function(e){var t=$(e),n=void 0;"SPAN"!==l.default.getNodeName(t[0])?t.removeAttr("style"):(t.attr("style")&&(n=t.css("color")),t.removeAttr("style"),n?t.css("color",n):t.contents().unwrap())}},{key:"_prepareToPasteList",value:function(e,t,n){var i=l.default.getNodeName(e[0]),a=e.shift(),r=this.wwe.getEditor().getDocument().createDocumentFragment();if("LI"!==i&&e.length&&"LI"===e[0].tagName&&(i="LI",a=this._makeNodeAndAppend({tagName:i},a)),"OL"===i||"UL"===i)!n&&this.wwe.getEditor().hasFormat("LI")?$(r).append(this._wrapCurrentFormat(a)):$(r).append(a);else if("LI"===i){var o=this.wwe.getEditor().getDocument().createDocumentFragment();for(o.appendChild(a);e.length&&"LI"===e[0].tagName;)o.appendChild(e.shift());!n&&this.wwe.getEditor().hasFormat("LI")?$(r).append(this._wrapCurrentFormat(o)):!t||"UL"!==t.commonAncestorName&&"OL"!==t.commonAncestorName?$(r).append(this._makeNodeAndAppend({tagName:"UL"},o)):$(r).append(this._makeNodeAndAppend({tagName:t.commonAncestorName},o))}return r}},{key:"_unwrapFragmentFirstChildForPasteAsInline",value:function(e){return $(e).find("br").remove(),e.childNodes}},{key:"_wrapCurrentFormat",value:function(e){var t=this,n=void 0;return this._eachCurrentPath(function(i){"DIV"!==i.tagName&&(n=l.default.isElemNode(e)?e.tagName:e.firstChild.tagName,i.tagName!==n&&(e=t._makeNodeAndAppend(i,e)))}),e}},{key:"_eachCurrentPath",value:function(e){for(var t=l.default.getPath(this.wwe.getEditor().getSelection().startContainer,this.wwe.get$Body()[0]),n=t.length-1;n>-1;n-=1)e(t[n])}},{key:"_makeNodeAndAppend",value:function(e,t){var n=$("<"+e.tagName+"/>");return n.append(t),e.id&&n.attr("id",e.id),e.className&&n.addClass(e.className),n[0]}},{key:"_tableElementAid",value:function(e){this._completeTableIfNeed(e),this._updateTableIDClassName(e)}},{key:"_completeTableIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=t.wrapDanglingTableCellsIntoTrIfNeed(e);n&&e.append(n);var i=t.wrapTrsIntoTbodyIfNeed(e);i&&e.append(i);var a=t.wrapTheadAndTbodyIntoTableIfNeed(e);a&&e.append(a)}},{key:"_updateTableIDClassName",value:function(e){var t=this.wwe.componentManager.getManager("table");e.find("table").each(function(e,t){$(t).removeClass(function(e,t){return t.replace(/.*\s*(te-content-table-\d+)\s*.*/,"$1")})}),e.find("table").each(function(e,n){$(n).addClass(t.getTableIDClassName())})}}]),e}();e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s="task-list-item",c="data-te-task",u="checked",d=function(){function e(t){a(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="task",this._init()}return r(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.wwe.getEditor().addEventListener("mousedown",function(e){var t=e.offsetX<18&&e.offsetY<18;e.target.hasAttribute(c)&&t&&$(e.target).toggleClass(u)})}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeTaskListClass()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){e.isInTaskList(n)&&e.wwe.defer(function(){var t=e.wwe.getRange(),n=$(t.startContainer).closest("li");n.removeClass(u)})})}},{key:"isInTaskList",value:function(e){var t=void 0;return e||(e=this.wwe.getEditor().getSelection().cloneRange()),t=e.startContainer.nodeType===Node.ELEMENT_NODE&&"LI"===e.startContainer.tagName?e.startContainer:$(e.startContainer).parents("li")[0],$(t).hasClass(s)}},{key:"unformatTask",value:function(e){var t=$(e).closest("li");t.removeClass(s),t.removeClass(u),t.removeAttr(c),t.attr("class")||t.removeAttr("class")}},{key:"formatTask",value:function(e){var t=$(e),n=t.closest("li");n.addClass(s),n.attr(c,"")}},{key:"_formatTaskIfNeed",value:function(){var e=this.wwe.getEditor().getSelection().cloneRange();this.isInTaskList(e)&&this.formatTask(e.startContainer)}},{key:"_removeTaskListClass",value:function(){this.wwe.get$Body().find(".task-list").each(function(e,t){$(t).removeClass("task-list")})}},{key:"getLinesOfSelection",value:function(e,t){var n="DIV,LI",i=[],a=!1,r=!0,o=void 0;l.default.isTextNode(e)&&(e=$(e).parents("div").first()[0]),l.default.isTextNode(t)&&(t=$(t).parents("div").first()[0]);for(var s=e;r&&$(s).is(n);s=o){i.push(s),s!==t&&s.parentNode!==t||(a=!0);var c=$(e).is("li")||0!==$(e).parent("li").length;o=this._getNextLine(s,c,a),r=o&&!a}return i}},{key:"_getNextLine",value:function(e,t,n){var i=void 0;if(t&&"LI"===e.parentNode.tagName){var a=$(e).parent().next();i=a.children("div").first()[0];var r=a[0]&&!i,o=!a[0]&&!i;r?i=a[0]:o&&!n&&(i=$(e).parents("ol,ul").first().next()[0])}else i=e.nextElementSibling;return i}}]),e}();e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s=tui.util.browser.msie&&11===tui.util.browser.version,c=navigator.appVersion.indexOf("Win")!==-1&&tui.util.browser.chrome,u=s||c,d=function(){function e(t,n){a(this,e),this._wwe=t,u&&(this.isComposition=!1,this._initCompositionEvent()),this.setRange(n||this._wwe.getRange())}return r(e,[{key:"_initCompositionEvent",value:function(){var e=this;this._wwe.getEditor().addEventListener("compositionstart",function(){e.isComposition=!0}),this._wwe.getEditor().addEventListener("compositionend",function(){e.isComposition=!1})}},{key:"setRange",value:function(e){this._range&&this._range.detach(),this._range=e}},{key:"expandStartOffset",value:function(){var e=this._range;l.default.isTextNode(e.startContainer)&&e.startOffset>0&&e.setStart(e.startContainer,e.startOffset-1)}},{key:"expandEndOffset",value:function(){var e=this._range;l.default.isTextNode(e.endContainer)&&e.endOffset<e.endContainer.nodeValue.length&&e.setEnd(e.endContainer,e.endOffset+1)}},{key:"setEndBeforeRange",value:function(e){var t=e.startOffset;this.isComposition&&(t+=1),this._range.setEnd(e.startContainer,t)}},{key:"getTextContent",value:function(){return this._range.cloneContents().textContent}},{key:"replaceContent",value:function(e){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(e),this._range=this._wwe.getRange()}},{key:"deleteContent",value:function(){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(""),this._range=this._wwe.getRange()}},{key:"peekStartBeforeOffset",value:function(e){var t=this._range.cloneRange();return t.setStart(t.startContainer,Math.max(t.startOffset-e,0)),t.setEnd(this._range.startContainer,this._range.startOffset),t.cloneContents().textContent}}]),e}();e.exports=d},function(e,t,n){"use strict";var i=n(1),a=i.command("wysiwyg",{name:"AddImage",exec:function(e,t){var n=e.getEditor();n.focus(),n.hasFormat("PRE")||n.insertImage(t.imageUrl,{alt:t.altText})}});e.exports=a},function(e,t,n){"use strict";var i=n(1),a=i.command("wysiwyg",{name:"AddLink",exec:function(e,t){var n=e.getEditor();if(n.focus(),!n.hasFormat("PRE"))if(n.removeAllFormatting(),n.getSelectedText())n.makeLink(t.url);else{var i=n.createElement("A",{href:t.url});$(i).text(t.linkText),n.insertElement(i)}}});e.exports=a},function(e,t,n){"use strict";var i=n(1),a=i.command("wysiwyg",{name:"Blockquote",keyMap:["CTRL+Q","META+Q"],exec:function(e){var t=e.getEditor();t.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||(e.unwrapBlockTag(),t.increaseQuoteLevel())}});e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{
default:e}}function a(e){e.hasFormat("b")||e.hasFormat("strong")?e.changeFormat(null,{tag:"b"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.bold())}var r=n(1),o=i(r),l=n(2),s=i(l),c=o.default.command("wysiwyg",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");t.focus(),t.hasFormat("table")&&n.getSelectedCells().length?n.styleToSelectedCells(a):a(t);var i=t.getSelection();t.hasFormat("table")&&!s.default.isTextNode(i.commonAncestorContainer)&&(i.collapse(!0),t.setSelection(i))}});e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){"CODE"===c.default.getNodeName(e.startContainer.nextSibling)&&0===c.default.getTextLength(e.startContainer.nextSibling)&&$(e.startContainer.nextSibling).remove()}function r(e,t){if(!t.hasFormat("PRE")&&t.hasFormat("code"))t.changeFormat(null,{tag:"code"}),a(e.getSelection().cloneRange());else if(!t.hasFormat("a")&&!t.hasFormat("PRE")){t.hasFormat("b")?t.removeBold():t.hasFormat("i")&&t.removeItalic(),t.changeFormat({tag:"code"});var n=t.getSelection().cloneRange();n.setStart(n.endContainer,n.endOffset),n.collapse(!0),t.setSelection(n)}}var o=n(1),l=i(o),s=n(2),c=i(s),u=l.default.command("wysiwyg",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("tableSelection"),a=tui.util.bind(r,null,e.getEditor());t.focus(),t.hasFormat("table")&&i.getSelectedCells().length?i.styleToSelectedCells(a):a(t),t.hasFormat("table")&&!c.default.isTextNode(n.commonAncestorContainer)&&(n.collapse(!0),t.setSelection(n))}});e.exports=u},function(e,t,n){"use strict";function i(e,t){var n=t.getEditor().getSelection().cloneRange();n.setStartBefore(e.find("div")[0].firstChild),n.collapse(!0),t.getEditor().setSelection(n)}function a(e,t){var n=t.componentManager.getManager("codeblock"),i=void 0,a=void 0;e.collapsed?a=[$("<div><br></div>")[0]]:(i=e.extractContents(),a=tui.util.toArray(i.childNodes));var r=n.convertToCodeblock(a).innerHTML;return r}var r=n(1),o="te-content-codeblock-",l="data-te-codeblock",s=0,c=r.command("wysiwyg",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e,t){var n=e.getEditor(),r=n.getSelection().cloneRange();if(!n.hasFormat("PRE")&&!n.hasFormat("TABLE")){var c=l+' class = "'+o+s+'"';t&&(c+=' data-language="'+t+'"');var u=a(r,e);n.insertHTML("<pre "+c+">"+u+"</pre>"),i(e.get$Body().find("."+o+s),e),s+=1}n.focus()}});e.exports=c},function(e,t,n){"use strict";function i(e){var t=e.getEditor().getSelection();return $(t.startContainer).closest("li")}var a=n(1),r=a.command("wysiwyg",{name:"DecreaseDepth",exec:function(e){var t=i(e);if(t.length){e.getEditor().saveUndoState();var n=t.attr("class");e.getEditor().decreaseListLevel(),t=i(e),t.attr("class",n)}}});e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"Heading",exec:function(e,t){var n=e.getEditor(),i="h1, h2, h3, h4, h5, h6, div";n.focus(),n.hasFormat("TABLE")||n.hasFormat("PRE")||n.modifyBlocks(function(e){return $(e).children(i).each(function(e,n){var i="<H"+t+" />",a=$(n);if(a.is("DIV"))a.wrap(i);else{var r=$(i);r.insertBefore(n),r.html(a.html()),a.remove()}}),e})}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=n(2),l=i(o),s=r.default.command("wysiwyg",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=void 0,a=void 0,r=void 0;if(n.collapsed&&!t.hasFormat("TABLE")&&!t.hasFormat("PRE")){i=l.default.getChildNodeByOffset(n.startContainer,n.startOffset),a=l.default.getTopNextNodeUnder(i,e.get$Body()[0]),a||(a=t.createDefaultBlock(),e.get$Body().append(a));var o=t.createElement("HR");t.modifyBlocks(function(e){return e.appendChild(o),e}),r=o.previousSibling,r&&l.default.isTextNode(r)&&0===l.default.getTextLength(r)&&o.parentNode.removeChild(r),n.selectNodeContents(a),n.collapse(!0),t.setSelection(n)}t.focus()}});e.exports=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"IncreaseDepth",exec:function(e){var t=e.getEditor().getSelection(),n=$(t.startContainer).closest("li"),i=void 0,a=void 0,r=void 0,o=n.prev();if(o.length&&n.length){var l=n.find("li").eq(0);e.getEditor().saveUndoState(),a=n.attr("class"),i=o.attr("class"),r=l.attr("class"),n.removeAttr("class"),o.removeAttr("class"),l.length&&!l.children("div").length&&l.removeAttr("class"),e.getEditor().increaseListLevel(),n.attr("class",a),o.attr("class",i),l.attr("class",r)}}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e.hasFormat("i")||e.hasFormat("em")?e.changeFormat(null,{tag:"i"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.italic())}var r=n(1),o=i(r),l=n(2),s=i(l),c=o.default.command("wysiwyg",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("tableSelection");t.focus(),t.hasFormat("table")&&i.getSelectedCells().length?i.styleToSelectedCells(a):a(t),t.hasFormat("table")&&!s.default.isTextNode(n.commonAncestorContainer)&&(n.collapse(!0),t.setSelection(n))}});e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),a=n.startContainer,r=n.startOffset,o=n.endContainer,l=n.endOffset;t.focus(),t.saveUndoState(n);for(var s=i.getLinesOfSelection(a,o),c=0;c<s.length;c+=1)this._changeFormatToOrderedListIfNeed(e,s[c]);n=t.getSelection(),n.setStart(a,r),n.setEnd(o,l),t.setSelection(n),t.saveUndoState(n)},_changeFormatToOrderedListIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection();n.hasFormat("TABLE")||n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("LI")?(e.saveSelection(i),n.replaceParent(i.startContainer,"ul","ol"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeOrderedList()))}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"Paragraph",exec:function(e){var t=e.getEditor();t.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||t.modifyBlocks(function(e){var t=$(document.createDocumentFragment());return $(e).children().each(function(e,n){n.nodeName.match(/h\d/i)?t.append($(n).children()):n.nodeName.match(/ul|ol/i)?$(n).find("li").each(function(e,n){t.append($(n).children())}):t.append(n)}),t[0]})}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e.hasFormat("S")?e.changeFormat(null,{tag:"S"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.strikethrough())}var r=n(1),o=i(r),l=n(2),s=i(l),c=o.default.command("wysiwyg",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("tableSelection");t.focus(),t.hasFormat("table")&&i.getSelectedCells().length?i.styleToSelectedCells(a):a(t),t.hasFormat("table")&&!s.default.isTextNode(n.commonAncestorContainer)&&(n.collapse(!0),t.setSelection(n))}});e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.getSelection();n.selectNodeContents(t.find("th")[0]),n.collapse(!0),e.setSelection(n)}function r(e,t){for(var n="<thead><tr>",i=0;e;)n+="<th>",t&&(n+=t[i],i+=1),n+="</th>",e-=1;return n+="</tr></thead>"}function o(e,t,n){for(var i="<tbody>",a=e,r=0;r<t;r+=1){i+="<tr>";for(var o=0;o<e;o+=1)i+="<td>",n&&(i+=n[a],a+=1),i+="</td>";i+="</tr>"}return i+="</tbody>"}var l=n(1),s=i(l),c=s.default.command("wysiwyg",{name:"Table",exec:function(e,t,n,i){var l=e.getEditor(),s=e.componentManager.getManager("table").getTableIDClassName(),c=void 0;return!l.getSelection().collapsed||l.hasFormat("TABLE")||l.hasFormat("PRE")?void l.focus():(c='<table class="'+s+'">',c+=r(t,i),c+=o(t,n-1,i),c+="</table>",l.insertHTML(c),l.focus(),void(i||a(l,e.get$Body().find("."+s))))}});e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.startContainer;return t="TD"===u.default.getNodeName(t)||"TH"===u.default.getNodeName(t)?$(t):$(t).parentsUntil("tr")}function r(e){var t=e.index(),n=void 0;e.parents("table").find("tr").each(function(e,i){n="TBODY"===u.default.getNodeName(i.parentNode)?$("<td></td>"):$("<th></th>"),tui.util.browser.msie||n.append($("<br />")[0]),$(n).insertAfter($(i).children().eq(t))})}function o(e,t){var n=e.getSelection();n.selectNodeContents(t.next()[0]),n.collapse(!0),e.setSelection(n)}var l=n(1),s=i(l),c=n(2),u=i(c),d=s.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=void 0;t.focus(),t.hasFormat("TR")&&(t.saveUndoState(n),i=a(n),r(i),o(t,i))}});e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.clone(),n=tui.util.browser.msie?"":"<br />";return t.find("td").html(n),t}function r(e,t){var n=e.getSelection();n.selectNodeContents(t.find("td")[0]),n.collapse(!0),e.setSelection(n)}var o=n(1),l=i(o),s=l.default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=void 0,o=void 0;t.focus(),t.hasFormat("TD")?(t.saveUndoState(n),i=$(n.startContainer).closest("tr"),o=a(i),o.insertAfter(i),r(t,o)):t.hasFormat("TH")&&(t.saveUndoState(n),i=$(n.startContainer).parents("thead").next("tbody").children("tr").eq(0),o=a(i),o.insertBefore(i),r(t,o))}});e.exports=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var i=n.isDivided||!1,a=n.startColumnIndex,r=n.endColumnIndex,o=e.find("tr").eq(0).find("td,th").length;e.find("tr").each(function(e,n){$(n).children("td,th").each(function(e,n){i&&(a<=e&&e<=o||e<=r)?$(n).attr("align",t):a<=e&&e<=r&&$(n).attr("align",t)})})}function r(e,t){var n=e.find("tr").eq(0).find("td,th").length,i=t.from,a=t.to,r=void 0,o=void 0,l=void 0;return i.row===a.row?(r=i.cell,o=a.cell):i.row<a.row&&(i.cell<=a.cell?(r=0,o=n-1):(r=i.cell,o=a.cell,l=!0)),{startColumnIndex:r,endColumnIndex:o,isDivided:l}}function o(e,t){var n=t.getSelectedCells(),i=void 0,a=void 0;if(n.length)i=t.getSelectionRangeFromTable(n.first()[0],n.last()[0]);else{var r=e.startContainer;a=u.default.isTextNode(r)?$(r).parent("td,th")[0]:r,i=t.getSelectionRangeFromTable(a,a)}return i}var l=n(1),s=i(l),c=n(2),u=i(c),d=s.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),i=n.getSelection().cloneRange(),l=e.componentManager.getManager("tableSelection"),s=o(i,l);if(n.focus(),n.hasFormat("TR")){n.saveUndoState(i);var c=$(i.startContainer).parents("table"),u=r(c,s);a(c,t,u)}l.removeClassAttrbuteFromAllCellsIfNeed()}});e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"RemoveTable",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.hasFormat("TABLE")){t.saveUndoState(n);var i=$(n.startContainer).closest("table");i.remove()}t.focus()}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.startContainer;return t="TD"===u.default.getNodeName(t)||"TH"===u.default.getNodeName(t)?$(t):$(t).parentsUntil("tr")}function r(e){var t=e.index();e.parents("table").find("tr").each(function(e,n){$(n).children().eq(t).remove()})}function o(e,t,n){var i=t[0];if(t.length){var a=e.getSelection();a.selectNodeContents(t[0]),a.collapse(!0),e.setSelection(a),n.setLastCellNode(i)}}var l=n(1),s=i(l),c=n(2),u=i(c),d=s.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=e.componentManager.getManager("table"),l=$(n.startContainer).closest("table").find("thead tr th").length>1;if(t.focus(),n.collapse(!0),t.setSelection(n),t.hasFormat("TR",null,n)&&l){t.saveUndoState(n);var s=a(n),c=s.next().length?s.next():s.prev();r(s),o(t,c,i)}}});e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,i){var a=n.find("td")[0];t.setStart(a,0),t.collapse(!0),i.setLastCellNode(a),e.setSelection(t)}function r(e,t,n){var i=n.find("tbody tr").length,a=$(e).parents("thead").length,r=t.from.row,o=t.to.row;a&&(r+=1);var l=(1===r||a)&&o===i;return l&&(o-=1),n.find("tr").slice(r,o+1)}function o(e,t,n){var i=t.getSelectedCells(),a=void 0,o=void 0;if(i.length)a=t.getSelectionRangeFromTable(i.first()[0],i.last()[0]),o=r(i.first()[0],a,n);else{var l=$(e.startContainer).closest("td,th")[0];a=t.getSelectionRangeFromTable(l,l),o=r(l,a,n)}return o}var l=n(1),s=i(l),c=s.default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=$(n.startContainer).parents("table"),r=e.componentManager.getManager("tableSelection"),l=e.componentManager.getManager("table"),s=o(n,r,i),c=i.find("tbody tr").length;if(t.focus(),(t.hasFormat("TD")||t.hasFormat("TABLE"))&&c>1){t.saveUndoState(n);var u=s.last().next()[0]?s.last().next():s.first().prev();u.length&&a(t,n,u,l),s.remove()}r.removeClassAttrbuteFromAllCellsIfNeed()}});e.exports=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"Task",keyMap:["CTRL+T","META+T"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("task"),a=n.startContainer,r=n.startOffset,o=n.endContainer,l=n.endOffset;t.focus(),t.saveUndoState(n);for(var s=i.getLinesOfSelection(a,o),c=0;c<s.length;c+=1)this._changeFormatToTaskIfNeed(e,s[c]);n=t.getSelection(),n.setStart(a,r),n.setEnd(o,l),t.setSelection(n),t.saveUndoState(n)},_changeFormatToTaskIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection(),a=e.componentManager.getManager("task");n.hasFormat("TABLE")||n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("li")||(e.unwrapBlockTag(),n.makeUnorderedList()),$(t).parents("li").first().hasClass("task-list-item")?a.unformatTask(t):a.formatTask(t))}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=r.default.command("wysiwyg",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),a=n.startContainer,r=n.startOffset,o=n.endContainer,l=n.endOffset;t.focus(),t.saveUndoState(n);for(var s=i.getLinesOfSelection(a,o),c=0;c<s.length;c+=1)this._changeFormatToUnorderedListIfNeed(e,s[c]);n=t.getSelection(),n.setStart(a,r),n.setEnd(o,l),t.setSelection(n),t.saveUndoState(n)},_changeFormatToUnorderedListIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection();n.hasFormat("TABLE")||n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("LI")?(e.saveSelection(i),n.replaceParent(i.startContainer,"ol","ul"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeUnorderedList()))}});e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),l=i(o),s=n(100),c=i(s),u=n(104),d=i(u),f=n(107),h=i(f),g=n(15),v=i(g),p=n(16),m=i(p),y=n(103),b=i(y),w=n(105),k=i(w),_=n(102),C=i(_),E=n(101),T=i(E),M=n(89),x=i(M),S=n(52),I=i(S),N=n(108),A=i(N),B=n(51),L=i(B),R=n(8),O=i(R),D=I.default.getSharedInstance(),P=tui.util,H=/<(.+)>(<br>|<br \/>|<BR>|<BR \/>)<\/\1>/g,F=/(?:<br>|<br \/>|<BR>|<BR \/>)<\/(.+?)>/g,U=/\b(H[\d]|LI|P|BLOCKQUOTE|TD|PRE)\b/,W="tui-editor-contents",j="undefined"!=typeof MutationObserver,V=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,e),this.componentManager=new L.default(this),this.eventManager=n,this.$editorContainerEl=t,this._height=0,this._silentChange=!1,this._keyEventHandlers={},this._managers={},this._options=$.extend({useCommandShortcut:!0},r),this._initEvent(),this._initDefaultKeyEventHandler(),this.debouncedPostProcessForChange=P.debounce(function(){return i.postProcessForChange()},0)}return r(e,[{key:"init",value:function(){var e=$("<div />");this.$editorContainerEl.append(e),this.editor=new x.default(e[0],{blockTag:"DIV",leafNodeNames:{HR:!1}}),this._options.useCommandShortcut||this.editor.blockCommandShortcuts(),this._clipboardManager=new c.default(this),this._initSquireEvent(),this._clipboardManager.init(),this.get$Body().addClass(W),this.$editorContainerEl.css("position","relative")}},{key:"_preprocessForInlineElement",value:function(e){return e.replace(/<br>( *)<img/g,"<br><br>$1<img")}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._preprocessForInlineElement(t)}),this.eventManager.listen("wysiwygKeyEvent",function(t){return e._runKeyEventHandlers(t.data,t.keyMap)})}},{key:"addKeyEventHandler",value:function(e,t){t||(t=e,e="DEFAULT"),this._keyEventHandlers[e]||(this._keyEventHandlers[e]=[]),this._keyEventHandlers[e].push(t)}},{key:"removeKeyEventHandler",value:function(e,t){t||(t=e,e="DEFAULT");var n=this._keyEventHandlers[e];n&&(this._keyEventHandlers[e]=n.filter(function(e){return e!==t}))}},{key:"_runKeyEventHandlers",value:function(e,t){var n=this.getRange(),i=void 0,a=void 0;i=this._keyEventHandlers.DEFAULT,i&&P.forEachArray(i,function(i){return a=i(e,n,t)}),i=this._keyEventHandlers[t],i&&a!==!1&&P.forEachArray(i,function(i){return i(e,n,t)})}},{key:"_initSquireEvent",value:function(){var e=this,t=!1;this.getEditor().addEventListener("copy",function(t){e.eventManager.emit("copy",{source:"wysiwyg",data:t}),P.debounce(function(){e.eventManager.emit("copyAfter",{source:"wysiwyg",data:t})})()}),this.getEditor().addEventListener(P.browser.msie?"beforecut":"cut",function(t){e.eventManager.emit("cut",{source:"wysiwyg",data:t}),P.debounce(function(){e.eventManager.emit("cutAfter",{source:"wysiwyg",data:t})})()}),this.getEditor().addEventListener(P.browser.msie?"beforepaste":"paste",function(t){e.eventManager.emit("paste",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("dragover",function(e){return e.preventDefault(),!1}),this.getEditor().addEventListener("drop",function(t){return t.preventDefault(),e.eventManager.emit("drop",{source:"wysiwyg",data:t}),!1}),this.getEditor().addEventListener("input",P.debounce(function(){if(!e._silentChange&&e.isEditorValid()){var t={source:"wysiwyg"};e.eventManager.emit("changeFromWysiwyg",t),e.eventManager.emit("change",t),e.eventManager.emit("contentChangedFromWysiwyg",e)}else e._silentChange=!1;e.getEditor().preserveLastLine()},0)),this.getEditor().addEventListener("keydown",function(n){var i=e.getEditor().getSelection();i.collapsed||(t=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:n}),e._onKeyDown(n)}),P.browser.firefox&&(this.getEditor().addEventListener("keypress",function(n){var i=n.keyCode;if(13===i||9===i){var a=e.getEditor().getSelection();a.collapsed||(t=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:n}),e._onKeyDown(n)}}),e.getEditor().addEventListener("keyup",function(){var t=e.getRange();if(l.default.isTextNode(t.commonAncestorContainer)&&l.default.isTextNode(t.commonAncestorContainer.previousSibling)){var n=t.commonAncestorContainer.previousSibling.length,i=t.commonAncestorContainer;t.commonAncestorContainer.previousSibling.appendData(t.commonAncestorContainer.data),t.setStart(t.commonAncestorContainer.previousSibling,n+t.startOffset),t.collapse(!0),i.parentNode.removeChild(i),e.getEditor().setSelection(t),t.detach()}})),this.getEditor().addEventListener("keyup",function(n){t&&(e.debouncedPostProcessForChange(),t=!1),e.eventManager.emit("keyup",{source:"wysiwyg",data:n})}),this.getEditor().addEventListener("scroll",function(t){e.eventManager.emit("scroll",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("click",function(t){e.eventManager.emit("click",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mousedown",function(t){e.eventManager.emit("mousedown",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mouseover",function(t){e.eventManager.emit("mouseover",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mouseup",function(t){e.eventManager.emit("mouseup",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("contextmenu",function(t){e.eventManager.emit("contextmenu",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("focus",function(){e.eventManager.emit("focus",{source:"wysiwyg"})}),this.getEditor().addEventListener("blur",function(){e.eventManager.emit("blur",{source:"wysiwyg"})}),this.getEditor().addEventListener("pathChange",function(t){var n={bold:/(>B|>STRONG|^B$|^STRONG$)/.test(t.path),italic:/(>I|>EM|^I$|^EM$)/.test(t.path),strike:/(^S>|>S$|>S>|^S$)/.test(t.path),code:/CODE/.test(t.path),codeBlock:/PRE/.test(t.path),quote:/BLOCKQUOTE/.test(t.path),list:/LI(?!.task-list-item)/.test(e._getLastLiString(t.path)),task:/LI.task-list-item/.test(e._getLastLiString(t.path)),source:"wysiwyg"};e.eventManager.emit("stateChange",n)})}},{key:"_getLastLiString",value:function(e){var t=/LI[^UO]*$/.exec(e),n=void 0;return n=t?t[0]:""}},{key:"_onKeyDown",value:function(e){var t=D.convert(e);e.keyCode&&(this.eventManager.emit("keyMap",{source:"wysiwyg",keyMap:t,data:e}),e.defaultPrevented||this.eventManager.emit("wysiwygKeyEvent",{keyMap:t,data:e}))}},{key:"_initDefaultKeyEventHandler",value:function(){var e=this;this.addKeyEventHandler("ENTER",function(t,n){e._isInOrphanText(n)&&e.defer(function(){e._wrapDefaultBlockToOrphanTexts(),e.breakToNewDefaultBlock(n,"before")}),e.defer(function(){e._scrollToRangeIfNeed()})}),this.addKeyEventHandler("TAB",function(t){var n=e.getEditor(),i=n.getSelection(),a=i.collapsed&&e._isCursorNotInRestrictedAreaOfTabAction(n),r=!i.collapsed&&l.default.isTextNode(i.commonAncestorContainer);return t.preventDefault(),!a&&!r||(n.insertPlainText("    "),!1)})}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){var e=this.get$Body().contents().filter(this.findTextNodeFilter);e.each(function(e,t){t.nextSibling&&"BR"===t.nextSibling.tagName&&$(t.nextSibling).remove(),$(t).wrap("<div />")})}},{key:"_scrollToRangeIfNeed",value:function(){var e=this.getEditor().getSelection().cloneRange(),t=this.getEditor().getCursorPosition(e).top-this.$editorContainerEl.offset().top;t>=this.get$Body().height()&&e.endContainer.scrollIntoView()}},{key:"_isInOrphanText",value:function(e){return e.startContainer.nodeType===Node.TEXT_NODE&&e.startContainer.parentNode===this.get$Body()[0]}},{key:"_wrapDefaultBlockTo",value:function(e){this.saveSelection(e),this._joinSplitedTextNodes(),this.restoreSavedSelection(),e=this.getEditor().getSelection().cloneRange();var t=e.startContainer,n=e.startOffset,i=this.getEditor().createDefaultBlock([e.startContainer]),a=l.default.getChildNodeByOffset(e.startContainer,e.startOffset);a?e.setStartBefore(a):e.selectNodeContents(e.startContainer),e.collapse(!0),e.insertNode(i),e.setStart(t,n),e.collapse(!0),this.getEditor().setSelection(e)}},{key:"findTextNodeFilter",value:function(){return this.nodeType===Node.TEXT_NODE}},{key:"_joinSplitedTextNodes",value:function(){var e=void 0,t=void 0,n=[],i=this.get$Body().contents().filter(this.findTextNodeFilter);i.each(function(i,a){e===a.previousSibling?(t.nodeValue+=a.nodeValue,n.push(a)):t=a,e=a}),$(n).remove()}},{key:"saveSelection",value:function(e){var t=this.getEditor();e||(e=t.getSelection().cloneRange()),this.getEditor()._saveRangeToBookmark(e)}},{key:"restoreSavedSelection",value:function(){var e=this.getEditor();e.setSelection(e._getRangeAndRemoveBookmark())}},{key:"reset",value:function(){this.setValue("")}},{key:"changeBlockFormatTo",value:function(e){this.getEditor().changeBlockFormatTo(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"makeEmptyBlockCurrentSelection",value:function(){var e=this;this.getEditor().modifyBlocks(function(t){return t.textContent||(t=e.getEditor().createDefaultBlock()),t})}},{key:"focus",value:function(){this.editor.focus()}},{key:"blur",value:function(){this.editor.blur()}},{key:"remove",value:function(){this.getEditor().destroy(),this.editor=null,this.$body=null}},{key:"setHeight",value:function(e){this._height=e,"auto"===e?(this.get$Body().css("overflow","visible"),this.get$Body().css("height","auto")):(this.get$Body().css("overflow","auto"),this.get$Body().css("height","100%"),this.$editorContainerEl.height(e))}},{key:"setValue",value:function(e){e=this.eventManager.emitReduce("wysiwygSetValueBefore",e),this.editor.setHTML(e),O.default.replaceElements(this.$editorContainerEl,!1,!0),this.eventManager.emit("wysiwygSetValueAfter",this),this.eventManager.emit("contentChangedFromWysiwyg",this),this.moveCursorToEnd(),this.getEditor().preserveLastLine(),this.getEditor().removeLastUndoStack(),this.getEditor().saveUndoState()}},{key:"getValue",value:function(){O.default.restoreElements(this.$editorContainerEl,!1,!0),this._prepareGetHTML();var e=this.editor.getHTML();return e=e.replace(H,function(e,t){var n=void 0;return n="li"===t?e:"td"===t||"th"===t?"<"+t+"></"+t+">":"<br />"}),e=e.replace(F,"</$1>"),e=e.replace(/<div>/g,""),e=e.replace(/<\/div>/g,"<br />"),e=this.eventManager.emitReduce("wysiwygProcessHTMLText",e)}},{key:"_prepareGetHTML",value:function(){var e=this;e.get$Body().attr("lastGetValue",Date.now()),e._joinSplitedTextNodes(),e.getEditor().modifyDocument(function(){e.eventManager.emit("wysiwygGetValueBefore",e)})}},{key:"postProcessForChange",value:function(){var e=this;e.getEditor().modifyDocument(function(){e.eventManager.emit("wysiwygRangeChangeAfter",e)})}},{key:"readySilentChange",value:function(){j&&!this.getEditor().isIgnoreChange()&&(this._silentChange=!0)}},{key:"getEditor",value:function(){return this.editor}},{key:"replaceSelection",value:function(e,t){this.getEditor().replaceSelection(e,t)}},{key:"replaceRelativeOffset",value:function(e,t,n){this.getEditor().replaceRelativeOffset(e,t,n)}},{key:"addWidget",value:function(e,t,n,i){var a=this.getEditor().getSelectionPosition(e,n,i),r=this.$editorContainerEl.offset();this.$editorContainerEl.append(t),$(t).css({position:"absolute",top:a.top-r.top,left:a.left-r.left})}},{key:"get$Body",value:function(){return this.getEditor().get$Body()}},{key:"hasFormatWithRx",value:function(e){return this.getEditor().getPath().match(e)}},{key:"breakToNewDefaultBlock",value:function(e,t){var n=this.editor.createDefaultBlock(),i=l.default.getChildNodeByOffset(e.startContainer,e.startOffset)||l.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),a=l.default.getParentUntil(i,this.get$Body()[0]);"before"===t?$(a).before(n):$(a).after(n),e.setStart(n,0),e.collapse(!0),this.editor.setSelection(e)}},{key:"replaceContentText",value:function(e,t,n){var i=$(e).html();$(e).html(i.replace(t,n))}},{key:"unwrapBlockTag",value:function(e){e||(e=function(e){return U.test(e)}),this.getEditor().changeBlockFormat(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"moveCursorToEnd",value:function(){this.getEditor().moveCursorToEnd(),this.getEditor().scrollTop(this.get$Body().height()),this._correctRangeAfterMoveCursor("end")}},{key:"moveCursorToStart",value:function(){this.getEditor().moveCursorToStart(),this.getEditor().scrollTop(0)}},{key:"scrollTop",value:function(e){return this.getEditor().scrollTop(e)}},{key:"_correctRangeAfterMoveCursor",value:function(e){var t=this.getEditor().getSelection().cloneRange(),n=this.get$Body()[0];if("start"===e)for(;n.firstChild;)n=n.firstChild;else for(;n.lastChild;)n=n.lastChild;"BR"===n.tagName?t.setStartBefore(n):t.setStartAfter(n),t.collapse(!0),this.getEditor().setSelection(t)}},{key:"getRange",value:function(){return this.getEditor().getSelection().cloneRange()}},{key:"getTextObject",value:function(e){return new A.default(this,e)}},{key:"defer",value:function(e,t){var n=this,i=t?t:0;setTimeout(function(){n.isEditorValid()&&e(n)},i)}},{key:"isEditorValid",value:function(){return this.getEditor()&&$.contains(this.$editorContainerEl[0].ownerDocument,this.$editorContainerEl[0])}},{key:"_isCursorNotInRestrictedAreaOfTabAction",value:function(e){return!e.hasFormat("li")&&!e.hasFormat("blockquote")&&!e.hasFormat("table")}}],[{key:"factory",value:function(t,n,i){var a=new e(t,n,i);return a.init(),a.componentManager.addManager(d.default),a.componentManager.addManager(h.default),a.componentManager.addManager(m.default),a.componentManager.addManager(v.default),a.componentManager.addManager(b.default),a.componentManager.addManager(k.default),a.componentManager.addManager(C.default),a.componentManager.addManager(T.default),a}}]),e}();e.exports=V},function(e,t){}]);